(function(){const We=document.createElement("link").relList;if(We&&We.supports&&We.supports("modulepreload"))return;for(const H of document.querySelectorAll('link[rel="modulepreload"]'))re(H);new MutationObserver(H=>{for(const p of H)if(p.type==="childList")for(const w of p.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&re(w)}).observe(document,{childList:!0,subtree:!0});function _e(H){const p={};return H.integrity&&(p.integrity=H.integrity),H.referrerpolicy&&(p.referrerPolicy=H.referrerpolicy),H.crossorigin==="use-credentials"?p.credentials="include":H.crossorigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function re(H){if(H.ep)return;H.ep=!0;const p=_e(H);fetch(H.href,p)}})();function xr(me){return me&&me.__esModule&&Object.prototype.hasOwnProperty.call(me,"default")?me.default:me}var mr={exports:{}};(function(me,We){(function(_e,re){me.exports=re()})(self,function(){return(()=>{var _e={6:(w,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.LinkComputer=c.WebLinkProvider=void 0;var _=function(){function l(g,v,s,o){o===void 0&&(o={}),this._terminal=g,this._regex=v,this._handler=s,this._options=o}return l.prototype.provideLinks=function(g,v){var s=f.computeLink(g,this._regex,this._terminal,this._handler);v(this._addCallbacks(s))},l.prototype._addCallbacks=function(g){var v=this;return g.map(function(s){return s.leave=v._options.leave,s.hover=function(o,h){if(v._options.hover){var a=s.range;v._options.hover(o,h,a)}},s})},l}();c.WebLinkProvider=_;var f=function(){function l(){}return l.computeLink=function(g,v,s,o){for(var h,a=new RegExp(v.source,(v.flags||"")+"g"),t=l._translateBufferLineToStringWithWrap(g-1,!1,s),e=t[0],r=t[1],i=-1,n=[];(h=a.exec(e))!==null;){var d=h[1];if(!d){console.log("match found without corresponding matchIndex");break}if(i=e.indexOf(d,i+1),a.lastIndex=i+d.length,i<0)break;for(var u=i+d.length,m=r+1;u>s.cols;)u-=s.cols,m++;for(var S=i+1,y=r+1;S>s.cols;)S-=s.cols,y++;var b={start:{x:S,y},end:{x:u,y:m}};n.push({range:b,text:d,activate:o})}return n},l._translateBufferLineToStringWithWrap=function(g,v,s){var o,h,a="";do{if(!(e=s.buffer.active.getLine(g)))break;e.isWrapped&&g--,h=e.isWrapped}while(h);var t=g;do{var e,r=s.buffer.active.getLine(g+1);if(o=!!r&&r.isWrapped,!(e=s.buffer.active.getLine(g)))break;a+=e.translateToString(!o&&v).substring(0,s.cols),g++}while(o);return[a,t]},l}();c.LinkComputer=f}},re={};function H(w){var c=re[w];if(c!==void 0)return c.exports;var _=re[w]={exports:{}};return _e[w](_,_.exports,H),_.exports}var p={};return(()=>{var w=p;Object.defineProperty(w,"__esModule",{value:!0}),w.WebLinksAddon=void 0;var c=H(6),_=new RegExp(`(?:^|[^\\da-z\\.-]+)((https?:\\/\\/)((([\\da-z\\.-]+)\\.([a-z\\.]{2,18}))|((\\d{1,3}\\.){3}\\d{1,3})|(localhost))(:\\d{1,5})?((\\/[\\/\\w\\.\\-%~:+@]*)*([^:"'\\s]))?(\\?[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?(#[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?)($|[^\\/\\w\\.\\-%]+)`);function f(g,v){var s=window.open();if(s){try{s.opener=null}catch{}s.location.href=v}else console.warn("Opening link blocked as opener could not be cleared")}var l=function(){function g(v,s,o){v===void 0&&(v=f),s===void 0&&(s={}),o===void 0&&(o=!1),this._handler=v,this._options=s,this._useLinkProvider=o}return g.prototype.activate=function(v){if(this._terminal=v,this._useLinkProvider&&"registerLinkProvider"in this._terminal){var s=(o=this._options).urlRegex||_;this._linkProvider=this._terminal.registerLinkProvider(new c.WebLinkProvider(this._terminal,s,this._handler,o))}else{var o;(o=this._options).matchIndex=1,this._linkMatcherId=this._terminal.registerLinkMatcher(_,this._handler,o)}},g.prototype.dispose=function(){var v;this._linkMatcherId!==void 0&&this._terminal!==void 0&&this._terminal.deregisterLinkMatcher(this._linkMatcherId),(v=this._linkProvider)===null||v===void 0||v.dispose()},g}();w.WebLinksAddon=l})(),p})()})})(mr);var Cr={exports:{}};(function(me,We){(function(_e,re){me.exports=re()})(window,function(){return function(_e){var re={};function H(p){if(re[p])return re[p].exports;var w=re[p]={i:p,l:!1,exports:{}};return _e[p].call(w.exports,w,w.exports,H),w.l=!0,w.exports}return H.m=_e,H.c=re,H.d=function(p,w,c){H.o(p,w)||Object.defineProperty(p,w,{enumerable:!0,get:c})},H.r=function(p){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})},H.t=function(p,w){if(1&w&&(p=H(p)),8&w||4&w&&typeof p=="object"&&p&&p.__esModule)return p;var c=Object.create(null);if(H.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:p}),2&w&&typeof p!="string")for(var _ in p)H.d(c,_,function(f){return p[f]}.bind(null,_));return c},H.n=function(p){var w=p&&p.__esModule?function(){return p.default}:function(){return p};return H.d(w,"a",w),w},H.o=function(p,w){return Object.prototype.hasOwnProperty.call(p,w)},H.p="",H(H.s=0)}([function(_e,re,H){Object.defineProperty(re,"__esModule",{value:!0}),re.AttachAddon=void 0;var p=function(){function c(_,f){this._disposables=[],this._socket=_,this._socket.binaryType="arraybuffer",this._bidirectional=!f||f.bidirectional!==!1}return c.prototype.activate=function(_){var f=this;this._disposables.push(w(this._socket,"message",function(l){var g=l.data;_.write(typeof g=="string"?g:new Uint8Array(g))})),this._bidirectional&&(this._disposables.push(_.onData(function(l){return f._sendData(l)})),this._disposables.push(_.onBinary(function(l){return f._sendBinary(l)}))),this._disposables.push(w(this._socket,"close",function(){return f.dispose()})),this._disposables.push(w(this._socket,"error",function(){return f.dispose()}))},c.prototype.dispose=function(){this._disposables.forEach(function(_){return _.dispose()})},c.prototype._sendData=function(_){this._socket.readyState===1&&this._socket.send(_)},c.prototype._sendBinary=function(_){if(this._socket.readyState===1){for(var f=new Uint8Array(_.length),l=0;l<_.length;++l)f[l]=255&_.charCodeAt(l);this._socket.send(f)}},c}();function w(c,_,f){return c.addEventListener(_,f),{dispose:function(){f&&c.removeEventListener(_,f)}}}re.AttachAddon=p}])})})(Cr);var br={exports:{}};(function(me,We){(function(_e,re){me.exports=re()})(self,function(){return(()=>{var _e={965:(w,c,_)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.GlyphRenderer=void 0;var f=_(381),l=_(455),g=_(855),v=10,s=v*Float32Array.BYTES_PER_ELEMENT,o=function(){function h(a,t,e,r){this._terminal=a,this._colors=t,this._gl=e,this._dimensions=r,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};var i=this._gl,n=(0,f.throwIfFalsy)((0,f.createProgram)(i,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in vec2 a_texcoord;
layout (location = 5) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,`#version 300 es
precision lowp float;

in vec2 v_texcoord;

uniform sampler2D u_texture;

out vec4 outColor;

void main() {
  outColor = texture(u_texture, v_texcoord);
}`));this._program=n,this._projectionLocation=(0,f.throwIfFalsy)(i.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,f.throwIfFalsy)(i.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,f.throwIfFalsy)(i.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=i.createVertexArray(),i.bindVertexArray(this._vertexArrayObject);var d=new Float32Array([0,0,1,0,0,1,1,1]),u=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,u),i.bufferData(i.ARRAY_BUFFER,d,i.STATIC_DRAW),i.enableVertexAttribArray(0),i.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);var m=new Uint8Array([0,1,3,0,2,3]),S=i.createBuffer();i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,S),i.bufferData(i.ELEMENT_ARRAY_BUFFER,m,i.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,this._attributesBuffer),i.enableVertexAttribArray(2),i.vertexAttribPointer(2,2,i.FLOAT,!1,s,0),i.vertexAttribDivisor(2,1),i.enableVertexAttribArray(3),i.vertexAttribPointer(3,2,i.FLOAT,!1,s,2*Float32Array.BYTES_PER_ELEMENT),i.vertexAttribDivisor(3,1),i.enableVertexAttribArray(4),i.vertexAttribPointer(4,2,i.FLOAT,!1,s,4*Float32Array.BYTES_PER_ELEMENT),i.vertexAttribDivisor(4,1),i.enableVertexAttribArray(5),i.vertexAttribPointer(5,2,i.FLOAT,!1,s,6*Float32Array.BYTES_PER_ELEMENT),i.vertexAttribDivisor(5,1),i.enableVertexAttribArray(1),i.vertexAttribPointer(1,2,i.FLOAT,!1,s,8*Float32Array.BYTES_PER_ELEMENT),i.vertexAttribDivisor(1,1),this._atlasTexture=(0,f.throwIfFalsy)(i.createTexture()),i.bindTexture(i.TEXTURE_2D,this._atlasTexture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),this.onResize()}return h.prototype.beginFrame=function(){return!this._atlas||this._atlas.beginFrame()},h.prototype.updateCell=function(a,t,e,r,i,n){this._updateCell(this._vertices.attributes,a,t,e,r,i,n)},h.prototype._updateCell=function(a,t,e,r,i,n,d){var u,m=(e*this._terminal.cols+t)*v;r!==g.NULL_CELL_CODE&&r!==void 0?this._atlas&&((u=d&&d.length>1?this._atlas.getRasterizedGlyphCombinedChar(d,i,n):this._atlas.getRasterizedGlyph(r,i,n))?(a[m]=-u.offset.x+this._dimensions.scaledCharLeft,a[m+1]=-u.offset.y+this._dimensions.scaledCharTop,a[m+2]=u.size.x/this._dimensions.scaledCanvasWidth,a[m+3]=u.size.y/this._dimensions.scaledCanvasHeight,a[m+4]=u.texturePositionClipSpace.x,a[m+5]=u.texturePositionClipSpace.y,a[m+6]=u.sizeClipSpace.x,a[m+7]=u.sizeClipSpace.y):(0,l.fill)(a,0,m,m+v-1-2)):(0,l.fill)(a,0,m,m+v-1-2)},h.prototype.clear=function(a){var t=this._terminal,e=t.cols*t.rows*v;if(a||this._vertices.count!==e){this._vertices.count=e,this._vertices.attributes=new Float32Array(e);for(var r=0;r<this._vertices.attributesBuffers.length;r++)this._vertices.attributesBuffers[r]=new Float32Array(e);for(var i=0,n=0;n<t.rows;n++)for(var d=0;d<t.cols;d++)this._vertices.attributes[i+8]=d/t.cols,this._vertices.attributes[i+9]=n/t.rows,i+=v}},h.prototype.onResize=function(){var a=this._gl;a.viewport(0,0,a.canvas.width,a.canvas.height),this.clear()},h.prototype.setColors=function(){},h.prototype.render=function(a){if(this._atlas){var t=this._gl;t.useProgram(this._program),t.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;for(var e=this._vertices.attributesBuffers[this._activeBuffer],r=0,i=0;i<a.lineLengths.length;i++){var n=i*this._terminal.cols*v,d=this._vertices.attributes.subarray(n,n+a.lineLengths[i]*v);e.set(d,r),r+=d.length}t.bindBuffer(t.ARRAY_BUFFER,this._attributesBuffer),t.bufferData(t.ARRAY_BUFFER,e.subarray(0,r),t.STREAM_DRAW),this._atlas.hasCanvasChanged&&(this._atlas.hasCanvasChanged=!1,t.uniform1i(this._textureLocation,0),t.activeTexture(t.TEXTURE0+0),t.bindTexture(t.TEXTURE_2D,this._atlasTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this._atlas.cacheCanvas),t.generateMipmap(t.TEXTURE_2D)),t.uniformMatrix4fv(this._projectionLocation,!1,f.PROJECTION_MATRIX),t.uniform2f(this._resolutionLocation,t.canvas.width,t.canvas.height),t.drawElementsInstanced(t.TRIANGLES,6,t.UNSIGNED_BYTE,0,r/v)}},h.prototype.setAtlas=function(a){var t=this._gl;this._atlas=a,t.bindTexture(t.TEXTURE_2D,this._atlasTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a.cacheCanvas),t.generateMipmap(t.TEXTURE_2D)},h.prototype.setDimensions=function(a){this._dimensions=a},h}();c.GlyphRenderer=o},742:(w,c,_)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.RectangleRenderer=void 0;var f=_(381),l=_(310),g=8*Float32Array.BYTES_PER_ELEMENT,v=function(){function s(o,h,a,t){this._terminal=o,this._colors=h,this._gl=a,this._dimensions=t,this._vertices={count:0,attributes:new Float32Array(160)};var e=this._gl;this._program=(0,f.throwIfFalsy)((0,f.createProgram)(e,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec4 v_color;

void main() {
  vec2 zeroToOne = (a_position + (a_unitquad * a_size)) / u_resolution;
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this._resolutionLocation=(0,f.throwIfFalsy)(e.getUniformLocation(this._program,"u_resolution")),this._projectionLocation=(0,f.throwIfFalsy)(e.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=e.createVertexArray(),e.bindVertexArray(this._vertexArrayObject);var r=new Float32Array([0,0,1,0,0,1,1,1]),i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),e.enableVertexAttribArray(3),e.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);var n=new Uint8Array([0,1,3,0,2,3]),d=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,d),e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,this._attributesBuffer),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,g,0),e.vertexAttribDivisor(0,1),e.enableVertexAttribArray(1),e.vertexAttribPointer(1,2,e.FLOAT,!1,g,2*Float32Array.BYTES_PER_ELEMENT),e.vertexAttribDivisor(1,1),e.enableVertexAttribArray(2),e.vertexAttribPointer(2,4,e.FLOAT,!1,g,4*Float32Array.BYTES_PER_ELEMENT),e.vertexAttribDivisor(2,1),this._updateCachedColors()}return s.prototype.render=function(){var o=this._gl;o.useProgram(this._program),o.bindVertexArray(this._vertexArrayObject),o.uniformMatrix4fv(this._projectionLocation,!1,f.PROJECTION_MATRIX),o.uniform2f(this._resolutionLocation,o.canvas.width,o.canvas.height),o.bindBuffer(o.ARRAY_BUFFER,this._attributesBuffer),o.bufferData(o.ARRAY_BUFFER,this._vertices.attributes,o.DYNAMIC_DRAW),o.drawElementsInstanced(this._gl.TRIANGLES,6,o.UNSIGNED_BYTE,0,this._vertices.count)},s.prototype.onResize=function(){this._updateViewportRectangle()},s.prototype.setColors=function(){this._updateCachedColors(),this._updateViewportRectangle()},s.prototype._updateCachedColors=function(){this._bgFloat=this._colorToFloat32Array(this._colors.background)},s.prototype._updateViewportRectangle=function(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.scaledCellWidth,this._terminal.rows*this._dimensions.scaledCellHeight,this._bgFloat)},s.prototype.updateBackgrounds=function(o){for(var h=this._terminal,a=this._vertices,t=1,e=0;e<h.rows;e++){for(var r=-1,i=0,n=0,d=!1,u=0;u<h.cols;u++){var m=(e*h.cols+u)*l.RENDER_MODEL_INDICIES_PER_CELL,S=o.cells[m+l.RENDER_MODEL_BG_OFFSET],y=o.cells[m+l.RENDER_MODEL_FG_OFFSET],b=!!(67108864&y);if(S!==i||y!==n&&(d||b)){if(i!==0||d&&n!==0){var C=8*t++;this._updateRectangle(a,C,n,i,r,u,e)}r=u,i=S,n=y,d=b}}(i!==0||d&&n!==0)&&(C=8*t++,this._updateRectangle(a,C,n,i,r,h.cols,e))}a.count=t},s.prototype._updateRectangle=function(o,h,a,t,e,r,i){var n;if(67108864&a)switch(50331648&a){case 16777216:case 33554432:n=this._colors.ansi[255&a].rgba;break;case 50331648:n=(16777215&a)<<8;break;default:n=this._colors.foreground.rgba}else switch(50331648&t){case 16777216:case 33554432:n=this._colors.ansi[255&t].rgba;break;case 50331648:n=(16777215&t)<<8;break;default:n=this._colors.background.rgba}o.attributes.length<h+4&&(o.attributes=(0,f.expandFloat32Array)(o.attributes,this._terminal.rows*this._terminal.cols*8));var d=e*this._dimensions.scaledCellWidth,u=i*this._dimensions.scaledCellHeight,m=(n>>24&255)/255,S=(n>>16&255)/255,y=(n>>8&255)/255;this._addRectangle(o.attributes,h,d,u,(r-e)*this._dimensions.scaledCellWidth,this._dimensions.scaledCellHeight,m,S,y,1)},s.prototype._addRectangle=function(o,h,a,t,e,r,i,n,d,u){o[h]=a,o[h+1]=t,o[h+2]=e,o[h+3]=r,o[h+4]=i,o[h+5]=n,o[h+6]=d,o[h+7]=u},s.prototype._addRectangleFloat=function(o,h,a,t,e,r,i){o[h]=a,o[h+1]=t,o[h+2]=e,o[h+3]=r,o[h+4]=i[0],o[h+5]=i[1],o[h+6]=i[2],o[h+7]=i[3]},s.prototype._colorToFloat32Array=function(o){return new Float32Array([(o.rgba>>24&255)/255,(o.rgba>>16&255)/255,(o.rgba>>8&255)/255,(255&o.rgba)/255])},s}();c.RectangleRenderer=v},310:(w,c,_)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.RenderModel=c.COMBINED_CHAR_BIT_MASK=c.RENDER_MODEL_FG_OFFSET=c.RENDER_MODEL_BG_OFFSET=c.RENDER_MODEL_INDICIES_PER_CELL=void 0;var f=_(455);c.RENDER_MODEL_INDICIES_PER_CELL=3,c.RENDER_MODEL_BG_OFFSET=1,c.RENDER_MODEL_FG_OFFSET=2,c.COMBINED_CHAR_BIT_MASK=2147483648;var l=function(){function g(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection={hasSelection:!1,columnSelectMode:!1,viewportStartRow:0,viewportEndRow:0,viewportCappedStartRow:0,viewportCappedEndRow:0,startCol:0,endCol:0}}return g.prototype.resize=function(v,s){var o=v*s*c.RENDER_MODEL_INDICIES_PER_CELL;o!==this.cells.length&&(this.cells=new Uint32Array(o),this.lineLengths=new Uint32Array(s))},g.prototype.clear=function(){(0,f.fill)(this.cells,0,0),(0,f.fill)(this.lineLengths,0,0)},g.prototype.clearSelection=function(){this.selection.hasSelection=!1,this.selection.viewportStartRow=0,this.selection.viewportEndRow=0,this.selection.viewportCappedStartRow=0,this.selection.viewportCappedEndRow=0,this.selection.startCol=0,this.selection.endCol=0},g}();c.RenderModel=l},666:function(w,c,_){var f,l=this&&this.__extends||(f=function(y,b){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,M){C.__proto__=M}||function(C,M){for(var L in M)Object.prototype.hasOwnProperty.call(M,L)&&(C[L]=M[L])},f(y,b)},function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function C(){this.constructor=y}f(y,b),y.prototype=b===null?Object.create(b):(C.prototype=b.prototype,new C)}),g=this&&this.__values||function(y){var b=typeof Symbol=="function"&&Symbol.iterator,C=b&&y[b],M=0;if(C)return C.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&M>=y.length&&(y=void 0),{value:y&&y[M++],done:!y}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.JoinedCellData=c.WebglRenderer=void 0;var v=_(965),s=_(733),o=_(461),h=_(713),a=_(742),t=_(310),e=_(859),r=_(855),i=_(345),n=_(782),d=_(820),u=_(147),m=function(y){function b(C,M,L,R,E){var x=y.call(this)||this;x._terminal=C,x._colors=M,x._characterJoinerService=L,x._decorationService=R,x._model=new t.RenderModel,x._workCell=new n.CellData,x._workColors={fg:0,bg:0},x._onRequestRedraw=new i.EventEmitter,x._onContextLoss=new i.EventEmitter,x._core=x._terminal._core,x._renderLayers=[new s.LinkRenderLayer(x._core.screenElement,2,x._colors,x._core),new o.CursorRenderLayer(C,x._core.screenElement,3,x._colors,x._core,x._onRequestRedraw)],x.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},x._devicePixelRatio=window.devicePixelRatio,x._updateDimensions(),x._canvas=document.createElement("canvas");var A={antialias:!1,depth:!1,preserveDrawingBuffer:E};if(x._gl=x._canvas.getContext("webgl2",A),!x._gl)throw new Error("WebGL2 not supported "+x._gl);return x.register((0,d.addDisposableDomListener)(x._canvas,"webglcontextlost",function(T){x._onContextLoss.fire(T)})),x._core.screenElement.appendChild(x._canvas),x._rectangleRenderer=new a.RectangleRenderer(x._terminal,x._colors,x._gl,x.dimensions),x._glyphRenderer=new v.GlyphRenderer(x._terminal,x._colors,x._gl,x.dimensions),x.onCharSizeChanged(),x._isAttached=document.body.contains(x._core.screenElement),x}return l(b,y),Object.defineProperty(b.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onContextLoss",{get:function(){return this._onContextLoss.event},enumerable:!1,configurable:!0}),b.prototype.dispose=function(){var C,M,L;try{for(var R=g(this._renderLayers),E=R.next();!E.done;E=R.next())E.value.dispose()}catch(x){C={error:x}}finally{try{E&&!E.done&&(M=R.return)&&M.call(R)}finally{if(C)throw C.error}}(L=this._canvas.parentElement)===null||L===void 0||L.removeChild(this._canvas),y.prototype.dispose.call(this)},Object.defineProperty(b.prototype,"textureAtlas",{get:function(){var C;return(C=this._charAtlas)===null||C===void 0?void 0:C.cacheCanvas},enumerable:!1,configurable:!0}),b.prototype.setColors=function(C){var M,L;this._colors=C;try{for(var R=g(this._renderLayers),E=R.next();!E.done;E=R.next()){var x=E.value;x.setColors(this._terminal,this._colors),x.reset(this._terminal)}}catch(A){M={error:A}}finally{try{E&&!E.done&&(L=R.return)&&L.call(R)}finally{if(M)throw M.error}}this._rectangleRenderer.setColors(),this._glyphRenderer.setColors(),this._refreshCharAtlas(),this._model.clear()},b.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._terminal.cols,this._terminal.rows))},b.prototype.onResize=function(C,M){var L,R;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);try{for(var E=g(this._renderLayers),x=E.next();!x.done;x=E.next())x.value.resize(this._terminal,this.dimensions)}catch(A){L={error:A}}finally{try{x&&!x.done&&(R=E.return)&&R.call(E)}finally{if(L)throw L.error}}this._canvas.width=this.dimensions.scaledCanvasWidth,this._canvas.height=this.dimensions.scaledCanvasHeight,this._canvas.style.width=this.dimensions.canvasWidth+"px",this._canvas.style.height=this.dimensions.canvasHeight+"px",this._core.screenElement.style.width=this.dimensions.canvasWidth+"px",this._core.screenElement.style.height=this.dimensions.canvasHeight+"px",this._rectangleRenderer.onResize(),this._glyphRenderer.setDimensions(this.dimensions),this._glyphRenderer.onResize(),this._refreshCharAtlas(),this._model.clear()},b.prototype.onCharSizeChanged=function(){this.onResize(this._terminal.cols,this._terminal.rows)},b.prototype.onBlur=function(){var C,M;try{for(var L=g(this._renderLayers),R=L.next();!R.done;R=L.next())R.value.onBlur(this._terminal)}catch(E){C={error:E}}finally{try{R&&!R.done&&(M=L.return)&&M.call(L)}finally{if(C)throw C.error}}},b.prototype.onFocus=function(){var C,M;try{for(var L=g(this._renderLayers),R=L.next();!R.done;R=L.next())R.value.onFocus(this._terminal)}catch(E){C={error:E}}finally{try{R&&!R.done&&(M=L.return)&&M.call(L)}finally{if(C)throw C.error}}},b.prototype.onSelectionChanged=function(C,M,L){var R,E;try{for(var x=g(this._renderLayers),A=x.next();!A.done;A=x.next())A.value.onSelectionChanged(this._terminal,C,M,L)}catch(T){R={error:T}}finally{try{A&&!A.done&&(E=x.return)&&E.call(x)}finally{if(R)throw R.error}}this._updateSelectionModel(C,M,L),this._requestRedrawViewport()},b.prototype.onCursorMove=function(){var C,M;try{for(var L=g(this._renderLayers),R=L.next();!R.done;R=L.next())R.value.onCursorMove(this._terminal)}catch(E){C={error:E}}finally{try{R&&!R.done&&(M=L.return)&&M.call(L)}finally{if(C)throw C.error}}},b.prototype.onOptionsChanged=function(){var C,M;try{for(var L=g(this._renderLayers),R=L.next();!R.done;R=L.next())R.value.onOptionsChanged(this._terminal)}catch(E){C={error:E}}finally{try{R&&!R.done&&(M=L.return)&&M.call(L)}finally{if(C)throw C.error}}this._updateDimensions(),this._refreshCharAtlas()},b.prototype._refreshCharAtlas=function(){if(this.dimensions.scaledCharWidth<=0&&this.dimensions.scaledCharHeight<=0)this._isAttached=!1;else{var C=(0,h.acquireCharAtlas)(this._terminal,this._colors,this.dimensions.scaledCellWidth,this.dimensions.scaledCellHeight,this.dimensions.scaledCharWidth,this.dimensions.scaledCharHeight);if(!("getRasterizedGlyph"in C))throw new Error("The webgl renderer only works with the webgl char atlas");this._charAtlas=C,this._charAtlas.warmUp(),this._glyphRenderer.setAtlas(this._charAtlas)}},b.prototype.clearCharAtlas=function(){var C;(C=this._charAtlas)===null||C===void 0||C.clearTexture(),this._model.clear(),this._updateModel(0,this._terminal.rows-1),this._requestRedrawViewport()},b.prototype.clear=function(){var C,M;this._model.clear(),this._glyphRenderer.clear(!0);try{for(var L=g(this._renderLayers),R=L.next();!R.done;R=L.next())R.value.reset(this._terminal)}catch(E){C={error:E}}finally{try{R&&!R.done&&(M=L.return)&&M.call(L)}finally{if(C)throw C.error}}},b.prototype.registerCharacterJoiner=function(C){return-1},b.prototype.deregisterCharacterJoiner=function(C){return!1},b.prototype.renderRows=function(C,M){var L,R;if(!this._isAttached){if(!(document.body.contains(this._core.screenElement)&&this._core._charSizeService.width&&this._core._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}try{for(var E=g(this._renderLayers),x=E.next();!x.done;x=E.next())x.value.onGridChanged(this._terminal,C,M)}catch(A){L={error:A}}finally{try{x&&!x.done&&(R=E.return)&&R.call(E)}finally{if(L)throw L.error}}this._glyphRenderer.beginFrame()&&(this._model.clear(),this._updateSelectionModel(void 0,void 0)),this._updateModel(C,M),this._rectangleRenderer.render(),this._glyphRenderer.render(this._model)},b.prototype._updateModel=function(C,M){for(var L=this._core,R=this._workCell,E=C;E<=M;E++){var x=E+L.buffer.ydisp,A=L.buffer.lines.get(x);this._model.lineLengths[E]=0;for(var T=this._characterJoinerService.getJoinedCharacters(x),U=0;U<L.cols;U++){A.loadCell(U,R);var z=!1,W=U;if(T.length>0&&U===T[0][0]){z=!0;var K=T.shift();R=new S(R,A.translateToString(!0,K[0],K[1]),K[1]-K[0]),W=K[1]-1}var G=R.getChars(),k=R.getCode(),$=(E*L.cols+U)*t.RENDER_MODEL_INDICIES_PER_CELL;if(this._loadColorsForCell(U,x),k!==r.NULL_CELL_CODE&&(this._model.lineLengths[E]=U+1),(this._model.cells[$]!==k||this._model.cells[$+t.RENDER_MODEL_BG_OFFSET]!==this._workColors.bg||this._model.cells[$+t.RENDER_MODEL_FG_OFFSET]!==this._workColors.fg)&&(G.length>1&&(k|=t.COMBINED_CHAR_BIT_MASK),this._model.cells[$]=k,this._model.cells[$+t.RENDER_MODEL_BG_OFFSET]=this._workColors.bg,this._model.cells[$+t.RENDER_MODEL_FG_OFFSET]=this._workColors.fg,this._glyphRenderer.updateCell(U,E,k,this._workColors.bg,this._workColors.fg,G),z))for(R=this._workCell,U++;U<W;U++){var Y=(E*L.cols+U)*t.RENDER_MODEL_INDICIES_PER_CELL;this._glyphRenderer.updateCell(U,E,r.NULL_CELL_CODE,0,0,r.NULL_CELL_CHAR),this._model.cells[Y]=r.NULL_CELL_CODE,this._model.cells[Y+t.RENDER_MODEL_BG_OFFSET]=this._workColors.bg,this._model.cells[Y+t.RENDER_MODEL_FG_OFFSET]=this._workColors.fg}}}this._rectangleRenderer.updateBackgrounds(this._model)},b.prototype._loadColorsForCell=function(C,M){var L,R,E,x,A,T;this._workColors.bg=this._workCell.bg,this._workColors.fg=this._workCell.fg;try{for(var U=g(this._decorationService.getDecorationsAtCell(C,M,"bottom")),z=U.next();!z.done;z=U.next())(G=z.value).backgroundColorRGB&&(A=G.backgroundColorRGB.rgba>>8&16777215),G.foregroundColorRGB&&(T=G.foregroundColorRGB.rgba>>8&16777215)}catch(k){L={error:k}}finally{try{z&&!z.done&&(R=U.return)&&R.call(U)}finally{if(L)throw L.error}}this._isCellSelected(C,M)&&(A=this._colors.selectionOpaque.rgba>>8&16777215,this._colors.selectionForeground&&(T=this._colors.selectionForeground.rgba>>8&16777215));try{for(var W=g(this._decorationService.getDecorationsAtCell(C,M,"top")),K=W.next();!K.done;K=W.next()){var G;(G=K.value).backgroundColorRGB&&(A=G.backgroundColorRGB.rgba>>8&16777215),G.foregroundColorRGB&&(T=G.foregroundColorRGB.rgba>>8&16777215)}}catch(k){E={error:k}}finally{try{K&&!K.done&&(x=W.return)&&x.call(W)}finally{if(E)throw E.error}}A!==void 0&&(A=-16777216&this._workCell.bg|A|50331648),T!==void 0&&(T=-16777216&this._workCell.fg&-67108865|T|50331648),67108864&this._workColors.fg&&(A!==void 0&&T===void 0&&(T=(50331648&this._workColors.bg)==0?-134217728&this._workColors.fg|16777215&this._colors.background.rgba>>8|50331648:-134217728&this._workColors.fg|67108863&this._workColors.bg),A===void 0&&T!==void 0&&(A=(50331648&this._workColors.fg)==0?-67108864&this._workColors.bg|16777215&this._colors.foreground.rgba>>8|50331648:-67108864&this._workColors.bg|67108863&this._workColors.fg)),this._workColors.bg=A!=null?A:this._workColors.bg,this._workColors.fg=T!=null?T:this._workColors.fg},b.prototype._isCellSelected=function(C,M){return!!this._model.selection.hasSelection&&(M-=this._terminal.buffer.active.viewportY,this._model.selection.columnSelectMode?this._model.selection.startCol<=this._model.selection.endCol?C>=this._model.selection.startCol&&M>=this._model.selection.viewportCappedStartRow&&C<this._model.selection.endCol&&M<=this._model.selection.viewportCappedEndRow:C<this._model.selection.startCol&&M>=this._model.selection.viewportCappedStartRow&&C>=this._model.selection.endCol&&M<=this._model.selection.viewportCappedEndRow:M>this._model.selection.viewportStartRow&&M<this._model.selection.viewportEndRow||this._model.selection.viewportStartRow===this._model.selection.viewportEndRow&&M===this._model.selection.viewportStartRow&&C>=this._model.selection.startCol&&C<this._model.selection.endCol||this._model.selection.viewportStartRow<this._model.selection.viewportEndRow&&M===this._model.selection.viewportEndRow&&C<this._model.selection.endCol||this._model.selection.viewportStartRow<this._model.selection.viewportEndRow&&M===this._model.selection.viewportStartRow&&C>=this._model.selection.startCol)},b.prototype._updateSelectionModel=function(C,M,L){L===void 0&&(L=!1);var R=this._terminal;if(C&&M&&(C[0]!==M[0]||C[1]!==M[1])){var E=C[1]-R.buffer.active.viewportY,x=M[1]-R.buffer.active.viewportY,A=Math.max(E,0),T=Math.min(x,R.rows-1);A>=R.rows||T<0?this._model.clearSelection():(this._model.selection.hasSelection=!0,this._model.selection.columnSelectMode=L,this._model.selection.viewportStartRow=E,this._model.selection.viewportEndRow=x,this._model.selection.viewportCappedStartRow=A,this._model.selection.viewportCappedEndRow=T,this._model.selection.startCol=C[0],this._model.selection.endCol=M[0])}else this._model.clearSelection()},b.prototype._updateDimensions=function(){this._core._charSizeService.width&&this._core._charSizeService.height&&(this.dimensions.scaledCharWidth=Math.floor(this._core._charSizeService.width*this._devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._core._charSizeService.height*this._devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._terminal.options.lineHeight),this.dimensions.scaledCharTop=this._terminal.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._terminal.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._terminal.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._terminal.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._terminal.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/this._devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/this._devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.scaledCellHeight/this._devicePixelRatio,this.dimensions.actualCellWidth=this.dimensions.scaledCellWidth/this._devicePixelRatio)},b.prototype._requestRedrawViewport=function(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})},b}(e.Disposable);c.WebglRenderer=m;var S=function(y){function b(C,M,L){var R=y.call(this)||this;return R.content=0,R.combinedData="",R.fg=C.fg,R.bg=C.bg,R.combinedData=M,R._width=L,R}return l(b,y),b.prototype.isCombined=function(){return 2097152},b.prototype.getWidth=function(){return this._width},b.prototype.getChars=function(){return this.combinedData},b.prototype.getCode=function(){return 2097151},b.prototype.setFromCharData=function(C){throw new Error("not implemented")},b.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},b}(u.AttributeData);c.JoinedCellData=S},381:(w,c)=>{function _(l,g,v){var s=f(l.createShader(g));if(l.shaderSource(s,v),l.compileShader(s),l.getShaderParameter(s,l.COMPILE_STATUS))return s;console.error(l.getShaderInfoLog(s)),l.deleteShader(s)}function f(l){if(!l)throw new Error("value must not be falsy");return l}Object.defineProperty(c,"__esModule",{value:!0}),c.throwIfFalsy=c.expandFloat32Array=c.createShader=c.createProgram=c.PROJECTION_MATRIX=void 0,c.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),c.createProgram=function(l,g,v){var s=f(l.createProgram());if(l.attachShader(s,f(_(l,l.VERTEX_SHADER,g))),l.attachShader(s,f(_(l,l.FRAGMENT_SHADER,v))),l.linkProgram(s),l.getProgramParameter(s,l.LINK_STATUS))return s;console.error(l.getProgramInfoLog(s)),l.deleteProgram(s)},c.createShader=_,c.expandFloat32Array=function(l,g){for(var v=Math.min(2*l.length,g),s=new Float32Array(v),o=0;o<l.length;o++)s[o]=l[o];return s},c.throwIfFalsy=f},713:(w,c,_)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.removeTerminalFromCache=c.acquireCharAtlas=void 0;var f=_(433),l=_(167),g=[];c.acquireCharAtlas=function(v,s,o,h,a,t){for(var e=(0,f.generateConfig)(o,h,a,t,v,s),r=0;r<g.length;r++){var i=(n=g[r]).ownedBy.indexOf(v);if(i>=0){if((0,f.configEquals)(n.config,e))return n.atlas;n.ownedBy.length===1?(n.atlas.dispose(),g.splice(r,1)):n.ownedBy.splice(i,1);break}}for(r=0;r<g.length;r++){var n=g[r];if((0,f.configEquals)(n.config,e))return n.ownedBy.push(v),n.atlas}var d={atlas:new l.WebglCharAtlas(document,e),config:e,ownedBy:[v]};return g.push(d),d.atlas},c.removeTerminalFromCache=function(v){for(var s=0;s<g.length;s++){var o=g[s].ownedBy.indexOf(v);if(o!==-1){g[s].ownedBy.length===1?(g[s].atlas.dispose(),g.splice(s,1)):g[s].ownedBy.splice(o,1);break}}}},433:(w,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.is256Color=c.configEquals=c.generateConfig=void 0;var _={css:"",rgba:0};c.generateConfig=function(f,l,g,v,s,o){var h={foreground:o.foreground,background:o.background,cursor:_,cursorAccent:_,selectionTransparent:_,selectionOpaque:_,selectionForeground:_,ansi:o.ansi.slice(),contrastCache:o.contrastCache};return{customGlyphs:s.options.customGlyphs,devicePixelRatio:window.devicePixelRatio,letterSpacing:s.options.letterSpacing,lineHeight:s.options.lineHeight,scaledCellWidth:f,scaledCellHeight:l,scaledCharWidth:g,scaledCharHeight:v,fontFamily:s.options.fontFamily,fontSize:s.options.fontSize,fontWeight:s.options.fontWeight,fontWeightBold:s.options.fontWeightBold,allowTransparency:s.options.allowTransparency,drawBoldTextInBrightColors:s.options.drawBoldTextInBrightColors,minimumContrastRatio:s.options.minimumContrastRatio,colors:h}},c.configEquals=function(f,l){for(var g=0;g<f.colors.ansi.length;g++)if(f.colors.ansi[g].rgba!==l.colors.ansi[g].rgba)return!1;return f.devicePixelRatio===l.devicePixelRatio&&f.customGlyphs===l.customGlyphs&&f.lineHeight===l.lineHeight&&f.letterSpacing===l.letterSpacing&&f.fontFamily===l.fontFamily&&f.fontSize===l.fontSize&&f.fontWeight===l.fontWeight&&f.fontWeightBold===l.fontWeightBold&&f.allowTransparency===l.allowTransparency&&f.scaledCharWidth===l.scaledCharWidth&&f.scaledCharHeight===l.scaledCharHeight&&f.drawBoldTextInBrightColors===l.drawBoldTextInBrightColors&&f.minimumContrastRatio===l.minimumContrastRatio&&f.colors.foreground===l.colors.foreground&&f.colors.background===l.colors.background},c.is256Color=function(f){return(50331648&f)==16777216||(50331648&f)==33554432}},167:(w,c,_)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WebglCharAtlas=void 0;var f=_(499),l=_(855),g=_(381),v=_(147),s=_(160),o=_(14),h=_(634),a=1024,t=1024,e=Math.floor(819.2),r={css:"rgba(0, 0, 0, 0)",rgba:0},i={offset:{x:0,y:0},texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},n=function(){function m(S,y){this._config=y,this._didWarmUp=!1,this._cacheMap={},this._cacheMapCombined={},this._currentRowY=0,this._currentRowX=0,this._currentRowHeight=0,this.hasCanvasChanged=!1,this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new v.AttributeData,this.cacheCanvas=S.createElement("canvas"),this.cacheCanvas.width=a,this.cacheCanvas.height=t,this._cacheCtx=(0,g.throwIfFalsy)(this.cacheCanvas.getContext("2d",{alpha:!0})),this._tmpCanvas=S.createElement("canvas"),this._tmpCanvas.width=4*this._config.scaledCellWidth+4,this._tmpCanvas.height=this._config.scaledCellHeight+4,this._tmpCtx=(0,g.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency}))}return m.prototype.dispose=function(){this.cacheCanvas.parentElement&&this.cacheCanvas.parentElement.removeChild(this.cacheCanvas)},m.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},m.prototype._doWarmUp=function(){for(var S,y,b=33;b<126;b++){var C=this._drawToCache(b,l.DEFAULT_COLOR,l.DEFAULT_COLOR);this._cacheMap[b]=((S={})[l.DEFAULT_COLOR]=((y={})[l.DEFAULT_COLOR]=C,y),S)}},m.prototype.beginFrame=function(){return this._currentRowY>e&&(this.clearTexture(),this.warmUp(),!0)},m.prototype.clearTexture=function(){this._currentRowX===0&&this._currentRowY===0||(this._cacheCtx.clearRect(0,0,a,t),this._cacheMap={},this._cacheMapCombined={},this._currentRowHeight=0,this._currentRowX=0,this._currentRowY=0,this._didWarmUp=!1)},m.prototype.getRasterizedGlyphCombinedChar=function(S,y,b){var C,M=this._cacheMapCombined[S];M||(M={},this._cacheMapCombined[S]=M);var L=M[y];return L&&(C=L[b]),C||(C=this._drawToCache(S,y,b),M[y]||(M[y]={}),M[y][b]=C),C},m.prototype.getRasterizedGlyph=function(S,y,b){var C,M=this._cacheMap[S];M||(M={},this._cacheMap[S]=M);var L=M[y];return L&&(C=L[b]),C||(C=this._drawToCache(S,y,b),M[y]||(M[y]={}),M[y][b]=C),C},m.prototype._getColorFromAnsiIndex=function(S){if(S>=this._config.colors.ansi.length)throw new Error("No color found for idx "+S);return this._config.colors.ansi[S]},m.prototype._getBackgroundColor=function(S,y,b){if(this._config.allowTransparency)return r;switch(S){case 16777216:case 33554432:return this._getColorFromAnsiIndex(y);case 50331648:var C=v.AttributeData.toColorRGB(y);return{rgba:y<<8,css:"#"+u(C[0])+u(C[1])+u(C[2])};default:return b?this._config.colors.foreground:this._config.colors.background}},m.prototype._getForegroundCss=function(S,y,b,C,M,L,R,E,x){var A=this._getMinimumContrastCss(S,y,b,C,M,L,R,E,x);if(A)return A;switch(M){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&E&&L<8&&(L+=8),this._getColorFromAnsiIndex(L).css;case 50331648:var T=v.AttributeData.toColorRGB(L);return s.channels.toCss(T[0],T[1],T[2]);default:if(R){var U=this._config.colors.background.css;return U.length===9?U.slice(0,7):U}return this._config.colors.foreground.css}},m.prototype._resolveBackgroundRgba=function(S,y,b){switch(S){case 16777216:case 33554432:return this._getColorFromAnsiIndex(y).rgba;case 50331648:return y<<8;default:return b?this._config.colors.foreground.rgba:this._config.colors.background.rgba}},m.prototype._resolveForegroundRgba=function(S,y,b,C){switch(S){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&C&&y<8&&(y+=8),this._getColorFromAnsiIndex(y).rgba;case 50331648:return y<<8;default:return b?this._config.colors.background.rgba:this._config.colors.foreground.rgba}},m.prototype._getMinimumContrastCss=function(S,y,b,C,M,L,R,E,x){if(this._config.minimumContrastRatio!==1&&!x){var A=this._config.colors.contrastCache.getCss(S,C);if(A!==void 0)return A||void 0;var T=this._resolveBackgroundRgba(y,b,R),U=this._resolveForegroundRgba(M,L,R,E),z=s.rgba.ensureContrastRatio(T,U,this._config.minimumContrastRatio);if(z){var W=s.channels.toCss(z>>24&255,z>>16&255,z>>8&255);return this._config.colors.contrastCache.setCss(S,C,W),W}this._config.colors.contrastCache.setCss(S,C,null)}},m.prototype._drawToCache=function(S,y,b){var C=typeof S=="number"?String.fromCharCode(S):S;this.hasCanvasChanged=!0;var M=this._config.scaledCellWidth*Math.max(C.length,2)+4;this._tmpCanvas.width<M&&(this._tmpCanvas.width=M);var L=this._config.scaledCellHeight+4;if(this._tmpCanvas.height<L&&(this._tmpCanvas.height=L),this._tmpCtx.save(),this._workAttributeData.fg=b,this._workAttributeData.bg=y,this._workAttributeData.isInvisible())return i;var R=!!this._workAttributeData.isBold(),E=!!this._workAttributeData.isInverse(),x=!!this._workAttributeData.isDim(),A=!!this._workAttributeData.isItalic(),T=!!this._workAttributeData.isUnderline(),U=!!this._workAttributeData.isStrikethrough(),z=this._workAttributeData.getFgColor(),W=this._workAttributeData.getFgColorMode(),K=this._workAttributeData.getBgColor(),G=this._workAttributeData.getBgColorMode();if(E){var k=z;z=K,K=k;var $=W;W=G,G=$}var Y=this._getBackgroundColor(G,K,E);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=Y.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";var he=R?this._config.fontWeightBold:this._config.fontWeight,B=A?"italic":"";this._tmpCtx.font=B+" "+he+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=f.TEXT_BASELINE;var oe=C.length===1&&(0,h.isPowerlineGlyph)(C.charCodeAt(0));this._tmpCtx.fillStyle=this._getForegroundCss(y,G,K,b,W,z,E,R,(0,h.excludeFromContrastRatioDemands)(C.charCodeAt(0))),x&&(this._tmpCtx.globalAlpha=f.DIM_OPACITY);var V=oe?0:2,q=!1;if(this._config.customGlyphs!==!1&&(q=(0,o.tryDrawCustomChar)(this._tmpCtx,C,V,V,this._config.scaledCellWidth,this._config.scaledCellHeight)),q||this._tmpCtx.fillText(C,V,V+this._config.scaledCharHeight),C==="_"&&!this._config.allowTransparency){var O=d(this._tmpCtx.getImageData(V,V,this._config.scaledCellWidth,this._config.scaledCellHeight),Y);if(O)for(var D=1;D<=5&&(this._tmpCtx.clearRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.fillText(C,V,V+this._config.scaledCharHeight-D),O=d(this._tmpCtx.getImageData(V,V,this._config.scaledCellWidth,this._config.scaledCellHeight),Y));D++);}if(T||U){var N=Math.max(1,Math.floor(this._config.fontSize/10)),Z=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=N,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),T&&(this._tmpCtx.moveTo(V,V+this._config.scaledCharHeight-Z),this._tmpCtx.lineTo(V+this._config.scaledCharWidth,V+this._config.scaledCharHeight-Z)),U&&(this._tmpCtx.moveTo(V,V+Math.floor(this._config.scaledCharHeight/2)-Z),this._tmpCtx.lineTo(V+this._config.scaledCharWidth,V+Math.floor(this._config.scaledCharHeight/2)-Z)),this._tmpCtx.stroke(),this._tmpCtx.closePath()}this._tmpCtx.restore();var J=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);if(d(J,Y))return i;var Q=this._findGlyphBoundingBox(J,this._workBoundingBox,M,oe,q),fe=this._clipImageData(J,this._workBoundingBox);return this._currentRowX+Q.size.x>a&&(this._currentRowX=0,this._currentRowY+=this._currentRowHeight,this._currentRowHeight=0),Q.texturePosition.x=this._currentRowX,Q.texturePosition.y=this._currentRowY,Q.texturePositionClipSpace.x=this._currentRowX/a,Q.texturePositionClipSpace.y=this._currentRowY/t,this._currentRowHeight=Math.max(this._currentRowHeight,Q.size.y),this._currentRowX+=Q.size.x,this._cacheCtx.putImageData(fe,Q.texturePosition.x,Q.texturePosition.y),Q},m.prototype._findGlyphBoundingBox=function(S,y,b,C,M){y.top=0;for(var L=C?this._config.scaledCellHeight:this._tmpCanvas.height,R=C?this._config.scaledCharWidth:b,E=!1,x=0;x<L;x++){for(var A=0;A<R;A++){var T=x*this._tmpCanvas.width*4+4*A+3;if(S.data[T]!==0){y.top=x,E=!0;break}}if(E)break}for(y.left=0,E=!1,A=0;A<R;A++){for(x=0;x<L;x++)if(T=x*this._tmpCanvas.width*4+4*A+3,S.data[T]!==0){y.left=A,E=!0;break}if(E)break}for(y.right=R,E=!1,A=R-1;A>=0;A--){for(x=0;x<L;x++)if(T=x*this._tmpCanvas.width*4+4*A+3,S.data[T]!==0){y.right=A,E=!0;break}if(E)break}for(y.bottom=L,E=!1,x=L-1;x>=0;x--){for(A=0;A<R;A++)if(T=x*this._tmpCanvas.width*4+4*A+3,S.data[T]!==0){y.bottom=x,E=!0;break}if(E)break}return{texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:y.right-y.left+1,y:y.bottom-y.top+1},sizeClipSpace:{x:(y.right-y.left+1)/a,y:(y.bottom-y.top+1)/t},offset:{x:-y.left+(C?0:2)+(M?Math.floor(this._config.letterSpacing/2):0),y:-y.top+(C?0:2)+(M?this._config.lineHeight===1?0:Math.round((this._config.scaledCellHeight-this._config.scaledCharHeight)/2):0)}}},m.prototype._clipImageData=function(S,y){for(var b=y.right-y.left+1,C=y.bottom-y.top+1,M=new Uint8ClampedArray(b*C*4),L=y.top;L<=y.bottom;L++)for(var R=y.left;R<=y.right;R++){var E=L*this._tmpCanvas.width*4+4*R,x=(L-y.top)*b*4+4*(R-y.left);M[x]=S.data[E],M[x+1]=S.data[E+1],M[x+2]=S.data[E+2],M[x+3]=S.data[E+3]}return new ImageData(M,b,C)},m}();function d(m,S){for(var y=!0,b=S.rgba>>>24,C=S.rgba>>>16&255,M=S.rgba>>>8&255,L=0;L<m.data.length;L+=4)m.data[L]===b&&m.data[L+1]===C&&m.data[L+2]===M?m.data[L+3]=0:y=!1;return y}function u(m){var S=m.toString(16);return S.length<2?"0"+S:S}c.WebglCharAtlas=n},592:(w,c,_)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BaseRenderLayer=void 0;var f=_(713),l=_(499),g=_(381),v=function(){function s(o,h,a,t,e){this._container=o,this._alpha=t,this._colors=e,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+h+"-layer"),this._canvas.style.zIndex=a.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return s.prototype.dispose=function(){this._container.removeChild(this._canvas),this._charAtlas&&this._charAtlas.dispose()},s.prototype._initCanvas=function(){this._ctx=(0,g.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},s.prototype.onOptionsChanged=function(o){},s.prototype.onBlur=function(o){},s.prototype.onFocus=function(o){},s.prototype.onCursorMove=function(o){},s.prototype.onGridChanged=function(o,h,a){},s.prototype.onSelectionChanged=function(o,h,a,t){},s.prototype.setColors=function(o,h){this._refreshCharAtlas(o,h)},s.prototype._setTransparency=function(o,h){if(h!==this._alpha){var a=this._canvas;this._alpha=h,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,a),this._refreshCharAtlas(o,this._colors),this.onGridChanged(o,0,o.rows-1)}},s.prototype._refreshCharAtlas=function(o,h){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,f.acquireCharAtlas)(o,h,this._scaledCellWidth,this._scaledCellHeight,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},s.prototype.resize=function(o,h){this._scaledCellWidth=h.scaledCellWidth,this._scaledCellHeight=h.scaledCellHeight,this._scaledCharWidth=h.scaledCharWidth,this._scaledCharHeight=h.scaledCharHeight,this._scaledCharLeft=h.scaledCharLeft,this._scaledCharTop=h.scaledCharTop,this._canvas.width=h.scaledCanvasWidth,this._canvas.height=h.scaledCanvasHeight,this._canvas.style.width=h.canvasWidth+"px",this._canvas.style.height=h.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(o,this._colors)},s.prototype._fillCells=function(o,h,a,t){this._ctx.fillRect(o*this._scaledCellWidth,h*this._scaledCellHeight,a*this._scaledCellWidth,t*this._scaledCellHeight)},s.prototype._fillBottomLineAtCells=function(o,h,a){a===void 0&&(a=1),this._ctx.fillRect(o*this._scaledCellWidth,(h+1)*this._scaledCellHeight-window.devicePixelRatio-1,a*this._scaledCellWidth,window.devicePixelRatio)},s.prototype._fillLeftLineAtCell=function(o,h,a){this._ctx.fillRect(o*this._scaledCellWidth,h*this._scaledCellHeight,window.devicePixelRatio*a,this._scaledCellHeight)},s.prototype._strokeRectAtCell=function(o,h,a,t){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(o*this._scaledCellWidth+window.devicePixelRatio/2,h*this._scaledCellHeight+window.devicePixelRatio/2,a*this._scaledCellWidth-window.devicePixelRatio,t*this._scaledCellHeight-window.devicePixelRatio)},s.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},s.prototype._clearCells=function(o,h,a,t){this._alpha?this._ctx.clearRect(o*this._scaledCellWidth,h*this._scaledCellHeight,a*this._scaledCellWidth,t*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(o*this._scaledCellWidth,h*this._scaledCellHeight,a*this._scaledCellWidth,t*this._scaledCellHeight))},s.prototype._fillCharTrueColor=function(o,h,a,t){this._ctx.font=this._getFont(o,!1,!1),this._ctx.textBaseline=l.TEXT_BASELINE,this._clipRow(o,t),this._ctx.fillText(h.getChars(),a*this._scaledCellWidth+this._scaledCharLeft,t*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},s.prototype._clipRow=function(o,h){this._ctx.beginPath(),this._ctx.rect(0,h*this._scaledCellHeight,o.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},s.prototype._getFont=function(o,h,a){return(a?"italic":"")+" "+(h?o.options.fontWeightBold:o.options.fontWeight)+" "+o.options.fontSize*window.devicePixelRatio+"px "+o.options.fontFamily},s}();c.BaseRenderLayer=v},461:function(w,c,_){var f,l=this&&this.__extends||(f=function(t,e){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},f(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}f(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(c,"__esModule",{value:!0}),c.CursorRenderLayer=void 0;var g=_(592),v=_(782),s=600,o=function(t){function e(r,i,n,d,u,m){var S=t.call(this,i,"cursor",n,!0,d)||this;return S._terminal=u,S._onRequestRefreshRowsEvent=m,S._cell=new v.CellData,S._state={x:0,y:0,isFocused:!1,style:"",width:0},S._cursorRenderers={bar:S._renderBarCursor.bind(S),block:S._renderBlockCursor.bind(S),underline:S._renderUnderlineCursor.bind(S)},S.onOptionsChanged(r),S}return l(e,t),e.prototype.resize=function(r,i){t.prototype.resize.call(this,r,i),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},e.prototype.reset=function(r){var i;this._clearCursor(),(i=this._cursorBlinkStateManager)===null||i===void 0||i.restartBlinkAnimation(r),this.onOptionsChanged(r)},e.prototype.onBlur=function(r){var i;(i=this._cursorBlinkStateManager)===null||i===void 0||i.pause(),this._onRequestRefreshRowsEvent.fire({start:r.buffer.active.cursorY,end:r.buffer.active.cursorY})},e.prototype.onFocus=function(r){var i;(i=this._cursorBlinkStateManager)===null||i===void 0||i.resume(r),this._onRequestRefreshRowsEvent.fire({start:r.buffer.active.cursorY,end:r.buffer.active.cursorY})},e.prototype.onOptionsChanged=function(r){var i,n=this;r.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new h(r,function(){n._render(r,!0)})):((i=this._cursorBlinkStateManager)===null||i===void 0||i.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:r.buffer.active.cursorY,end:r.buffer.active.cursorY})},e.prototype.onCursorMove=function(r){var i;(i=this._cursorBlinkStateManager)===null||i===void 0||i.restartBlinkAnimation(r)},e.prototype.onGridChanged=function(r,i,n){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(r,!1):this._cursorBlinkStateManager.restartBlinkAnimation(r)},e.prototype._render=function(r,i){if(this._terminal.coreService.isCursorInitialized&&!this._terminal.coreService.isCursorHidden){var n=r.buffer.active.baseY+r.buffer.active.cursorY,d=n-r.buffer.active.viewportY,u=Math.min(r.buffer.active.cursorX,r.cols-1);if(d<0||d>=r.rows)this._clearCursor();else if(r._core.buffer.lines.get(n).loadCell(u,this._cell),this._cell.content!==void 0){if(!a(r)){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var m=r.options.cursorStyle;return m&&m!=="block"?this._cursorRenderers[m](r,u,d,this._cell):this._renderBlurCursor(r,u,d,this._cell),this._ctx.restore(),this._state.x=u,this._state.y=d,this._state.isFocused=!1,this._state.style=m,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===u&&this._state.y===d&&this._state.isFocused===a(r)&&this._state.style===r.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[r.options.cursorStyle||"block"](r,u,d,this._cell),this._ctx.restore(),this._state.x=u,this._state.y=d,this._state.isFocused=!1,this._state.style=r.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}else this._clearCursor()},e.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},e.prototype._renderBarCursor=function(r,i,n,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(i,n,r.options.cursorWidth),this._ctx.restore()},e.prototype._renderBlockCursor=function(r,i,n,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(i,n,d.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(r,d,i,n),this._ctx.restore()},e.prototype._renderUnderlineCursor=function(r,i,n,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(i,n),this._ctx.restore()},e.prototype._renderBlurCursor=function(r,i,n,d){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(i,n,d.getWidth(),1),this._ctx.restore()},e}(g.BaseRenderLayer);c.CursorRenderLayer=o;var h=function(){function t(e,r){this._renderCallback=r,this.isCursorVisible=!0,a(e)&&this._restartInterval()}return Object.defineProperty(t.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.restartBlinkAnimation=function(e){var r=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0})))},t.prototype._restartInterval=function(e){var r=this;e===void 0&&(e=s),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(r._animationTimeRestarted){var i=s-(Date.now()-r._animationTimeRestarted);if(r._animationTimeRestarted=void 0,i>0)return void r._restartInterval(i)}r.isCursorVisible=!1,r._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0}),r._blinkInterval=window.setInterval(function(){if(r._animationTimeRestarted){var n=s-(Date.now()-r._animationTimeRestarted);return r._animationTimeRestarted=void 0,void r._restartInterval(n)}r.isCursorVisible=!r.isCursorVisible,r._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0})},s)},e)},t.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.resume=function(e){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation(e)},t}();function a(t){return document.activeElement===t.textarea&&document.hasFocus()}},733:function(w,c,_){var f,l=this&&this.__extends||(f=function(h,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},f(h,a)},function(h,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function t(){this.constructor=h}f(h,a),h.prototype=a===null?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(c,"__esModule",{value:!0}),c.LinkRenderLayer=void 0;var g=_(592),v=_(499),s=_(433),o=function(h){function a(t,e,r,i){var n=h.call(this,t,"link",e,!0,r)||this;return i.linkifier.onShowLinkUnderline(function(d){return n._onShowLinkUnderline(d)}),i.linkifier.onHideLinkUnderline(function(d){return n._onHideLinkUnderline(d)}),i.linkifier2.onShowLinkUnderline(function(d){return n._onShowLinkUnderline(d)}),i.linkifier2.onHideLinkUnderline(function(d){return n._onHideLinkUnderline(d)}),n}return l(a,h),a.prototype.resize=function(t,e){h.prototype.resize.call(this,t,e),this._state=void 0},a.prototype.reset=function(t){this._clearCurrentLink()},a.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var t=this._state.y2-this._state.y1-1;t>0&&this._clearCells(0,this._state.y1+1,this._state.cols,t),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},a.prototype._onShowLinkUnderline=function(t){if(t.fg===v.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:t.fg!==void 0&&(0,s.is256Color)(t.fg)?this._ctx.fillStyle=this._colors.ansi[t.fg].css:this._ctx.fillStyle=this._colors.foreground.css,t.y1===t.y2)this._fillBottomLineAtCells(t.x1,t.y1,t.x2-t.x1);else{this._fillBottomLineAtCells(t.x1,t.y1,t.cols-t.x1);for(var e=t.y1+1;e<t.y2;e++)this._fillBottomLineAtCells(0,e,t.cols);this._fillBottomLineAtCells(0,t.y2,t.x2)}this._state=t},a.prototype._onHideLinkUnderline=function(t){this._clearCurrentLink()},a}(g.BaseRenderLayer);c.LinkRenderLayer=o},820:(w,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.addDisposableDomListener=void 0,c.addDisposableDomListener=function(_,f,l,g){_.addEventListener(f,l,g);var v=!1;return{dispose:function(){v||(v=!0,_.removeEventListener(f,l,g))}}}},14:function(w,c,_){var f,l,g,v,s,o,h,a,t,e,r,i,n,d,u,m,S,y,b,C,M,L,R,E,x,A,T,U,z,W,K,G,k,$,Y,he,B,oe,V,q,O,D,N,Z,J,Q,fe,Ce,be,X,Se,Ae,He,Ue,Ut,Nt,qt,zt,Gt,Kt,It,Ht,Ne,qe,ze,Ge,Ke,Ve,Xe,Ye,Ze,Je,$e,Qe,et,tt,rt,it,nt,ot,st,at,ct,lt,ht,ut,ft,dt,_t,pt,vt,gt,yt,mt,Ct,bt,St,wt,Lt,xt,Et,Rt,Mt,At,kt,Ot,Dt,Tt,Bt,Pt,Ft,jt,Vt,Xt,Yt,Zt,Jt,$t,Qt,er,tr,rr,ir,nr,or,sr,lr,ar,hr=this&&this.__read||function(P,I){var le=typeof Symbol=="function"&&P[Symbol.iterator];if(!le)return P;var de,se,pe=le.call(P),ae=[];try{for(;(I===void 0||I-- >0)&&!(de=pe.next()).done;)ae.push(de.value)}catch(ke){se={error:ke}}finally{try{de&&!de.done&&(le=pe.return)&&le.call(pe)}finally{if(se)throw se.error}}return ae},ur=this&&this.__values||function(P){var I=typeof Symbol=="function"&&Symbol.iterator,le=I&&P[I],de=0;if(le)return le.call(P);if(P&&typeof P.length=="number")return{next:function(){return P&&de>=P.length&&(P=void 0),{value:P&&P[de++],done:!P}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.tryDrawCustomChar=c.powerlineDefinitions=c.boxDrawingDefinitions=c.blockElementDefinitions=void 0;var fr=_(634);c.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var vr={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};c.boxDrawingDefinitions={"\u2500":(f={},f[1]="M0,.5 L1,.5",f),"\u2501":(l={},l[3]="M0,.5 L1,.5",l),"\u2502":(g={},g[1]="M.5,0 L.5,1",g),"\u2503":(v={},v[3]="M.5,0 L.5,1",v),"\u250C":(s={},s[1]="M0.5,1 L.5,.5 L1,.5",s),"\u250F":(o={},o[3]="M0.5,1 L.5,.5 L1,.5",o),"\u2510":(h={},h[1]="M0,.5 L.5,.5 L.5,1",h),"\u2513":(a={},a[3]="M0,.5 L.5,.5 L.5,1",a),"\u2514":(t={},t[1]="M.5,0 L.5,.5 L1,.5",t),"\u2517":(e={},e[3]="M.5,0 L.5,.5 L1,.5",e),"\u2518":(r={},r[1]="M.5,0 L.5,.5 L0,.5",r),"\u251B":(i={},i[3]="M.5,0 L.5,.5 L0,.5",i),"\u251C":(n={},n[1]="M.5,0 L.5,1 M.5,.5 L1,.5",n),"\u2523":(d={},d[3]="M.5,0 L.5,1 M.5,.5 L1,.5",d),"\u2524":(u={},u[1]="M.5,0 L.5,1 M.5,.5 L0,.5",u),"\u252B":(m={},m[3]="M.5,0 L.5,1 M.5,.5 L0,.5",m),"\u252C":(S={},S[1]="M0,.5 L1,.5 M.5,.5 L.5,1",S),"\u2533":(y={},y[3]="M0,.5 L1,.5 M.5,.5 L.5,1",y),"\u2534":(b={},b[1]="M0,.5 L1,.5 M.5,.5 L.5,0",b),"\u253B":(C={},C[3]="M0,.5 L1,.5 M.5,.5 L.5,0",C),"\u253C":(M={},M[1]="M0,.5 L1,.5 M.5,0 L.5,1",M),"\u254B":(L={},L[3]="M0,.5 L1,.5 M.5,0 L.5,1",L),"\u2574":(R={},R[1]="M.5,.5 L0,.5",R),"\u2578":(E={},E[3]="M.5,.5 L0,.5",E),"\u2575":(x={},x[1]="M.5,.5 L.5,0",x),"\u2579":(A={},A[3]="M.5,.5 L.5,0",A),"\u2576":(T={},T[1]="M.5,.5 L1,.5",T),"\u257A":(U={},U[3]="M.5,.5 L1,.5",U),"\u2577":(z={},z[1]="M.5,.5 L.5,1",z),"\u257B":(W={},W[3]="M.5,.5 L.5,1",W),"\u2550":(K={},K[1]=function(P,I){return"M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L1,"+(.5+I)},K),"\u2551":(G={},G[1]=function(P,I){return"M"+(.5-P)+",0 L"+(.5-P)+",1 M"+(.5+P)+",0 L"+(.5+P)+",1"},G),"\u2552":(k={},k[1]=function(P,I){return"M.5,1 L.5,"+(.5-I)+" L1,"+(.5-I)+" M.5,"+(.5+I)+" L1,"+(.5+I)},k),"\u2553":($={},$[1]=function(P,I){return"M"+(.5-P)+",1 L"+(.5-P)+",.5 L1,.5 M"+(.5+P)+",.5 L"+(.5+P)+",1"},$),"\u2554":(Y={},Y[1]=function(P,I){return"M1,"+(.5-I)+" L"+(.5-P)+","+(.5-I)+" L"+(.5-P)+",1 M1,"+(.5+I)+" L"+(.5+P)+","+(.5+I)+" L"+(.5+P)+",1"},Y),"\u2555":(he={},he[1]=function(P,I){return"M0,"+(.5-I)+" L.5,"+(.5-I)+" L.5,1 M0,"+(.5+I)+" L.5,"+(.5+I)},he),"\u2556":(B={},B[1]=function(P,I){return"M"+(.5+P)+",1 L"+(.5+P)+",.5 L0,.5 M"+(.5-P)+",.5 L"+(.5-P)+",1"},B),"\u2557":(oe={},oe[1]=function(P,I){return"M0,"+(.5+I)+" L"+(.5-P)+","+(.5+I)+" L"+(.5-P)+",1 M0,"+(.5-I)+" L"+(.5+P)+","+(.5-I)+" L"+(.5+P)+",1"},oe),"\u2558":(V={},V[1]=function(P,I){return"M.5,0 L.5,"+(.5+I)+" L1,"+(.5+I)+" M.5,"+(.5-I)+" L1,"+(.5-I)},V),"\u2559":(q={},q[1]=function(P,I){return"M1,.5 L"+(.5-P)+",.5 L"+(.5-P)+",0 M"+(.5+P)+",.5 L"+(.5+P)+",0"},q),"\u255A":(O={},O[1]=function(P,I){return"M1,"+(.5-I)+" L"+(.5+P)+","+(.5-I)+" L"+(.5+P)+",0 M1,"+(.5+I)+" L"+(.5-P)+","+(.5+I)+" L"+(.5-P)+",0"},O),"\u255B":(D={},D[1]=function(P,I){return"M0,"+(.5+I)+" L.5,"+(.5+I)+" L.5,0 M0,"+(.5-I)+" L.5,"+(.5-I)},D),"\u255C":(N={},N[1]=function(P,I){return"M0,.5 L"+(.5+P)+",.5 L"+(.5+P)+",0 M"+(.5-P)+",.5 L"+(.5-P)+",0"},N),"\u255D":(Z={},Z[1]=function(P,I){return"M0,"+(.5-I)+" L"+(.5-P)+","+(.5-I)+" L"+(.5-P)+",0 M0,"+(.5+I)+" L"+(.5+P)+","+(.5+I)+" L"+(.5+P)+",0"},Z),"\u255E":(J={},J[1]=function(P,I){return"M.5,0 L.5,1 M.5,"+(.5-I)+" L1,"+(.5-I)+" M.5,"+(.5+I)+" L1,"+(.5+I)},J),"\u255F":(Q={},Q[1]=function(P,I){return"M"+(.5-P)+",0 L"+(.5-P)+",1 M"+(.5+P)+",0 L"+(.5+P)+",1 M"+(.5+P)+",.5 L1,.5"},Q),"\u2560":(fe={},fe[1]=function(P,I){return"M"+(.5-P)+",0 L"+(.5-P)+",1 M1,"+(.5+I)+" L"+(.5+P)+","+(.5+I)+" L"+(.5+P)+",1 M1,"+(.5-I)+" L"+(.5+P)+","+(.5-I)+" L"+(.5+P)+",0"},fe),"\u2561":(Ce={},Ce[1]=function(P,I){return"M.5,0 L.5,1 M0,"+(.5-I)+" L.5,"+(.5-I)+" M0,"+(.5+I)+" L.5,"+(.5+I)},Ce),"\u2562":(be={},be[1]=function(P,I){return"M0,.5 L"+(.5-P)+",.5 M"+(.5-P)+",0 L"+(.5-P)+",1 M"+(.5+P)+",0 L"+(.5+P)+",1"},be),"\u2563":(X={},X[1]=function(P,I){return"M"+(.5+P)+",0 L"+(.5+P)+",1 M0,"+(.5+I)+" L"+(.5-P)+","+(.5+I)+" L"+(.5-P)+",1 M0,"+(.5-I)+" L"+(.5-P)+","+(.5-I)+" L"+(.5-P)+",0"},X),"\u2564":(Se={},Se[1]=function(P,I){return"M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L1,"+(.5+I)+" M.5,"+(.5+I)+" L.5,1"},Se),"\u2565":(Ae={},Ae[1]=function(P,I){return"M0,.5 L1,.5 M"+(.5-P)+",.5 L"+(.5-P)+",1 M"+(.5+P)+",.5 L"+(.5+P)+",1"},Ae),"\u2566":(He={},He[1]=function(P,I){return"M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L"+(.5-P)+","+(.5+I)+" L"+(.5-P)+",1 M1,"+(.5+I)+" L"+(.5+P)+","+(.5+I)+" L"+(.5+P)+",1"},He),"\u2567":(Ue={},Ue[1]=function(P,I){return"M.5,0 L.5,"+(.5-I)+" M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L1,"+(.5+I)},Ue),"\u2568":(Ut={},Ut[1]=function(P,I){return"M0,.5 L1,.5 M"+(.5-P)+",.5 L"+(.5-P)+",0 M"+(.5+P)+",.5 L"+(.5+P)+",0"},Ut),"\u2569":(Nt={},Nt[1]=function(P,I){return"M0,"+(.5+I)+" L1,"+(.5+I)+" M0,"+(.5-I)+" L"+(.5-P)+","+(.5-I)+" L"+(.5-P)+",0 M1,"+(.5-I)+" L"+(.5+P)+","+(.5-I)+" L"+(.5+P)+",0"},Nt),"\u256A":(qt={},qt[1]=function(P,I){return"M.5,0 L.5,1 M0,"+(.5-I)+" L1,"+(.5-I)+" M0,"+(.5+I)+" L1,"+(.5+I)},qt),"\u256B":(zt={},zt[1]=function(P,I){return"M0,.5 L1,.5 M"+(.5-P)+",0 L"+(.5-P)+",1 M"+(.5+P)+",0 L"+(.5+P)+",1"},zt),"\u256C":(Gt={},Gt[1]=function(P,I){return"M0,"+(.5+I)+" L"+(.5-P)+","+(.5+I)+" L"+(.5-P)+",1 M1,"+(.5+I)+" L"+(.5+P)+","+(.5+I)+" L"+(.5+P)+",1 M0,"+(.5-I)+" L"+(.5-P)+","+(.5-I)+" L"+(.5-P)+",0 M1,"+(.5-I)+" L"+(.5+P)+","+(.5-I)+" L"+(.5+P)+",0"},Gt),"\u2571":(Kt={},Kt[1]="M1,0 L0,1",Kt),"\u2572":(It={},It[1]="M0,0 L1,1",It),"\u2573":(Ht={},Ht[1]="M1,0 L0,1 M0,0 L1,1",Ht),"\u257C":(Ne={},Ne[1]="M.5,.5 L0,.5",Ne[3]="M.5,.5 L1,.5",Ne),"\u257D":(qe={},qe[1]="M.5,.5 L.5,0",qe[3]="M.5,.5 L.5,1",qe),"\u257E":(ze={},ze[1]="M.5,.5 L1,.5",ze[3]="M.5,.5 L0,.5",ze),"\u257F":(Ge={},Ge[1]="M.5,.5 L.5,1",Ge[3]="M.5,.5 L.5,0",Ge),"\u250D":(Ke={},Ke[1]="M.5,.5 L.5,1",Ke[3]="M.5,.5 L1,.5",Ke),"\u250E":(Ve={},Ve[1]="M.5,.5 L1,.5",Ve[3]="M.5,.5 L.5,1",Ve),"\u2511":(Xe={},Xe[1]="M.5,.5 L.5,1",Xe[3]="M.5,.5 L0,.5",Xe),"\u2512":(Ye={},Ye[1]="M.5,.5 L0,.5",Ye[3]="M.5,.5 L.5,1",Ye),"\u2515":(Ze={},Ze[1]="M.5,.5 L.5,0",Ze[3]="M.5,.5 L1,.5",Ze),"\u2516":(Je={},Je[1]="M.5,.5 L1,.5",Je[3]="M.5,.5 L.5,0",Je),"\u2519":($e={},$e[1]="M.5,.5 L.5,0",$e[3]="M.5,.5 L0,.5",$e),"\u251A":(Qe={},Qe[1]="M.5,.5 L0,.5",Qe[3]="M.5,.5 L.5,0",Qe),"\u251D":(et={},et[1]="M.5,0 L.5,1",et[3]="M.5,.5 L1,.5",et),"\u251E":(tt={},tt[1]="M0.5,1 L.5,.5 L1,.5",tt[3]="M.5,.5 L.5,0",tt),"\u251F":(rt={},rt[1]="M.5,0 L.5,.5 L1,.5",rt[3]="M.5,.5 L.5,1",rt),"\u2520":(it={},it[1]="M.5,.5 L1,.5",it[3]="M.5,0 L.5,1",it),"\u2521":(nt={},nt[1]="M.5,.5 L.5,1",nt[3]="M.5,0 L.5,.5 L1,.5",nt),"\u2522":(ot={},ot[1]="M.5,.5 L.5,0",ot[3]="M0.5,1 L.5,.5 L1,.5",ot),"\u2525":(st={},st[1]="M.5,0 L.5,1",st[3]="M.5,.5 L0,.5",st),"\u2526":(at={},at[1]="M0,.5 L.5,.5 L.5,1",at[3]="M.5,.5 L.5,0",at),"\u2527":(ct={},ct[1]="M.5,0 L.5,.5 L0,.5",ct[3]="M.5,.5 L.5,1",ct),"\u2528":(lt={},lt[1]="M.5,.5 L0,.5",lt[3]="M.5,0 L.5,1",lt),"\u2529":(ht={},ht[1]="M.5,.5 L.5,1",ht[3]="M.5,0 L.5,.5 L0,.5",ht),"\u252A":(ut={},ut[1]="M.5,.5 L.5,0",ut[3]="M0,.5 L.5,.5 L.5,1",ut),"\u252D":(ft={},ft[1]="M0.5,1 L.5,.5 L1,.5",ft[3]="M.5,.5 L0,.5",ft),"\u252E":(dt={},dt[1]="M0,.5 L.5,.5 L.5,1",dt[3]="M.5,.5 L1,.5",dt),"\u252F":(_t={},_t[1]="M.5,.5 L.5,1",_t[3]="M0,.5 L1,.5",_t),"\u2530":(pt={},pt[1]="M0,.5 L1,.5",pt[3]="M.5,.5 L.5,1",pt),"\u2531":(vt={},vt[1]="M.5,.5 L1,.5",vt[3]="M0,.5 L.5,.5 L.5,1",vt),"\u2532":(gt={},gt[1]="M.5,.5 L0,.5",gt[3]="M0.5,1 L.5,.5 L1,.5",gt),"\u2535":(yt={},yt[1]="M.5,0 L.5,.5 L1,.5",yt[3]="M.5,.5 L0,.5",yt),"\u2536":(mt={},mt[1]="M.5,0 L.5,.5 L0,.5",mt[3]="M.5,.5 L1,.5",mt),"\u2537":(Ct={},Ct[1]="M.5,.5 L.5,0",Ct[3]="M0,.5 L1,.5",Ct),"\u2538":(bt={},bt[1]="M0,.5 L1,.5",bt[3]="M.5,.5 L.5,0",bt),"\u2539":(St={},St[1]="M.5,.5 L1,.5",St[3]="M.5,0 L.5,.5 L0,.5",St),"\u253A":(wt={},wt[1]="M.5,.5 L0,.5",wt[3]="M.5,0 L.5,.5 L1,.5",wt),"\u253D":(Lt={},Lt[1]="M.5,0 L.5,1 M.5,.5 L1,.5",Lt[3]="M.5,.5 L0,.5",Lt),"\u253E":(xt={},xt[1]="M.5,0 L.5,1 M.5,.5 L0,.5",xt[3]="M.5,.5 L1,.5",xt),"\u253F":(Et={},Et[1]="M.5,0 L.5,1",Et[3]="M0,.5 L1,.5",Et),"\u2540":(Rt={},Rt[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Rt[3]="M.5,.5 L.5,0",Rt),"\u2541":(Mt={},Mt[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Mt[3]="M.5,.5 L.5,1",Mt),"\u2542":(At={},At[1]="M0,.5 L1,.5",At[3]="M.5,0 L.5,1",At),"\u2543":(kt={},kt[1]="M0.5,1 L.5,.5 L1,.5",kt[3]="M.5,0 L.5,.5 L0,.5",kt),"\u2544":(Ot={},Ot[1]="M0,.5 L.5,.5 L.5,1",Ot[3]="M.5,0 L.5,.5 L1,.5",Ot),"\u2545":(Dt={},Dt[1]="M.5,0 L.5,.5 L1,.5",Dt[3]="M0,.5 L.5,.5 L.5,1",Dt),"\u2546":(Tt={},Tt[1]="M.5,0 L.5,.5 L0,.5",Tt[3]="M0.5,1 L.5,.5 L1,.5",Tt),"\u2547":(Bt={},Bt[1]="M.5,.5 L.5,1",Bt[3]="M.5,.5 L.5,0 M0,.5 L1,.5",Bt),"\u2548":(Pt={},Pt[1]="M.5,.5 L.5,0",Pt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",Pt),"\u2549":(Ft={},Ft[1]="M.5,.5 L1,.5",Ft[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Ft),"\u254A":(jt={},jt[1]="M.5,.5 L0,.5",jt[3]="M.5,0 L.5,1 M.5,.5 L1,.5",jt),"\u254C":(Vt={},Vt[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Vt),"\u254D":(Xt={},Xt[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Xt),"\u2504":(Yt={},Yt[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Yt),"\u2505":(Zt={},Zt[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Zt),"\u2508":(Jt={},Jt[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Jt),"\u2509":($t={},$t[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",$t),"\u254E":(Qt={},Qt[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Qt),"\u254F":(er={},er[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",er),"\u2506":(tr={},tr[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",tr),"\u2507":(rr={},rr[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",rr),"\u250A":(ir={},ir[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",ir),"\u250B":(nr={},nr[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",nr),"\u256D":(or={},or[1]="C.5,1,.5,.5,1,.5",or),"\u256E":(sr={},sr[1]="C.5,1,.5,.5,0,.5",sr),"\u256F":(lr={},lr[1]="C.5,0,.5,.5,0,.5",lr),"\u2570":(ar={},ar[1]="C.5,0,.5,.5,1,.5",ar)},c.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0},"\uE0B1":{d:"M0,0 L1,.5 L0,1",type:1,horizontalPadding:.5},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0},"\uE0B3":{d:"M1,0 L0,.5 L1,1",type:1,horizontalPadding:.5}},c.tryDrawCustomChar=function(P,I,le,de,se,pe){var ae=c.blockElementDefinitions[I];if(ae)return function(ce,we,De,Te,ge,ye){for(var ee=0;ee<we.length;ee++){var ne=we[ee],te=ge/8,ue=ye/8;ce.fillRect(De+ne.x*te,Te+ne.y*ue,ne.w*te,ne.h*ue)}}(P,ae,le,de,se,pe),!0;var ke=vr[I];if(ke)return function(ce,we,De,Te,ge,ye){var ee,ne=dr.get(we);ne||(ne=new Map,dr.set(we,ne));var te=ce.fillStyle;if(typeof te!="string")throw new Error('Unexpected fillStyle type "'+te+'"');var ue=ne.get(te);if(!ue){var ve=we[0].length,Ee=we.length,Le=document.createElement("canvas");Le.width=ve,Le.height=Ee;var Fe=(0,fr.throwIfFalsy)(Le.getContext("2d")),Re=new ImageData(ve,Ee),Be=void 0,Ie=void 0,Me=void 0,Oe=void 0;if(te.startsWith("#"))Be=parseInt(te.slice(1,3),16),Ie=parseInt(te.slice(3,5),16),Me=parseInt(te.slice(5,7),16),Oe=te.length>7&&parseInt(te.slice(7,9),16)||1;else{if(!te.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+te+'" when drawing pattern glyph');Be=(ee=hr(te.substring(5,te.length-1).split(",").map(function(pr){return parseFloat(pr)}),4))[0],Ie=ee[1],Me=ee[2],Oe=ee[3]}for(var Pe=0;Pe<Ee;Pe++)for(var je=0;je<ve;je++)Re.data[4*(Pe*ve+je)]=Be,Re.data[4*(Pe*ve+je)+1]=Ie,Re.data[4*(Pe*ve+je)+2]=Me,Re.data[4*(Pe*ve+je)+3]=we[Pe][je]*(255*Oe);Fe.putImageData(Re,0,0),ue=(0,fr.throwIfFalsy)(ce.createPattern(Le,null)),ne.set(te,ue)}ce.fillStyle=ue,ce.fillRect(De,Te,ge,ye)}(P,ke,le,de,se,pe),!0;var ie=c.boxDrawingDefinitions[I];if(ie)return function(ce,we,De,Te,ge,ye){var ee,ne,te,ue;ce.strokeStyle=ce.fillStyle;try{for(var ve=ur(Object.entries(we)),Ee=ve.next();!Ee.done;Ee=ve.next()){var Le=hr(Ee.value,2),Fe=Le[0],Re=Le[1];ce.beginPath(),ce.lineWidth=window.devicePixelRatio*Number.parseInt(Fe);var Be=void 0;Be=typeof Re=="function"?Re(.15,.15/ye*ge):Re;try{for(var Ie=(te=void 0,ur(Be.split(" "))),Me=Ie.next();!Me.done;Me=Ie.next()){var Oe=Me.value,Pe=Oe[0],je=F[Pe];if(je){var pr=Oe.substring(1).split(",");pr[0]&&pr[1]&&je(ce,j(pr,ge,ye,De,Te))}else console.error('Could not find drawing instructions for "'+Pe+'"')}}catch(yr){te={error:yr}}finally{try{Me&&!Me.done&&(ue=Ie.return)&&ue.call(Ie)}finally{if(te)throw te.error}}ce.stroke(),ce.closePath()}}catch(yr){ee={error:yr}}finally{try{Ee&&!Ee.done&&(ne=ve.return)&&ne.call(ve)}finally{if(ee)throw ee.error}}}(P,ie,le,de,se,pe),!0;var xe=c.powerlineDefinitions[I];return!!xe&&(function(ce,we,De,Te,ge,ye){var ee,ne;ce.beginPath(),ce.lineWidth=window.devicePixelRatio;try{for(var te=ur(we.d.split(" ")),ue=te.next();!ue.done;ue=te.next()){var ve=ue.value,Ee=ve[0],Le=F[Ee];if(Le){var Fe=ve.substring(1).split(",");Fe[0]&&Fe[1]&&Le(ce,j(Fe,ge,ye,De,Te,we.horizontalPadding))}else console.error('Could not find drawing instructions for "'+Ee+'"')}}catch(Re){ee={error:Re}}finally{try{ue&&!ue.done&&(ne=te.return)&&ne.call(te)}finally{if(ee)throw ee.error}}we.type===1?(ce.strokeStyle=ce.fillStyle,ce.stroke()):ce.fill(),ce.closePath()}(P,xe,le,de,se,pe),!0)};var dr=new Map;function _r(P,I,le){return le===void 0&&(le=0),Math.max(Math.min(P,I),le)}var F={C:function(P,I){return P.bezierCurveTo(I[0],I[1],I[2],I[3],I[4],I[5])},L:function(P,I){return P.lineTo(I[0],I[1])},M:function(P,I){return P.moveTo(I[0],I[1])}};function j(P,I,le,de,se,pe){pe===void 0&&(pe=0);var ae=P.map(function(xe){return parseFloat(xe)||parseInt(xe)});if(ae.length<2)throw new Error("Too few arguments for instruction");for(var ke=0;ke<ae.length;ke+=2)ae[ke]*=I-2*pe*window.devicePixelRatio,ae[ke]!==0&&(ae[ke]=_r(Math.round(ae[ke]+.5)-.5,I,0)),ae[ke]+=de+pe*window.devicePixelRatio;for(var ie=1;ie<ae.length;ie+=2)ae[ie]*=le,ae[ie]!==0&&(ae[ie]=_r(Math.round(ae[ie]+.5)-.5,le,0)),ae[ie]+=se;return ae}},634:(w,c)=>{function _(f){return 57508<=f&&f<=57558}Object.defineProperty(c,"__esModule",{value:!0}),c.excludeFromContrastRatioDemands=c.isPowerlineGlyph=c.throwIfFalsy=void 0,c.throwIfFalsy=function(f){if(!f)throw new Error("value must not be falsy");return f},c.isPowerlineGlyph=_,c.excludeFromContrastRatioDemands=function(f){return _(f)||function(l){return 9472<=l&&l<=9631}(f)}},499:(w,c,_)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.CHAR_ATLAS_CELL_SPACING=c.TEXT_BASELINE=c.DIM_OPACITY=c.INVERTED_DEFAULT_COLOR=void 0;var f=_(399);c.INVERTED_DEFAULT_COLOR=257,c.DIM_OPACITY=.5,c.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic",c.CHAR_ATLAS_CELL_SPACING=1},160:function(w,c){var _,f,l,g,v=this&&this.__read||function(h,a){var t=typeof Symbol=="function"&&h[Symbol.iterator];if(!t)return h;var e,r,i=t.call(h),n=[];try{for(;(a===void 0||a-- >0)&&!(e=i.next()).done;)n.push(e.value)}catch(d){r={error:d}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return n};function s(h){var a=h.toString(16);return a.length<2?"0"+a:a}function o(h,a){return h<a?(a+.05)/(h+.05):(h+.05)/(a+.05)}Object.defineProperty(c,"__esModule",{value:!0}),c.contrastRatio=c.toPaddedHex=c.rgba=c.rgb=c.css=c.color=c.channels=void 0,function(h){h.toCss=function(a,t,e,r){return r!==void 0?"#"+s(a)+s(t)+s(e)+s(r):"#"+s(a)+s(t)+s(e)},h.toRgba=function(a,t,e,r){return r===void 0&&(r=255),(a<<24|t<<16|e<<8|r)>>>0}}(_=c.channels||(c.channels={})),(f=c.color||(c.color={})).blend=function(h,a){var t=(255&a.rgba)/255;if(t===1)return{css:a.css,rgba:a.rgba};var e=a.rgba>>24&255,r=a.rgba>>16&255,i=a.rgba>>8&255,n=h.rgba>>24&255,d=h.rgba>>16&255,u=h.rgba>>8&255,m=n+Math.round((e-n)*t),S=d+Math.round((r-d)*t),y=u+Math.round((i-u)*t);return{css:_.toCss(m,S,y),rgba:_.toRgba(m,S,y)}},f.isOpaque=function(h){return(255&h.rgba)==255},f.ensureContrastRatio=function(h,a,t){var e=g.ensureContrastRatio(h.rgba,a.rgba,t);if(e)return g.toColor(e>>24&255,e>>16&255,e>>8&255)},f.opaque=function(h){var a=(255|h.rgba)>>>0,t=v(g.toChannels(a),3),e=t[0],r=t[1],i=t[2];return{css:_.toCss(e,r,i),rgba:a}},f.opacity=function(h,a){var t=Math.round(255*a),e=v(g.toChannels(h.rgba),3),r=e[0],i=e[1],n=e[2];return{css:_.toCss(r,i,n,t),rgba:_.toRgba(r,i,n,t)}},f.toColorRGB=function(h){return[h.rgba>>24&255,h.rgba>>16&255,h.rgba>>8&255]},(c.css||(c.css={})).toColor=function(h){if(h.match(/#[0-9a-f]{3,8}/i))switch(h.length){case 4:var a=parseInt(h.slice(1,2).repeat(2),16),t=parseInt(h.slice(2,3).repeat(2),16),e=parseInt(h.slice(3,4).repeat(2),16);return g.toColor(a,t,e);case 5:a=parseInt(h.slice(1,2).repeat(2),16),t=parseInt(h.slice(2,3).repeat(2),16),e=parseInt(h.slice(3,4).repeat(2),16);var r=parseInt(h.slice(4,5).repeat(2),16);return g.toColor(a,t,e,r);case 7:return{css:h,rgba:(parseInt(h.slice(1),16)<<8|255)>>>0};case 9:return{css:h,rgba:parseInt(h.slice(1),16)>>>0}}var i=h.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(i)return a=parseInt(i[1]),t=parseInt(i[2]),e=parseInt(i[3]),r=Math.round(255*(i[5]===void 0?1:parseFloat(i[5]))),g.toColor(a,t,e,r);throw new Error("css.toColor: Unsupported css format")},function(h){function a(t,e,r){var i=t/255,n=e/255,d=r/255;return .2126*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4))}h.relativeLuminance=function(t){return a(t>>16&255,t>>8&255,255&t)},h.relativeLuminance2=a}(l=c.rgb||(c.rgb={})),function(h){function a(e,r,i){for(var n=e>>24&255,d=e>>16&255,u=e>>8&255,m=r>>24&255,S=r>>16&255,y=r>>8&255,b=o(l.relativeLuminance2(m,S,y),l.relativeLuminance2(n,d,u));b<i&&(m>0||S>0||y>0);)m-=Math.max(0,Math.ceil(.1*m)),S-=Math.max(0,Math.ceil(.1*S)),y-=Math.max(0,Math.ceil(.1*y)),b=o(l.relativeLuminance2(m,S,y),l.relativeLuminance2(n,d,u));return(m<<24|S<<16|y<<8|255)>>>0}function t(e,r,i){for(var n=e>>24&255,d=e>>16&255,u=e>>8&255,m=r>>24&255,S=r>>16&255,y=r>>8&255,b=o(l.relativeLuminance2(m,S,y),l.relativeLuminance2(n,d,u));b<i&&(m<255||S<255||y<255);)m=Math.min(255,m+Math.ceil(.1*(255-m))),S=Math.min(255,S+Math.ceil(.1*(255-S))),y=Math.min(255,y+Math.ceil(.1*(255-y))),b=o(l.relativeLuminance2(m,S,y),l.relativeLuminance2(n,d,u));return(m<<24|S<<16|y<<8|255)>>>0}h.ensureContrastRatio=function(e,r,i){var n=l.relativeLuminance(e>>8),d=l.relativeLuminance(r>>8);if(o(n,d)<i){if(d<n){var u=a(e,r,i),m=o(n,l.relativeLuminance(u>>8));if(m<i){var S=t(e,e,i);return m>o(n,l.relativeLuminance(S>>8))?u:S}return u}var y=t(e,r,i),b=o(n,l.relativeLuminance(y>>8));return b<i?(S=a(e,e,i),b>o(n,l.relativeLuminance(S>>8))?y:S):y}},h.reduceLuminance=a,h.increaseLuminance=t,h.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},h.toColor=function(e,r,i,n){return{css:_.toCss(e,r,i,n),rgba:_.toRgba(e,r,i,n)}}}(g=c.rgba||(c.rgba={})),c.toPaddedHex=s,c.contrastRatio=o},345:(w,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.forwardEvent=c.EventEmitter=void 0;var _=function(){function f(){this._listeners=[],this._disposed=!1}return Object.defineProperty(f.prototype,"event",{get:function(){var l=this;return this._event||(this._event=function(g){return l._listeners.push(g),{dispose:function(){if(!l._disposed){for(var v=0;v<l._listeners.length;v++)if(l._listeners[v]===g)return void l._listeners.splice(v,1)}}}}),this._event},enumerable:!1,configurable:!0}),f.prototype.fire=function(l,g){for(var v=[],s=0;s<this._listeners.length;s++)v.push(this._listeners[s]);for(s=0;s<v.length;s++)v[s].call(void 0,l,g)},f.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},f}();c.EventEmitter=_,c.forwardEvent=function(f,l){return f(function(g){return l.fire(g)})}},859:function(w,c){var _=this&&this.__values||function(g){var v=typeof Symbol=="function"&&Symbol.iterator,s=v&&g[v],o=0;if(s)return s.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&o>=g.length&&(g=void 0),{value:g&&g[o++],done:!g}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(c,"__esModule",{value:!0}),c.getDisposeArrayDisposable=c.disposeArray=c.Disposable=void 0;var f=function(){function g(){this._disposables=[],this._isDisposed=!1}return g.prototype.dispose=function(){var v,s;this._isDisposed=!0;try{for(var o=_(this._disposables),h=o.next();!h.done;h=o.next())h.value.dispose()}catch(a){v={error:a}}finally{try{h&&!h.done&&(s=o.return)&&s.call(o)}finally{if(v)throw v.error}}this._disposables.length=0},g.prototype.register=function(v){return this._disposables.push(v),v},g.prototype.unregister=function(v){var s=this._disposables.indexOf(v);s!==-1&&this._disposables.splice(s,1)},g}();function l(g){var v,s;try{for(var o=_(g),h=o.next();!h.done;h=o.next())h.value.dispose()}catch(a){v={error:a}}finally{try{h&&!h.done&&(s=o.return)&&s.call(o)}finally{if(v)throw v.error}}g.length=0}c.Disposable=f,c.disposeArray=l,c.getDisposeArrayDisposable=function(g){return{dispose:function(){return l(g)}}}},399:(w,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.isLinux=c.isWindows=c.isIphone=c.isIpad=c.isMac=c.isSafari=c.isLegacyEdge=c.isFirefox=void 0;var _=typeof navigator>"u",f=_?"node":navigator.userAgent,l=_?"node":navigator.platform;c.isFirefox=f.includes("Firefox"),c.isLegacyEdge=f.includes("Edge"),c.isSafari=/^((?!chrome|android).)*safari/i.test(f),c.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),c.isIpad=l==="iPad",c.isIphone=l==="iPhone",c.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),c.isLinux=l.indexOf("Linux")>=0},455:(w,c)=>{function _(f,l,g,v){if(g===void 0&&(g=0),v===void 0&&(v=f.length),g>=f.length)return f;g=(f.length+g)%f.length,v=v>=f.length?f.length:(f.length+v)%f.length;for(var s=g;s<v;++s)f[s]=l;return f}Object.defineProperty(c,"__esModule",{value:!0}),c.concat=c.fillFallback=c.fill=void 0,c.fill=function(f,l,g,v){return f.fill?f.fill(l,g,v):_(f,l,g,v)},c.fillFallback=_,c.concat=function(f,l){var g=new f.constructor(f.length+l.length);return g.set(f),g.set(l,f.length),g}},147:(w,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ExtendedAttrs=c.AttributeData=void 0;var _=function(){function l(){this.fg=0,this.bg=0,this.extended=new f}return l.toColorRGB=function(g){return[g>>>16&255,g>>>8&255,255&g]},l.fromColorRGB=function(g){return(255&g[0])<<16|(255&g[1])<<8|255&g[2]},l.prototype.clone=function(){var g=new l;return g.fg=this.fg,g.bg=this.bg,g.extended=this.extended.clone(),g},l.prototype.isInverse=function(){return 67108864&this.fg},l.prototype.isBold=function(){return 134217728&this.fg},l.prototype.isUnderline=function(){return 268435456&this.fg},l.prototype.isBlink=function(){return 536870912&this.fg},l.prototype.isInvisible=function(){return 1073741824&this.fg},l.prototype.isItalic=function(){return 67108864&this.bg},l.prototype.isDim=function(){return 134217728&this.bg},l.prototype.isStrikethrough=function(){return 2147483648&this.fg},l.prototype.getFgColorMode=function(){return 50331648&this.fg},l.prototype.getBgColorMode=function(){return 50331648&this.bg},l.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},l.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},l.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},l.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},l.prototype.isFgDefault=function(){return(50331648&this.fg)==0},l.prototype.isBgDefault=function(){return(50331648&this.bg)==0},l.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},l.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},l.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},l.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},l.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},l.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},l.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},l.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},l.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},l.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},l.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},l}();c.AttributeData=_;var f=function(){function l(g,v){g===void 0&&(g=0),v===void 0&&(v=-1),this.underlineStyle=g,this.underlineColor=v}return l.prototype.clone=function(){return new l(this.underlineStyle,this.underlineColor)},l.prototype.isEmpty=function(){return this.underlineStyle===0},l}();c.ExtendedAttrs=f},782:function(w,c,_){var f,l=this&&this.__extends||(f=function(h,a){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},f(h,a)},function(h,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function t(){this.constructor=h}f(h,a),h.prototype=a===null?Object.create(a):(t.prototype=a.prototype,new t)});Object.defineProperty(c,"__esModule",{value:!0}),c.CellData=void 0;var g=_(133),v=_(855),s=_(147),o=function(h){function a(){var t=h!==null&&h.apply(this,arguments)||this;return t.content=0,t.fg=0,t.bg=0,t.extended=new s.ExtendedAttrs,t.combinedData="",t}return l(a,h),a.fromCharData=function(t){var e=new a;return e.setFromCharData(t),e},a.prototype.isCombined=function(){return 2097152&this.content},a.prototype.getWidth=function(){return this.content>>22},a.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,g.stringFromCodePoint)(2097151&this.content):""},a.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},a.prototype.setFromCharData=function(t){this.fg=t[v.CHAR_DATA_ATTR_INDEX],this.bg=0;var e=!1;if(t[v.CHAR_DATA_CHAR_INDEX].length>2)e=!0;else if(t[v.CHAR_DATA_CHAR_INDEX].length===2){var r=t[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){var i=t[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&i<=57343?this.content=1024*(r-55296)+i-56320+65536|t[v.CHAR_DATA_WIDTH_INDEX]<<22:e=!0}else e=!0}else this.content=t[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[v.CHAR_DATA_WIDTH_INDEX]<<22;e&&(this.combinedData=t[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|t[v.CHAR_DATA_WIDTH_INDEX]<<22)},a.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},a}(s.AttributeData);c.CellData=o},855:(w,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.WHITESPACE_CELL_CODE=c.WHITESPACE_CELL_WIDTH=c.WHITESPACE_CELL_CHAR=c.NULL_CELL_CODE=c.NULL_CELL_WIDTH=c.NULL_CELL_CHAR=c.CHAR_DATA_CODE_INDEX=c.CHAR_DATA_WIDTH_INDEX=c.CHAR_DATA_CHAR_INDEX=c.CHAR_DATA_ATTR_INDEX=c.DEFAULT_ATTR=c.DEFAULT_COLOR=void 0,c.DEFAULT_COLOR=256,c.DEFAULT_ATTR=256|c.DEFAULT_COLOR<<9,c.CHAR_DATA_ATTR_INDEX=0,c.CHAR_DATA_CHAR_INDEX=1,c.CHAR_DATA_WIDTH_INDEX=2,c.CHAR_DATA_CODE_INDEX=3,c.NULL_CELL_CHAR="",c.NULL_CELL_WIDTH=1,c.NULL_CELL_CODE=0,c.WHITESPACE_CELL_CHAR=" ",c.WHITESPACE_CELL_WIDTH=1,c.WHITESPACE_CELL_CODE=32},133:(w,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.Utf8ToUtf32=c.StringToUtf32=c.utf32ToString=c.stringFromCodePoint=void 0,c.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},c.utf32ToString=function(l,g,v){g===void 0&&(g=0),v===void 0&&(v=l.length);for(var s="",o=g;o<v;++o){var h=l[o];h>65535?(h-=65536,s+=String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):s+=String.fromCharCode(h)}return s};var _=function(){function l(){this._interim=0}return l.prototype.clear=function(){this._interim=0},l.prototype.decode=function(g,v){var s=g.length;if(!s)return 0;var o=0,h=0;this._interim&&(56320<=(e=g.charCodeAt(h++))&&e<=57343?v[o++]=1024*(this._interim-55296)+e-56320+65536:(v[o++]=this._interim,v[o++]=e),this._interim=0);for(var a=h;a<s;++a){var t=g.charCodeAt(a);if(55296<=t&&t<=56319){if(++a>=s)return this._interim=t,o;var e;56320<=(e=g.charCodeAt(a))&&e<=57343?v[o++]=1024*(t-55296)+e-56320+65536:(v[o++]=t,v[o++]=e)}else t!==65279&&(v[o++]=t)}return o},l}();c.StringToUtf32=_;var f=function(){function l(){this.interim=new Uint8Array(3)}return l.prototype.clear=function(){this.interim.fill(0)},l.prototype.decode=function(g,v){var s=g.length;if(!s)return 0;var o,h,a,t,e=0,r=0,i=0;if(this.interim[0]){var n=!1,d=this.interim[0];d&=(224&d)==192?31:(240&d)==224?15:7;for(var u=0,m=void 0;(m=63&this.interim[++u])&&u<4;)d<<=6,d|=m;for(var S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=S-u;i<y;){if(i>=s)return 0;if((192&(m=g[i++]))!=128){i--,n=!0;break}this.interim[u++]=m,d<<=6,d|=63&m}n||(S===2?d<128?i--:v[e++]=d:S===3?d<2048||d>=55296&&d<=57343||d===65279||(v[e++]=d):d<65536||d>1114111||(v[e++]=d)),this.interim.fill(0)}for(var b=s-4,C=i;C<s;){for(;!(!(C<b)||128&(o=g[C])||128&(h=g[C+1])||128&(a=g[C+2])||128&(t=g[C+3]));)v[e++]=o,v[e++]=h,v[e++]=a,v[e++]=t,C+=4;if((o=g[C++])<128)v[e++]=o;else if((224&o)==192){if(C>=s)return this.interim[0]=o,e;if((192&(h=g[C++]))!=128){C--;continue}if((r=(31&o)<<6|63&h)<128){C--;continue}v[e++]=r}else if((240&o)==224){if(C>=s)return this.interim[0]=o,e;if((192&(h=g[C++]))!=128){C--;continue}if(C>=s)return this.interim[0]=o,this.interim[1]=h,e;if((192&(a=g[C++]))!=128){C--;continue}if((r=(15&o)<<12|(63&h)<<6|63&a)<2048||r>=55296&&r<=57343||r===65279)continue;v[e++]=r}else if((248&o)==240){if(C>=s)return this.interim[0]=o,e;if((192&(h=g[C++]))!=128){C--;continue}if(C>=s)return this.interim[0]=o,this.interim[1]=h,e;if((192&(a=g[C++]))!=128){C--;continue}if(C>=s)return this.interim[0]=o,this.interim[1]=h,this.interim[2]=a,e;if((192&(t=g[C++]))!=128){C--;continue}if((r=(7&o)<<18|(63&h)<<12|(63&a)<<6|63&t)<65536||r>1114111)continue;v[e++]=r}}return e},l}();c.Utf8ToUtf32=f}},re={};function H(w){var c=re[w];if(c!==void 0)return c.exports;var _=re[w]={exports:{}};return _e[w].call(_.exports,_,_.exports,H),_.exports}var p={};return(()=>{var w=p;Object.defineProperty(w,"__esModule",{value:!0}),w.WebglAddon=void 0;var c=H(666),_=H(345),f=H(399),l=function(){function g(v){this._preserveDrawingBuffer=v,this._onContextLoss=new _.EventEmitter}return Object.defineProperty(g.prototype,"onContextLoss",{get:function(){return this._onContextLoss.event},enumerable:!1,configurable:!0}),g.prototype.activate=function(v){var s=this;if(!v.element)throw new Error("Cannot activate WebglAddon before Terminal.open");if(f.isSafari)throw new Error("Webgl is not currently supported on Safari");this._terminal=v;var o=v._core._renderService,h=v._core._characterJoinerService,a=v._core._decorationService,t=v._core._colorManager.colors;this._renderer=new c.WebglRenderer(v,t,h,a,this._preserveDrawingBuffer),this._renderer.onContextLoss(function(){return s._onContextLoss.fire()}),o.setRenderer(this._renderer)},g.prototype.dispose=function(){if(!this._terminal)throw new Error("Cannot dispose WebglAddon because it is activated");var v=this._terminal._core._renderService;v.setRenderer(this._terminal._core._createRenderer()),v.onResize(this._terminal.cols,this._terminal.rows),this._renderer=void 0},Object.defineProperty(g.prototype,"textureAtlas",{get:function(){var v;return(v=this._renderer)===null||v===void 0?void 0:v.textureAtlas},enumerable:!1,configurable:!0}),g.prototype.clearTextureAtlas=function(){var v;(v=this._renderer)===null||v===void 0||v.clearCharAtlas()},g}();w.WebglAddon=l})(),p})()})})(br);var Sr={exports:{}};(function(me,We){(function(_e,re){me.exports=re()})(self,function(){return(()=>{var _e={775:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.FitAddon=void 0;var w=function(){function c(){}return c.prototype.activate=function(_){this._terminal=_},c.prototype.dispose=function(){},c.prototype.fit=function(){var _=this.proposeDimensions();if(_&&this._terminal){var f=this._terminal._core;this._terminal.rows===_.rows&&this._terminal.cols===_.cols||(f._renderService.clear(),this._terminal.resize(_.cols,_.rows))}},c.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var _=this._terminal._core;if(_._renderService.dimensions.actualCellWidth!==0&&_._renderService.dimensions.actualCellHeight!==0){var f=window.getComputedStyle(this._terminal.element.parentElement),l=parseInt(f.getPropertyValue("height")),g=Math.max(0,parseInt(f.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),s=l-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),o=g-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-_.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(o/_._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(s/_._renderService.dimensions.actualCellHeight))}}}},c}();p.FitAddon=w}},re={};return function H(p){if(re[p])return re[p].exports;var w=re[p]={exports:{}};return _e[p](w,w.exports,H),w.exports}(775)})()})})(Sr);var wr={exports:{}};(function(me,We){(function(_e,re){me.exports=re()})(self,function(){return(()=>{var _e={4567:function(H,p,w){var c,_=this&&this.__extends||(c=function(t,e){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},c(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}c(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(p,"__esModule",{value:!0}),p.AccessibilityManager=void 0;var f=w(9042),l=w(6114),g=w(9924),v=w(3656),s=w(844),o=w(5596),h=w(9631),a=function(t){function e(r,i){var n=t.call(this)||this;n._terminal=r,n._renderService=i,n._liveRegionLineCount=0,n._charsToConsume=[],n._charsToAnnounce="",n._accessibilityTreeRoot=document.createElement("div"),n._accessibilityTreeRoot.classList.add("xterm-accessibility"),n._accessibilityTreeRoot.tabIndex=0,n._rowContainer=document.createElement("div"),n._rowContainer.setAttribute("role","list"),n._rowContainer.classList.add("xterm-accessibility-tree"),n._rowElements=[];for(var d=0;d<n._terminal.rows;d++)n._rowElements[d]=n._createAccessibilityTreeNode(),n._rowContainer.appendChild(n._rowElements[d]);if(n._topBoundaryFocusListener=function(u){return n._onBoundaryFocus(u,0)},n._bottomBoundaryFocusListener=function(u){return n._onBoundaryFocus(u,1)},n._rowElements[0].addEventListener("focus",n._topBoundaryFocusListener),n._rowElements[n._rowElements.length-1].addEventListener("focus",n._bottomBoundaryFocusListener),n._refreshRowsDimensions(),n._accessibilityTreeRoot.appendChild(n._rowContainer),n._renderRowsDebouncer=new g.TimeBasedDebouncer(n._renderRows.bind(n)),n._refreshRows(),n._liveRegion=document.createElement("div"),n._liveRegion.classList.add("live-region"),n._liveRegion.setAttribute("aria-live","assertive"),n._accessibilityTreeRoot.appendChild(n._liveRegion),!n._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return n._terminal.element.insertAdjacentElement("afterbegin",n._accessibilityTreeRoot),n.register(n._renderRowsDebouncer),n.register(n._terminal.onResize(function(u){return n._onResize(u.rows)})),n.register(n._terminal.onRender(function(u){return n._refreshRows(u.start,u.end)})),n.register(n._terminal.onScroll(function(){return n._refreshRows()})),n.register(n._terminal.onA11yChar(function(u){return n._onChar(u)})),n.register(n._terminal.onLineFeed(function(){return n._onChar(`
`)})),n.register(n._terminal.onA11yTab(function(u){return n._onTab(u)})),n.register(n._terminal.onKey(function(u){return n._onKey(u.key)})),n.register(n._terminal.onBlur(function(){return n._clearLiveRegion()})),n.register(n._renderService.onDimensionsChange(function(){return n._refreshRowsDimensions()})),n._screenDprMonitor=new o.ScreenDprMonitor,n.register(n._screenDprMonitor),n._screenDprMonitor.setListener(function(){return n._refreshRowsDimensions()}),n.register((0,v.addDisposableDomListener)(window,"resize",function(){return n._refreshRowsDimensions()})),n}return _(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),(0,h.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(r,i){var n=r.target,d=this._rowElements[i===0?1:this._rowElements.length-2];if(n.getAttribute("aria-posinset")!==(i===0?"1":""+this._terminal.buffer.lines.length)&&r.relatedTarget===d){var u,m;if(i===0?(u=n,m=this._rowElements.pop(),this._rowContainer.removeChild(m)):(u=this._rowElements.shift(),m=n,this._rowContainer.removeChild(u)),u.removeEventListener("focus",this._topBoundaryFocusListener),m.removeEventListener("focus",this._bottomBoundaryFocusListener),i===0){var S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else S=this._createAccessibilityTreeNode(),this._rowElements.push(S),this._rowContainer.appendChild(S);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(i===0?-1:1),this._rowElements[i===0?1:this._rowElements.length-2].focus(),r.preventDefault(),r.stopImmediatePropagation()}},e.prototype._onResize=function(r){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var i=this._rowContainer.children.length;i<this._terminal.rows;i++)this._rowElements[i]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[i]);for(;this._rowElements.length>r;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var r=document.createElement("div");return r.setAttribute("role","listitem"),r.tabIndex=-1,this._refreshRowDimensions(r),r},e.prototype._onTab=function(r){for(var i=0;i<r;i++)this._onChar(" ")},e.prototype._onChar=function(r){var i=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==r&&(this._charsToAnnounce+=r):this._charsToAnnounce+=r,r===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),l.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){i._accessibilityTreeRoot.appendChild(i._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,l.isMac&&(0,h.removeElementFromParent)(this._liveRegion)},e.prototype._onKey=function(r){this._clearLiveRegion(),this._charsToConsume.push(r)},e.prototype._refreshRows=function(r,i){this._renderRowsDebouncer.refresh(r,i,this._terminal.rows)},e.prototype._renderRows=function(r,i){for(var n=this._terminal.buffer,d=n.lines.length.toString(),u=r;u<=i;u++){var m=n.translateBufferLineToString(n.ydisp+u,!0),S=(n.ydisp+u+1).toString(),y=this._rowElements[u];y&&(m.length===0?y.innerText="\xA0":y.textContent=m,y.setAttribute("aria-posinset",S),y.setAttribute("aria-setsize",d))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var r=0;r<this._terminal.rows;r++)this._refreshRowDimensions(this._rowElements[r])}},e.prototype._refreshRowDimensions=function(r){r.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(s.Disposable);p.AccessibilityManager=a},3614:(H,p)=>{function w(l){return l.replace(/\r?\n/g,"\r")}function c(l,g){return g?"\x1B[200~"+l+"\x1B[201~":l}function _(l,g,v){l=c(l=w(l),v.decPrivateModes.bracketedPasteMode),v.triggerDataEvent(l,!0),g.value=""}function f(l,g,v){var s=v.getBoundingClientRect(),o=l.clientX-s.left-10,h=l.clientY-s.top-10;g.style.width="20px",g.style.height="20px",g.style.left=o+"px",g.style.top=h+"px",g.style.zIndex="1000",g.focus()}Object.defineProperty(p,"__esModule",{value:!0}),p.rightClickHandler=p.moveTextAreaUnderMouseCursor=p.paste=p.handlePasteEvent=p.copyHandler=p.bracketTextForPaste=p.prepareTextForTerminal=void 0,p.prepareTextForTerminal=w,p.bracketTextForPaste=c,p.copyHandler=function(l,g){l.clipboardData&&l.clipboardData.setData("text/plain",g.selectionText),l.preventDefault()},p.handlePasteEvent=function(l,g,v){l.stopPropagation(),l.clipboardData&&_(l.clipboardData.getData("text/plain"),g,v)},p.paste=_,p.moveTextAreaUnderMouseCursor=f,p.rightClickHandler=function(l,g,v,s,o){f(l,g,v),o&&s.rightClickSelect(l),g.value=s.selectionText,g.select()}},7239:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ColorContrastCache=void 0;var w=function(){function c(){this._color={},this._rgba={}}return c.prototype.clear=function(){this._color={},this._rgba={}},c.prototype.setCss=function(_,f,l){this._rgba[_]||(this._rgba[_]={}),this._rgba[_][f]=l},c.prototype.getCss=function(_,f){return this._rgba[_]?this._rgba[_][f]:void 0},c.prototype.setColor=function(_,f,l){this._color[_]||(this._color[_]={}),this._color[_][f]=l},c.prototype.getColor=function(_,f){return this._color[_]?this._color[_][f]:void 0},c}();p.ColorContrastCache=w},5680:function(H,p,w){var c=this&&this.__read||function(a,t){var e=typeof Symbol=="function"&&a[Symbol.iterator];if(!e)return a;var r,i,n=e.call(a),d=[];try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)d.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(i)throw i.error}}return d};Object.defineProperty(p,"__esModule",{value:!0}),p.ColorManager=p.DEFAULT_ANSI_COLORS=void 0;var _=w(8055),f=w(7239),l=_.css.toColor("#ffffff"),g=_.css.toColor("#000000"),v=_.css.toColor("#ffffff"),s=_.css.toColor("#000000"),o={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};p.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var a=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],t=[0,95,135,175,215,255],e=0;e<216;e++){var r=t[e/36%6|0],i=t[e/6%6|0],n=t[e%6];a.push({css:_.channels.toCss(r,i,n),rgba:_.channels.toRgba(r,i,n)})}for(e=0;e<24;e++){var d=8+10*e;a.push({css:_.channels.toCss(d,d,d),rgba:_.channels.toRgba(d,d,d)})}return a}());var h=function(){function a(t,e){this.allowTransparency=e;var r=t.createElement("canvas");r.width=1,r.height=1;var i=r.getContext("2d");if(!i)throw new Error("Could not get rendering context");this._ctx=i,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new f.ColorContrastCache,this.colors={foreground:l,background:g,cursor:v,cursorAccent:s,selectionTransparent:o,selectionOpaque:_.color.blend(g,o),selectionForeground:void 0,ansi:p.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return a.prototype.onOptionsChange=function(t){t==="minimumContrastRatio"&&this._contrastCache.clear()},a.prototype.setTheme=function(t){t===void 0&&(t={}),this.colors.foreground=this._parseColor(t.foreground,l),this.colors.background=this._parseColor(t.background,g),this.colors.cursor=this._parseColor(t.cursor,v,!0),this.colors.cursorAccent=this._parseColor(t.cursorAccent,s,!0),this.colors.selectionTransparent=this._parseColor(t.selection,o,!0),this.colors.selectionOpaque=_.color.blend(this.colors.background,this.colors.selectionTransparent);var e={css:"",rgba:0};this.colors.selectionForeground=t.selectionForeground?this._parseColor(t.selectionForeground,e):void 0,this.colors.selectionForeground===e&&(this.colors.selectionForeground=void 0),_.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=_.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(t.black,p.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(t.red,p.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(t.green,p.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(t.yellow,p.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(t.blue,p.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(t.magenta,p.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(t.cyan,p.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(t.white,p.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(t.brightBlack,p.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(t.brightRed,p.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(t.brightGreen,p.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(t.brightYellow,p.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(t.brightBlue,p.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(t.brightMagenta,p.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(t.brightCyan,p.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(t.brightWhite,p.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},a.prototype.restoreColor=function(t){if(t!==void 0)switch(t){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[t]=this._restoreColors.ansi[t]}else for(var e=0;e<this._restoreColors.ansi.length;++e)this.colors.ansi[e]=this._restoreColors.ansi[e]},a.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:this.colors.ansi.slice()}},a.prototype._parseColor=function(t,e,r){if(r===void 0&&(r=this.allowTransparency),t===void 0)return e;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=t,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+t+" is invalid using fallback "+e.css),e;this._ctx.fillRect(0,0,1,1);var i=this._ctx.getImageData(0,0,1,1).data;if(i[3]!==255){if(!r)return console.warn("Color: "+t+" is using transparency, but allowTransparency is false. Using fallback "+e.css+"."),e;var n=c(this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(b){return Number(b)}),4),d=n[0],u=n[1],m=n[2],S=n[3],y=Math.round(255*S);return{rgba:_.channels.toRgba(d,u,m,y),css:t}}return{css:this._ctx.fillStyle,rgba:_.channels.toRgba(i[0],i[1],i[2],i[3])}},a}();p.ColorManager=h},9631:function(H,p){var w=this&&this.__values||function(c){var _=typeof Symbol=="function"&&Symbol.iterator,f=_&&c[_],l=0;if(f)return f.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&l>=c.length&&(c=void 0),{value:c&&c[l++],done:!c}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.removeElementFromParent=void 0,p.removeElementFromParent=function(){for(var c,_,f,l=[],g=0;g<arguments.length;g++)l[g]=arguments[g];try{for(var v=w(l),s=v.next();!s.done;s=v.next()){var o=s.value;(f=o==null?void 0:o.parentElement)===null||f===void 0||f.removeChild(o)}}catch(h){c={error:h}}finally{try{s&&!s.done&&(_=v.return)&&_.call(v)}finally{if(c)throw c.error}}}},3656:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.addDisposableDomListener=void 0,p.addDisposableDomListener=function(w,c,_,f){w.addEventListener(c,_,f);var l=!1;return{dispose:function(){l||(l=!0,w.removeEventListener(c,_,f))}}}},3551:function(H,p,w){var c=this&&this.__decorate||function(s,o,h,a){var t,e=arguments.length,r=e<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,h):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,o,h,a);else for(var i=s.length-1;i>=0;i--)(t=s[i])&&(r=(e<3?t(r):e>3?t(o,h,r):t(o,h))||r);return e>3&&r&&Object.defineProperty(o,h,r),r},_=this&&this.__param||function(s,o){return function(h,a){o(h,a,s)}};Object.defineProperty(p,"__esModule",{value:!0}),p.MouseZone=p.Linkifier=void 0;var f=w(8460),l=w(2585),g=function(){function s(o,h,a){this._bufferService=o,this._logService=h,this._unicodeService=a,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new f.EventEmitter,this._onHideLinkUnderline=new f.EventEmitter,this._onLinkTooltip=new f.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(s.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),s.prototype.attachToDom=function(o,h){this._element=o,this._mouseZoneManager=h},s.prototype.linkifyRows=function(o,h){var a=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=o,this._rowsToLinkify.end=h):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,o),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,h)),this._mouseZoneManager.clearAll(o,h),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return a._linkifyRows()},s._timeBeforeLatency))},s.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var o=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var h=o.ydisp+this._rowsToLinkify.start;if(!(h>=o.lines.length)){for(var a=o.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,t=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,h,a,t,t);e.hasNext();)for(var r=e.next(),i=0;i<this._linkMatchers.length;i++)this._doLinkifyRow(r.range.first,r.content,this._linkMatchers[i]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},s.prototype.registerLinkMatcher=function(o,h,a){if(a===void 0&&(a={}),!h)throw new Error("handler must be defined");var t={id:this._nextLinkMatcherId++,regex:o,handler:h,matchIndex:a.matchIndex,validationCallback:a.validationCallback,hoverTooltipCallback:a.tooltipCallback,hoverLeaveCallback:a.leaveCallback,willLinkActivate:a.willLinkActivate,priority:a.priority||0};return this._addLinkMatcherToList(t),t.id},s.prototype._addLinkMatcherToList=function(o){if(this._linkMatchers.length!==0){for(var h=this._linkMatchers.length-1;h>=0;h--)if(o.priority<=this._linkMatchers[h].priority)return void this._linkMatchers.splice(h+1,0,o);this._linkMatchers.splice(0,0,o)}else this._linkMatchers.push(o)},s.prototype.deregisterLinkMatcher=function(o){for(var h=0;h<this._linkMatchers.length;h++)if(this._linkMatchers[h].id===o)return this._linkMatchers.splice(h,1),!0;return!1},s.prototype._doLinkifyRow=function(o,h,a){for(var t,e=this,r=new RegExp(a.regex.source,(a.regex.flags||"")+"g"),i=-1,n=function(){var u=t[typeof a.matchIndex!="number"?0:a.matchIndex];if(!u)return d._logService.debug("match found without corresponding matchIndex",t,a),"break";if(i=h.indexOf(u,i+1),r.lastIndex=i+u.length,i<0)return"break";var m=d._bufferService.buffer.stringIndexToBufferIndex(o,i);if(m[0]<0)return"break";var S=d._bufferService.buffer.lines.get(m[0]);if(!S)return"break";var y=S.getFg(m[1]),b=y?y>>9&511:void 0;a.validationCallback?a.validationCallback(u,function(C){e._rowsTimeoutId||C&&e._addLink(m[1],m[0]-e._bufferService.buffer.ydisp,u,a,b)}):d._addLink(m[1],m[0]-d._bufferService.buffer.ydisp,u,a,b)},d=this;(t=r.exec(h))!==null&&n()!=="break";);},s.prototype._addLink=function(o,h,a,t,e){var r=this;if(this._mouseZoneManager&&this._element){var i=this._unicodeService.getStringCellWidth(a),n=o%this._bufferService.cols,d=h+Math.floor(o/this._bufferService.cols),u=(n+i)%this._bufferService.cols,m=d+Math.floor((n+i)/this._bufferService.cols);u===0&&(u=this._bufferService.cols,m--),this._mouseZoneManager.add(new v(n+1,d+1,u+1,m+1,function(S){if(t.handler)return t.handler(S,a);var y=window.open();y?(y.opener=null,y.location.href=a):console.warn("Opening link blocked as opener could not be cleared")},function(){r._onShowLinkUnderline.fire(r._createLinkHoverEvent(n,d,u,m,e)),r._element.classList.add("xterm-cursor-pointer")},function(S){r._onLinkTooltip.fire(r._createLinkHoverEvent(n,d,u,m,e)),t.hoverTooltipCallback&&t.hoverTooltipCallback(S,a,{start:{x:n,y:d},end:{x:u,y:m}})},function(){r._onHideLinkUnderline.fire(r._createLinkHoverEvent(n,d,u,m,e)),r._element.classList.remove("xterm-cursor-pointer"),t.hoverLeaveCallback&&t.hoverLeaveCallback()},function(S){return!t.willLinkActivate||t.willLinkActivate(S,a)}))}},s.prototype._createLinkHoverEvent=function(o,h,a,t,e){return{x1:o,y1:h,x2:a,y2:t,cols:this._bufferService.cols,fg:e}},s._timeBeforeLatency=200,s=c([_(0,l.IBufferService),_(1,l.ILogService),_(2,l.IUnicodeService)],s)}();p.Linkifier=g;var v=function(s,o,h,a,t,e,r,i,n){this.x1=s,this.y1=o,this.x2=h,this.y2=a,this.clickCallback=t,this.hoverCallback=e,this.tooltipCallback=r,this.leaveCallback=i,this.willLinkActivate=n};p.MouseZone=v},6465:function(H,p,w){var c,_=this&&this.__extends||(c=function(e,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&(i[d]=n[d])},c(e,r)},function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}c(e,r),e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}),f=this&&this.__decorate||function(e,r,i,n){var d,u=arguments.length,m=u<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,r,i,n);else for(var S=e.length-1;S>=0;S--)(d=e[S])&&(m=(u<3?d(m):u>3?d(r,i,m):d(r,i))||m);return u>3&&m&&Object.defineProperty(r,i,m),m},l=this&&this.__param||function(e,r){return function(i,n){r(i,n,e)}},g=this&&this.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,i=r&&e[r],n=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},v=this&&this.__read||function(e,r){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var n,d,u=i.call(e),m=[];try{for(;(r===void 0||r-- >0)&&!(n=u.next()).done;)m.push(n.value)}catch(S){d={error:S}}finally{try{n&&!n.done&&(i=u.return)&&i.call(u)}finally{if(d)throw d.error}}return m};Object.defineProperty(p,"__esModule",{value:!0}),p.Linkifier2=void 0;var s=w(2585),o=w(8460),h=w(844),a=w(3656),t=function(e){function r(i){var n=e.call(this)||this;return n._bufferService=i,n._linkProviders=[],n._linkCacheDisposables=[],n._isMouseOut=!0,n._activeLine=-1,n._onShowLinkUnderline=n.register(new o.EventEmitter),n._onHideLinkUnderline=n.register(new o.EventEmitter),n.register((0,h.getDisposeArrayDisposable)(n._linkCacheDisposables)),n}return _(r,e),Object.defineProperty(r.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),r.prototype.registerLinkProvider=function(i){var n=this;return this._linkProviders.push(i),{dispose:function(){var d=n._linkProviders.indexOf(i);d!==-1&&n._linkProviders.splice(d,1)}}},r.prototype.attachToDom=function(i,n,d){var u=this;this._element=i,this._mouseService=n,this._renderService=d,this.register((0,a.addDisposableDomListener)(this._element,"mouseleave",function(){u._isMouseOut=!0,u._clearCurrentLink()})),this.register((0,a.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))},r.prototype._onMouseMove=function(i){if(this._lastMouseEvent=i,this._element&&this._mouseService){var n=this._positionFromMouseEvent(i,this._element,this._mouseService);if(n){this._isMouseOut=!1;for(var d=i.composedPath(),u=0;u<d.length;u++){var m=d[u];if(m.classList.contains("xterm"))break;if(m.classList.contains("xterm-hover"))return}this._lastBufferCell&&n.x===this._lastBufferCell.x&&n.y===this._lastBufferCell.y||(this._onHover(n),this._lastBufferCell=n)}}},r.prototype._onHover=function(i){if(this._activeLine!==i.y)return this._clearCurrentLink(),void this._askForLink(i,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,i)||(this._clearCurrentLink(),this._askForLink(i,!0))},r.prototype._askForLink=function(i,n){var d,u,m,S,y=this;this._activeProviderReplies&&n||((m=this._activeProviderReplies)===null||m===void 0||m.forEach(function(x){x==null||x.forEach(function(A){A.link.dispose&&A.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=i.y);var b=!1,C=function(x,A){n?!((S=M._activeProviderReplies)===null||S===void 0)&&S.get(x)&&(b=M._checkLinkProviderResult(x,i,b)):A.provideLinks(i.y,function(T){var U,z;if(!y._isMouseOut){var W=T==null?void 0:T.map(function(K){return{link:K}});(U=y._activeProviderReplies)===null||U===void 0||U.set(x,W),b=y._checkLinkProviderResult(x,i,b),((z=y._activeProviderReplies)===null||z===void 0?void 0:z.size)===y._linkProviders.length&&y._removeIntersectingLinks(i.y,y._activeProviderReplies)}})},M=this;try{for(var L=g(this._linkProviders.entries()),R=L.next();!R.done;R=L.next()){var E=v(R.value,2);C(E[0],E[1])}}catch(x){d={error:x}}finally{try{R&&!R.done&&(u=L.return)&&u.call(L)}finally{if(d)throw d.error}}},r.prototype._removeIntersectingLinks=function(i,n){for(var d=new Set,u=0;u<n.size;u++){var m=n.get(u);if(m)for(var S=0;S<m.length;S++)for(var y=m[S],b=y.link.range.start.y<i?0:y.link.range.start.x,C=y.link.range.end.y>i?this._bufferService.cols:y.link.range.end.x,M=b;M<=C;M++){if(d.has(M)){m.splice(S--,1);break}d.add(M)}}},r.prototype._checkLinkProviderResult=function(i,n,d){var u,m=this;if(!this._activeProviderReplies)return d;for(var S=this._activeProviderReplies.get(i),y=!1,b=0;b<i;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(y=!0);if(!y&&S){var C=S.find(function(L){return m._linkAtPosition(L.link,n)});C&&(d=!0,this._handleNewLink(C))}if(this._activeProviderReplies.size===this._linkProviders.length&&!d)for(b=0;b<this._activeProviderReplies.size;b++){var M=(u=this._activeProviderReplies.get(b))===null||u===void 0?void 0:u.find(function(L){return m._linkAtPosition(L.link,n)});if(M){d=!0,this._handleNewLink(M);break}}return d},r.prototype._handleMouseDown=function(){this._mouseDownLink=this._currentLink},r.prototype._handleMouseUp=function(i){if(this._element&&this._mouseService&&this._currentLink){var n=this._positionFromMouseEvent(i,this._element,this._mouseService);n&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,n)&&this._currentLink.link.activate(i,this._currentLink.link.text)}},r.prototype._clearCurrentLink=function(i,n){this._element&&this._currentLink&&this._lastMouseEvent&&(!i||!n||this._currentLink.link.range.start.y>=i&&this._currentLink.link.range.end.y<=n)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,h.disposeArray)(this._linkCacheDisposables))},r.prototype._handleNewLink=function(i){var n=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(i.link,d)&&(this._currentLink=i,this._currentLink.state={decorations:{underline:i.link.decorations===void 0||i.link.decorations.underline,pointerCursor:i.link.decorations===void 0||i.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,i.link,this._lastMouseEvent),i.link.decorations={},Object.defineProperties(i.link.decorations,{pointerCursor:{get:function(){var u,m;return(m=(u=n._currentLink)===null||u===void 0?void 0:u.state)===null||m===void 0?void 0:m.decorations.pointerCursor},set:function(u){var m,S;((m=n._currentLink)===null||m===void 0?void 0:m.state)&&n._currentLink.state.decorations.pointerCursor!==u&&(n._currentLink.state.decorations.pointerCursor=u,n._currentLink.state.isHovered&&((S=n._element)===null||S===void 0||S.classList.toggle("xterm-cursor-pointer",u)))}},underline:{get:function(){var u,m;return(m=(u=n._currentLink)===null||u===void 0?void 0:u.state)===null||m===void 0?void 0:m.decorations.underline},set:function(u){var m,S,y;((m=n._currentLink)===null||m===void 0?void 0:m.state)&&((y=(S=n._currentLink)===null||S===void 0?void 0:S.state)===null||y===void 0?void 0:y.decorations.underline)!==u&&(n._currentLink.state.decorations.underline=u,n._currentLink.state.isHovered&&n._fireUnderlineEvent(i.link,u))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(function(u){var m=u.start===0?0:u.start+1+n._bufferService.buffer.ydisp;n._clearCurrentLink(m,u.end+1+n._bufferService.buffer.ydisp)})))}},r.prototype._linkHover=function(i,n,d){var u;!((u=this._currentLink)===null||u===void 0)&&u.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(n,!0),this._currentLink.state.decorations.pointerCursor&&i.classList.add("xterm-cursor-pointer")),n.hover&&n.hover(d,n.text)},r.prototype._fireUnderlineEvent=function(i,n){var d=i.range,u=this._bufferService.buffer.ydisp,m=this._createLinkUnderlineEvent(d.start.x-1,d.start.y-u-1,d.end.x,d.end.y-u-1,void 0);(n?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(m)},r.prototype._linkLeave=function(i,n,d){var u;!((u=this._currentLink)===null||u===void 0)&&u.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(n,!1),this._currentLink.state.decorations.pointerCursor&&i.classList.remove("xterm-cursor-pointer")),n.leave&&n.leave(d,n.text)},r.prototype._linkAtPosition=function(i,n){var d=i.range.start.y===i.range.end.y,u=i.range.start.y<n.y,m=i.range.end.y>n.y;return(d&&i.range.start.x<=n.x&&i.range.end.x>=n.x||u&&i.range.end.x>=n.x||m&&i.range.start.x<=n.x||u&&m)&&i.range.start.y<=n.y&&i.range.end.y>=n.y},r.prototype._positionFromMouseEvent=function(i,n,d){var u=d.getCoords(i,n,this._bufferService.cols,this._bufferService.rows);if(u)return{x:u[0],y:u[1]+this._bufferService.buffer.ydisp}},r.prototype._createLinkUnderlineEvent=function(i,n,d,u,m){return{x1:i,y1:n,x2:d,y2:u,cols:this._bufferService.cols,fg:m}},f([l(0,s.IBufferService)],r)}(h.Disposable);p.Linkifier2=t},9042:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.tooMuchOutput=p.promptLabel=void 0,p.promptLabel="Terminal input",p.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(H,p,w){var c,_=this&&this.__extends||(c=function(a,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},c(a,t)},function(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=a}c(a,t),a.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(a,t,e,r){var i,n=arguments.length,d=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(a,t,e,r);else for(var u=a.length-1;u>=0;u--)(i=a[u])&&(d=(n<3?i(d):n>3?i(t,e,d):i(t,e))||d);return n>3&&d&&Object.defineProperty(t,e,d),d},l=this&&this.__param||function(a,t){return function(e,r){t(e,r,a)}};Object.defineProperty(p,"__esModule",{value:!0}),p.MouseZoneManager=void 0;var g=w(844),v=w(3656),s=w(4725),o=w(2585),h=function(a){function t(e,r,i,n,d,u){var m=a.call(this)||this;return m._element=e,m._screenElement=r,m._bufferService=i,m._mouseService=n,m._selectionService=d,m._optionsService=u,m._zones=[],m._areZonesActive=!1,m._lastHoverCoords=[void 0,void 0],m._initialSelectionLength=0,m.register((0,v.addDisposableDomListener)(m._element,"mousedown",function(S){return m._onMouseDown(S)})),m._mouseMoveListener=function(S){return m._onMouseMove(S)},m._mouseLeaveListener=function(S){return m._onMouseLeave(S)},m._clickListener=function(S){return m._onClick(S)},m}return _(t,a),t.prototype.dispose=function(){a.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},t.prototype.clearAll=function(e,r){if(this._zones.length!==0){e&&r||(e=0,r=this._bufferService.rows-1);for(var i=0;i<this._zones.length;i++){var n=this._zones[i];(n.y1>e&&n.y1<=r+1||n.y2>e&&n.y2<=r+1||n.y1<e&&n.y2>r+1)&&(this._currentZone&&this._currentZone===n&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(i--,1))}this._zones.length===0&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},t.prototype._onHover=function(e){var r=this,i=this._findZoneEventAt(e);i!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),i&&(this._currentZone=i,i.hoverCallback&&i.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return r._onTooltip(e)},this._optionsService.rawOptions.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var r=this._findZoneEventAt(e);r==null||r.tooltipCallback(e)},t.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var r=this._findZoneEventAt(e);r!=null&&r.willLinkActivate(e)&&(e.preventDefault(),e.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(e){var r=this._findZoneEventAt(e),i=this._getSelectionLength();r&&i===this._initialSelectionLength&&(r.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},t.prototype._findZoneEventAt=function(e){var r=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(r)for(var i=r[0],n=r[1],d=0;d<this._zones.length;d++){var u=this._zones[d];if(u.y1===u.y2){if(n===u.y1&&i>=u.x1&&i<u.x2)return u}else if(n===u.y1&&i>=u.x1||n===u.y2&&i<u.x2||n>u.y1&&n<u.y2)return u}},f([l(2,o.IBufferService),l(3,s.IMouseService),l(4,s.ISelectionService),l(5,o.IOptionsService)],t)}(g.Disposable);p.MouseZoneManager=h},6193:function(H,p){var w=this&&this.__values||function(_){var f=typeof Symbol=="function"&&Symbol.iterator,l=f&&_[f],g=0;if(l)return l.call(_);if(_&&typeof _.length=="number")return{next:function(){return _&&g>=_.length&&(_=void 0),{value:_&&_[g++],done:!_}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.RenderDebouncer=void 0;var c=function(){function _(f){this._renderCallback=f,this._refreshCallbacks=[]}return _.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},_.prototype.addRefreshCallback=function(f){var l=this;return this._refreshCallbacks.push(f),this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return l._innerRefresh()})),this._animationFrame},_.prototype.refresh=function(f,l,g){var v=this;this._rowCount=g,f=f!==void 0?f:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,f):f,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return v._innerRefresh()}))},_.prototype._innerRefresh=function(){if(this._animationFrame=void 0,this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var f=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(f,l),this._runRefreshCallbacks()}else this._runRefreshCallbacks()},_.prototype._runRefreshCallbacks=function(){var f,l;try{for(var g=w(this._refreshCallbacks),v=g.next();!v.done;v=g.next())(0,v.value)(0)}catch(s){f={error:s}}finally{try{v&&!v.done&&(l=g.return)&&l.call(g)}finally{if(f)throw f.error}}this._refreshCallbacks=[]},_}();p.RenderDebouncer=c},5596:function(H,p,w){var c,_=this&&this.__extends||(c=function(l,g){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,s){v.__proto__=s}||function(v,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(v[o]=s[o])},c(l,g)},function(l,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function v(){this.constructor=l}c(l,g),l.prototype=g===null?Object.create(g):(v.prototype=g.prototype,new v)});Object.defineProperty(p,"__esModule",{value:!0}),p.ScreenDprMonitor=void 0;var f=function(l){function g(){var v=l!==null&&l.apply(this,arguments)||this;return v._currentDevicePixelRatio=window.devicePixelRatio,v}return _(g,l),g.prototype.setListener=function(v){var s=this;this._listener&&this.clearListener(),this._listener=v,this._outerListener=function(){s._listener&&(s._listener(window.devicePixelRatio,s._currentDevicePixelRatio),s._updateDpr())},this._updateDpr()},g.prototype.dispose=function(){l.prototype.dispose.call(this),this.clearListener()},g.prototype._updateDpr=function(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},g.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},g}(w(844).Disposable);p.ScreenDprMonitor=f},3236:function(H,p,w){var c,_=this&&this.__extends||(c=function(V,q){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,D){O.__proto__=D}||function(O,D){for(var N in D)Object.prototype.hasOwnProperty.call(D,N)&&(O[N]=D[N])},c(V,q)},function(V,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function O(){this.constructor=V}c(V,q),V.prototype=q===null?Object.create(q):(O.prototype=q.prototype,new O)}),f=this&&this.__values||function(V){var q=typeof Symbol=="function"&&Symbol.iterator,O=q&&V[q],D=0;if(O)return O.call(V);if(V&&typeof V.length=="number")return{next:function(){return V&&D>=V.length&&(V=void 0),{value:V&&V[D++],done:!V}}};throw new TypeError(q?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__read||function(V,q){var O=typeof Symbol=="function"&&V[Symbol.iterator];if(!O)return V;var D,N,Z=O.call(V),J=[];try{for(;(q===void 0||q-- >0)&&!(D=Z.next()).done;)J.push(D.value)}catch(Q){N={error:Q}}finally{try{D&&!D.done&&(O=Z.return)&&O.call(Z)}finally{if(N)throw N.error}}return J},g=this&&this.__spreadArray||function(V,q,O){if(O||arguments.length===2)for(var D,N=0,Z=q.length;N<Z;N++)!D&&N in q||(D||(D=Array.prototype.slice.call(q,0,N)),D[N]=q[N]);return V.concat(D||Array.prototype.slice.call(q))};Object.defineProperty(p,"__esModule",{value:!0}),p.Terminal=void 0;var v=w(2950),s=w(1680),o=w(3614),h=w(2584),a=w(5435),t=w(3525),e=w(3551),r=w(9312),i=w(6114),n=w(3656),d=w(9042),u=w(357),m=w(6954),S=w(4567),y=w(1296),b=w(7399),C=w(8460),M=w(8437),L=w(5680),R=w(3230),E=w(4725),x=w(428),A=w(8934),T=w(6465),U=w(5114),z=w(8969),W=w(8055),K=w(4269),G=w(5941),k=w(3107),$=w(5744),Y=w(9074),he=w(2585),B=typeof window<"u"?window.document:null,oe=function(V){function q(O){O===void 0&&(O={});var D=V.call(this,O)||this;return D.browser=i,D._keyDownHandled=!1,D._keyDownSeen=!1,D._keyPressHandled=!1,D._unprocessedDeadKey=!1,D._onCursorMove=new C.EventEmitter,D._onKey=new C.EventEmitter,D._onRender=new C.EventEmitter,D._onSelectionChange=new C.EventEmitter,D._onTitleChange=new C.EventEmitter,D._onBell=new C.EventEmitter,D._onFocus=new C.EventEmitter,D._onBlur=new C.EventEmitter,D._onA11yCharEmitter=new C.EventEmitter,D._onA11yTabEmitter=new C.EventEmitter,D._setup(),D.linkifier=D._instantiationService.createInstance(e.Linkifier),D.linkifier2=D.register(D._instantiationService.createInstance(T.Linkifier2)),D._decorationService=D._instantiationService.createInstance(Y.DecorationService),D._instantiationService.setService(he.IDecorationService,D._decorationService),D.register(D._inputHandler.onRequestBell(function(){return D.bell()})),D.register(D._inputHandler.onRequestRefreshRows(function(N,Z){return D.refresh(N,Z)})),D.register(D._inputHandler.onRequestSendFocus(function(){return D._reportFocus()})),D.register(D._inputHandler.onRequestReset(function(){return D.reset()})),D.register(D._inputHandler.onRequestWindowsOptionsReport(function(N){return D._reportWindowsOptions(N)})),D.register(D._inputHandler.onColor(function(N){return D._handleColorEvent(N)})),D.register((0,C.forwardEvent)(D._inputHandler.onCursorMove,D._onCursorMove)),D.register((0,C.forwardEvent)(D._inputHandler.onTitleChange,D._onTitleChange)),D.register((0,C.forwardEvent)(D._inputHandler.onA11yChar,D._onA11yCharEmitter)),D.register((0,C.forwardEvent)(D._inputHandler.onA11yTab,D._onA11yTabEmitter)),D.register(D._bufferService.onResize(function(N){return D._afterResize(N.cols,N.rows)})),D}return _(q,V),Object.defineProperty(q.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),q.prototype._handleColorEvent=function(O){var D,N,Z,J;if(this._colorManager){try{for(var Q=f(O),fe=Q.next();!fe.done;fe=Q.next()){var Ce=fe.value,be=void 0,X="";switch(Ce.index){case 256:be="foreground",X="10";break;case 257:be="background",X="11";break;case 258:be="cursor",X="12";break;default:be="ansi",X="4;"+Ce.index}if(be)switch(Ce.type){case 0:var Se=W.color.toColorRGB(be==="ansi"?this._colorManager.colors.ansi[Ce.index]:this._colorManager.colors[be]);this.coreService.triggerDataEvent(h.C0.ESC+"]"+X+";"+(0,G.toRgbString)(Se)+h.C1_ESCAPED.ST);break;case 1:be==="ansi"?this._colorManager.colors.ansi[Ce.index]=W.rgba.toColor.apply(W.rgba,g([],l(Ce.color),!1)):this._colorManager.colors[be]=W.rgba.toColor.apply(W.rgba,g([],l(Ce.color),!1));break;case 2:this._colorManager.restoreColor(Ce.index)}}}catch(Ae){D={error:Ae}}finally{try{fe&&!fe.done&&(N=Q.return)&&N.call(Q)}finally{if(D)throw D.error}}(Z=this._renderService)===null||Z===void 0||Z.setColors(this._colorManager.colors),(J=this.viewport)===null||J===void 0||J.onThemeChange(this._colorManager.colors)}},q.prototype.dispose=function(){var O,D,N;this._isDisposed||(V.prototype.dispose.call(this),(O=this._renderService)===null||O===void 0||O.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(N=(D=this.element)===null||D===void 0?void 0:D.parentNode)===null||N===void 0||N.removeChild(this.element))},q.prototype._setup=function(){V.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(q.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),q.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},q.prototype._updateOptions=function(O){var D,N,Z,J;switch(V.prototype._updateOptions.call(this,O),O){case"fontFamily":case"fontSize":(D=this._renderService)===null||D===void 0||D.clear(),(N=this._charSizeService)===null||N===void 0||N.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(Z=this.viewport)===null||Z===void 0||Z.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new S.AccessibilityManager(this,this._renderService)):((J=this._accessibilityManager)===null||J===void 0||J.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},q.prototype._onTextAreaFocus=function(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(h.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},q.prototype.blur=function(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()},q.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(h.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},q.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var O=this.buffer.ybase+this.buffer.y,D=this.buffer.lines.get(O);if(D){var N=Math.min(this.buffer.x,this.cols-1),Z=this._renderService.dimensions.actualCellHeight,J=D.getWidth(N),Q=this._renderService.dimensions.actualCellWidth*J,fe=this.buffer.y*this._renderService.dimensions.actualCellHeight,Ce=N*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=Ce+"px",this.textarea.style.top=fe+"px",this.textarea.style.width=Q+"px",this.textarea.style.height=Z+"px",this.textarea.style.lineHeight=Z+"px",this.textarea.style.zIndex="-5"}}},q.prototype._initGlobal=function(){var O=this;this._bindKeys(),this.register((0,n.addDisposableDomListener)(this.element,"copy",function(N){O.hasSelection()&&(0,o.copyHandler)(N,O._selectionService)}));var D=function(N){return(0,o.handlePasteEvent)(N,O.textarea,O.coreService)};this.register((0,n.addDisposableDomListener)(this.textarea,"paste",D)),this.register((0,n.addDisposableDomListener)(this.element,"paste",D)),i.isFirefox?this.register((0,n.addDisposableDomListener)(this.element,"mousedown",function(N){N.button===2&&(0,o.rightClickHandler)(N,O.textarea,O.screenElement,O._selectionService,O.options.rightClickSelectsWord)})):this.register((0,n.addDisposableDomListener)(this.element,"contextmenu",function(N){(0,o.rightClickHandler)(N,O.textarea,O.screenElement,O._selectionService,O.options.rightClickSelectsWord)})),i.isLinux&&this.register((0,n.addDisposableDomListener)(this.element,"auxclick",function(N){N.button===1&&(0,o.moveTextAreaUnderMouseCursor)(N,O.textarea,O.screenElement)}))},q.prototype._bindKeys=function(){var O=this;this.register((0,n.addDisposableDomListener)(this.textarea,"keyup",function(D){return O._keyUp(D)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"keydown",function(D){return O._keyDown(D)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"keypress",function(D){return O._keyPress(D)},!0)),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionstart",function(){return O._compositionHelper.compositionstart()})),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionupdate",function(D){return O._compositionHelper.compositionupdate(D)})),this.register((0,n.addDisposableDomListener)(this.textarea,"compositionend",function(){return O._compositionHelper.compositionend()})),this.register((0,n.addDisposableDomListener)(this.textarea,"input",function(D){return O._inputEvent(D)},!0)),this.register(this.onRender(function(){return O._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(D){return O._queueLinkification(D.start,D.end)}))},q.prototype.open=function(O){var D=this;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),O.appendChild(this.element);var N=B.createDocumentFragment();this._viewportElement=B.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),N.appendChild(this._viewportElement),this._viewportScrollArea=B.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=B.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=B.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),N.appendChild(this.screenElement),this.textarea=B.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",d.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,n.addDisposableDomListener)(this.textarea,"focus",function(Q){return D._onTextAreaFocus(Q)})),this.register((0,n.addDisposableDomListener)(this.textarea,"blur",function(){return D._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var Z=this._instantiationService.createInstance(U.CoreBrowserService,this.textarea);this._instantiationService.setService(E.ICoreBrowserService,Z),this._charSizeService=this._instantiationService.createInstance(x.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new L.ColorManager(B,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(Q){return D._colorManager.onOptionsChange(Q)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(K.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService);var J=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(R.RenderService,J,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(function(Q){return D._onRender.fire(Q)})),this.onResize(function(Q){return D._renderService.resize(Q.cols,Q.rows)}),this._compositionView=B.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(v.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(N),this._soundService=this._instantiationService.createInstance(u.SoundService),this._instantiationService.setService(E.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(A.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(s.Viewport,function(Q){return D.scrollLines(Q,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return D.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){D._renderService.onCursorMove(),D._syncTextArea()})),this.register(this.onResize(function(){return D._renderService.onResize(D.cols,D.rows)})),this.register(this.onBlur(function(){return D._renderService.onBlur()})),this.register(this.onFocus(function(){return D._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return D.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(r.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(Q){return D.scrollLines(Q.amount,Q.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return D._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(Q){return D._renderService.onSelectionChanged(Q.start,Q.end,Q.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(Q){D.textarea.value=Q,D.textarea.focus(),D.textarea.select()})),this.register(this._onScroll.event(function(Q){D.viewport.syncScrollArea(),D._selectionService.refresh()})),this.register((0,n.addDisposableDomListener)(this._viewportElement,"scroll",function(){return D._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(m.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return D._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(k.BufferDecorationRenderer,this.screenElement)),this.register((0,n.addDisposableDomListener)(this.element,"mousedown",function(Q){return D._selectionService.onMouseDown(Q)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new S.AccessibilityManager(this,this._renderService)),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this._instantiationService.createInstance($.OverviewRulerRenderer,this._viewportElement,this.screenElement)),this.optionsService.onOptionChange(function(){!D._overviewRulerRenderer&&D.options.overviewRulerWidth&&D._viewportElement&&D.screenElement&&(D._overviewRulerRenderer=D._instantiationService.createInstance($.OverviewRulerRenderer,D._viewportElement,D.screenElement))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},q.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(t.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(y.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},q.prototype._setTheme=function(O){var D,N,Z;this._theme=O,(D=this._colorManager)===null||D===void 0||D.setTheme(O),(N=this._renderService)===null||N===void 0||N.setColors(this._colorManager.colors),(Z=this.viewport)===null||Z===void 0||Z.onThemeChange(this._colorManager.colors)},q.prototype.bindMouse=function(){var O=this,D=this,N=this.element;function Z(X){var Se,Ae,He=D._mouseService.getRawByteCoords(X,D.screenElement,D.cols,D.rows);if(!He)return!1;switch(X.overrideType||X.type){case"mousemove":Ae=32,X.buttons===void 0?(Se=3,X.button!==void 0&&(Se=X.button<3?X.button:3)):Se=1&X.buttons?0:4&X.buttons?1:2&X.buttons?2:3;break;case"mouseup":Ae=0,Se=X.button<3?X.button:3;break;case"mousedown":Ae=1,Se=X.button<3?X.button:3;break;case"wheel":if(D.viewport.getLinesScrolled(X)===0)return!1;Ae=X.deltaY<0?0:1,Se=4;break;default:return!1}return!(Ae===void 0||Se===void 0||Se>4)&&D.coreMouseService.triggerMouseEvent({col:He.x-33,row:He.y-33,button:Se,action:Ae,ctrl:X.ctrlKey,alt:X.altKey,shift:X.shiftKey})}var J={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Q=function(X){return Z(X),X.buttons||(O._document.removeEventListener("mouseup",J.mouseup),J.mousedrag&&O._document.removeEventListener("mousemove",J.mousedrag)),O.cancel(X)},fe=function(X){return Z(X),O.cancel(X,!0)},Ce=function(X){X.buttons&&Z(X)},be=function(X){X.buttons||Z(X)};this.register(this.coreMouseService.onProtocolChange(function(X){X?(O.optionsService.rawOptions.logLevel==="debug"&&O._logService.debug("Binding to mouse events:",O.coreMouseService.explainEvents(X)),O.element.classList.add("enable-mouse-events"),O._selectionService.disable()):(O._logService.debug("Unbinding from mouse events."),O.element.classList.remove("enable-mouse-events"),O._selectionService.enable()),8&X?J.mousemove||(N.addEventListener("mousemove",be),J.mousemove=be):(N.removeEventListener("mousemove",J.mousemove),J.mousemove=null),16&X?J.wheel||(N.addEventListener("wheel",fe,{passive:!1}),J.wheel=fe):(N.removeEventListener("wheel",J.wheel),J.wheel=null),2&X?J.mouseup||(J.mouseup=Q):(O._document.removeEventListener("mouseup",J.mouseup),J.mouseup=null),4&X?J.mousedrag||(J.mousedrag=Ce):(O._document.removeEventListener("mousemove",J.mousedrag),J.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,n.addDisposableDomListener)(N,"mousedown",function(X){if(X.preventDefault(),O.focus(),O.coreMouseService.areMouseEventsActive&&!O._selectionService.shouldForceSelection(X))return Z(X),J.mouseup&&O._document.addEventListener("mouseup",J.mouseup),J.mousedrag&&O._document.addEventListener("mousemove",J.mousedrag),O.cancel(X)})),this.register((0,n.addDisposableDomListener)(N,"wheel",function(X){if(!J.wheel){if(!O.buffer.hasScrollback){var Se=O.viewport.getLinesScrolled(X);if(Se===0)return;for(var Ae=h.C0.ESC+(O.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(X.deltaY<0?"A":"B"),He="",Ue=0;Ue<Math.abs(Se);Ue++)He+=Ae;return O.coreService.triggerDataEvent(He,!0),O.cancel(X,!0)}return O.viewport.onWheel(X)?O.cancel(X):void 0}},{passive:!1})),this.register((0,n.addDisposableDomListener)(N,"touchstart",function(X){if(!O.coreMouseService.areMouseEventsActive)return O.viewport.onTouchStart(X),O.cancel(X)},{passive:!0})),this.register((0,n.addDisposableDomListener)(N,"touchmove",function(X){if(!O.coreMouseService.areMouseEventsActive)return O.viewport.onTouchMove(X)?void 0:O.cancel(X)},{passive:!1}))},q.prototype.refresh=function(O,D){var N;(N=this._renderService)===null||N===void 0||N.refreshRows(O,D)},q.prototype._queueLinkification=function(O,D){var N;(N=this.linkifier)===null||N===void 0||N.linkifyRows(O,D)},q.prototype.updateCursorStyle=function(O){var D;!((D=this._selectionService)===null||D===void 0)&&D.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},q.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},q.prototype.scrollLines=function(O,D,N){N===void 0&&(N=0),V.prototype.scrollLines.call(this,O,D,N),this.refresh(0,this.rows-1)},q.prototype.paste=function(O){(0,o.paste)(O,this.textarea,this.coreService)},q.prototype.attachCustomKeyEventHandler=function(O){this._customKeyEventHandler=O},q.prototype.registerLinkMatcher=function(O,D,N){var Z=this.linkifier.registerLinkMatcher(O,D,N);return this.refresh(0,this.rows-1),Z},q.prototype.deregisterLinkMatcher=function(O){this.linkifier.deregisterLinkMatcher(O)&&this.refresh(0,this.rows-1)},q.prototype.registerLinkProvider=function(O){return this.linkifier2.registerLinkProvider(O)},q.prototype.registerCharacterJoiner=function(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var D=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),D},q.prototype.deregisterCharacterJoiner=function(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)},Object.defineProperty(q.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),q.prototype.addMarker=function(O){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)},q.prototype.registerDecoration=function(O){return this._decorationService.registerDecoration(O)},q.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},q.prototype.select=function(O,D,N){this._selectionService.setSelection(O,D,N)},q.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},q.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},q.prototype.clearSelection=function(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()},q.prototype.selectAll=function(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()},q.prototype.selectLines=function(O,D){var N;(N=this._selectionService)===null||N===void 0||N.selectLines(O,D)},q.prototype._keyDown=function(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;var D=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!D&&!this._compositionHelper.keydown(O))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;D||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var N=(0,b.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),N.type===3||N.type===2){var Z=this.rows-1;return this.scrollLines(N.type===2?-Z:Z),this.cancel(O,!0)}return N.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(N.cancel&&this.cancel(O,!0),!N.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(N.key!==h.C0.ETX&&N.key!==h.C0.CR||(this.textarea.value=""),this._onKey.fire({key:N.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(N.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(O,!0))))},q.prototype._isThirdLevelShift=function(O,D){var N=O.isMac&&!this.options.macOptionIsMeta&&D.altKey&&!D.ctrlKey&&!D.metaKey||O.isWindows&&D.altKey&&D.ctrlKey&&!D.metaKey||O.isWindows&&D.getModifierState("AltGraph");return D.type==="keypress"?N:N&&(!D.keyCode||D.keyCode>47)},q.prototype._keyUp=function(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(D){return D.keyCode===16||D.keyCode===17||D.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)},q.prototype._keyPress=function(O){var D;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)D=O.charCode;else if(O.which===null||O.which===void 0)D=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;D=O.which}return!(!D||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(D=String.fromCharCode(D),this._onKey.fire({key:D,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(D,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},q.prototype._inputEvent=function(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var D=O.data;return this.coreService.triggerDataEvent(D,!0),this.cancel(O),!0}return!1},q.prototype.bell=function(){var O;this._soundBell()&&((O=this._soundService)===null||O===void 0||O.playBellSound()),this._onBell.fire()},q.prototype.resize=function(O,D){O!==this.cols||D!==this.rows?V.prototype.resize.call(this,O,D):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},q.prototype._afterResize=function(O,D){var N,Z;(N=this._charSizeService)===null||N===void 0||N.measure(),(Z=this.viewport)===null||Z===void 0||Z.syncScrollArea(!0)},q.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var O=1;O<this.rows;O++)this.buffer.lines.push(this.buffer.getBlankLine(M.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},q.prototype.reset=function(){var O,D;this.options.rows=this.rows,this.options.cols=this.cols;var N=this._customKeyEventHandler;this._setup(),V.prototype.reset.call(this),(O=this._selectionService)===null||O===void 0||O.reset(),this._decorationService.reset(),this._customKeyEventHandler=N,this.refresh(0,this.rows-1),(D=this.viewport)===null||D===void 0||D.syncScrollArea()},q.prototype.clearTextureAtlas=function(){var O;(O=this._renderService)===null||O===void 0||O.clearTextureAtlas()},q.prototype._reportFocus=function(){var O;!((O=this.element)===null||O===void 0)&&O.classList.contains("focus")?this.coreService.triggerDataEvent(h.C0.ESC+"[I"):this.coreService.triggerDataEvent(h.C0.ESC+"[O")},q.prototype._reportWindowsOptions=function(O){if(this._renderService)switch(O){case a.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var D=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),N=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(h.C0.ESC+"[4;"+N+";"+D+"t");break;case a.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var Z=this._renderService.dimensions.scaledCellWidth.toFixed(0),J=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(h.C0.ESC+"[6;"+J+";"+Z+"t")}},q.prototype.cancel=function(O,D){if(this.options.cancelEvents||D)return O.preventDefault(),O.stopPropagation(),!1},q.prototype._visualBell=function(){return!1},q.prototype._soundBell=function(){return this.options.bellStyle==="sound"},q}(z.CoreTerminal);p.Terminal=oe},9924:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.TimeBasedDebouncer=void 0;var w=function(){function c(_,f){f===void 0&&(f=1e3),this._renderCallback=_,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return c.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},c.prototype.refresh=function(_,f,l){var g=this;this._rowCount=l,_=_!==void 0?_:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,_):_,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;var v=Date.now();if(v-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=v,this._innerRefresh();else if(!this._additionalRefreshRequested){var s=v-this._lastRefreshMs,o=this._debounceThresholdMS-s;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){g._lastRefreshMs=Date.now(),g._innerRefresh(),g._additionalRefreshRequested=!1,g._refreshTimeoutID=void 0},o)}},c.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var _=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(_,f)}},c}();p.TimeBasedDebouncer=w},1680:function(H,p,w){var c,_=this&&this.__extends||(c=function(a,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},c(a,t)},function(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=a}c(a,t),a.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(a,t,e,r){var i,n=arguments.length,d=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(a,t,e,r);else for(var u=a.length-1;u>=0;u--)(i=a[u])&&(d=(n<3?i(d):n>3?i(t,e,d):i(t,e))||d);return n>3&&d&&Object.defineProperty(t,e,d),d},l=this&&this.__param||function(a,t){return function(e,r){t(e,r,a)}};Object.defineProperty(p,"__esModule",{value:!0}),p.Viewport=void 0;var g=w(844),v=w(3656),s=w(4725),o=w(2585),h=function(a){function t(e,r,i,n,d,u,m,S){var y=a.call(this)||this;return y._scrollLines=e,y._viewportElement=r,y._scrollArea=i,y._element=n,y._bufferService=d,y._optionsService=u,y._charSizeService=m,y._renderService=S,y.scrollBarWidth=0,y._currentRowHeight=0,y._currentScaledCellHeight=0,y._lastRecordedBufferLength=0,y._lastRecordedViewportHeight=0,y._lastRecordedBufferHeight=0,y._lastTouchY=0,y._lastScrollTop=0,y._wheelPartialScroll=0,y._refreshAnimationFrame=null,y._ignoreNextScrollEvent=!1,y.scrollBarWidth=y._viewportElement.offsetWidth-y._scrollArea.offsetWidth||15,y.register((0,v.addDisposableDomListener)(y._viewportElement,"scroll",y._onScroll.bind(y))),y._activeBuffer=y._bufferService.buffer,y.register(y._bufferService.buffers.onBufferActivate(function(b){return y._activeBuffer=b.activeBuffer})),y._renderDimensions=y._renderService.dimensions,y.register(y._renderService.onDimensionsChange(function(b){return y._renderDimensions=b})),setTimeout(function(){return y.syncScrollArea()},0),y}return _(t,a),t.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},t.prototype._refresh=function(e){var r=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return r._innerRefresh()}))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var r=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==r&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=r),this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight||this._refresh(e)},t.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var r=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(r)}},t.prototype._bubbleScroll=function(e,r){var i=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(r<0&&this._viewportElement.scrollTop!==0||r>0&&i<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},t.prototype.onWheel=function(e){var r=this._getPixelsScrolled(e);return r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(e,r))},t.prototype._getPixelsScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?r*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._currentRowHeight*this._bufferService.rows),r},t.prototype.getLinesScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=this._currentRowHeight+0,this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r},t.prototype._applyScrollModifier=function(e,r){var i=this._optionsService.rawOptions.fastScrollModifier;return i==="alt"&&r.altKey||i==="ctrl"&&r.ctrlKey||i==="shift"&&r.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity},t.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},t.prototype.onTouchMove=function(e){var r=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(e,r))},f([l(4,o.IBufferService),l(5,o.IOptionsService),l(6,s.ICharSizeService),l(7,s.IRenderService)],t)}(g.Disposable);p.Viewport=h},3107:function(H,p,w){var c,_=this&&this.__extends||(c=function(t,e){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},c(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}c(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}),f=this&&this.__decorate||function(t,e,r,i){var n,d=arguments.length,u=d<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(t,e,r,i);else for(var m=t.length-1;m>=0;m--)(n=t[m])&&(u=(d<3?n(u):d>3?n(e,r,u):n(e,r))||u);return d>3&&u&&Object.defineProperty(e,r,u),u},l=this&&this.__param||function(t,e){return function(r,i){e(r,i,t)}},g=this&&this.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.BufferDecorationRenderer=void 0;var v=w(3656),s=w(4725),o=w(844),h=w(2585),a=function(t){function e(r,i,n,d){var u=t.call(this)||this;return u._screenElement=r,u._bufferService=i,u._decorationService=n,u._renderService=d,u._decorationElements=new Map,u._altBufferIsActive=!1,u._dimensionsChanged=!1,u._container=document.createElement("div"),u._container.classList.add("xterm-decoration-container"),u._screenElement.appendChild(u._container),u.register(u._renderService.onRenderedViewportChange(function(){return u._queueRefresh()})),u.register(u._renderService.onDimensionsChange(function(){u._dimensionsChanged=!0,u._queueRefresh()})),u.register((0,v.addDisposableDomListener)(window,"resize",function(){return u._queueRefresh()})),u.register(u._bufferService.buffers.onBufferActivate(function(){u._altBufferIsActive=u._bufferService.buffer===u._bufferService.buffers.alt})),u.register(u._decorationService.onDecorationRegistered(function(){return u._queueRefresh()})),u.register(u._decorationService.onDecorationRemoved(function(m){return u._removeDecoration(m)})),u}return _(e,t),e.prototype.dispose=function(){this._container.remove(),this._decorationElements.clear(),t.prototype.dispose.call(this)},e.prototype._queueRefresh=function(){var r=this;this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(function(){r.refreshDecorations(),r._animationFrame=void 0}))},e.prototype.refreshDecorations=function(){var r,i;try{for(var n=g(this._decorationService.decorations),d=n.next();!d.done;d=n.next()){var u=d.value;this._renderDecoration(u)}}catch(m){r={error:m}}finally{try{d&&!d.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}this._dimensionsChanged=!1},e.prototype._renderDecoration=function(r){this._refreshStyle(r),this._dimensionsChanged&&this._refreshXPosition(r)},e.prototype._createElement=function(r){var i,n=document.createElement("div");n.classList.add("xterm-decoration"),n.style.width=Math.round((r.options.width||1)*this._renderService.dimensions.actualCellWidth)+"px",n.style.height=(r.options.height||1)*this._renderService.dimensions.actualCellHeight+"px",n.style.top=(r.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.actualCellHeight+"px",n.style.lineHeight=this._renderService.dimensions.actualCellHeight+"px";var d=(i=r.options.x)!==null&&i!==void 0?i:0;return d&&d>this._bufferService.cols&&(n.style.display="none"),this._refreshXPosition(r,n),n},e.prototype._refreshStyle=function(r){var i=this,n=r.marker.line-this._bufferService.buffers.active.ydisp;if(n<0||n>=this._bufferService.rows)r.element&&(r.element.style.display="none",r.onRenderEmitter.fire(r.element));else{var d=this._decorationElements.get(r);d||(r.onDispose(function(){return i._removeDecoration(r)}),d=this._createElement(r),r.element=d,this._decorationElements.set(r,d),this._container.appendChild(d)),d.style.top=n*this._renderService.dimensions.actualCellHeight+"px",d.style.display=this._altBufferIsActive?"none":"block",r.onRenderEmitter.fire(d)}},e.prototype._refreshXPosition=function(r,i){var n;if(i===void 0&&(i=r.element),i){var d=(n=r.options.x)!==null&&n!==void 0?n:0;(r.options.anchor||"left")==="right"?i.style.right=d?d*this._renderService.dimensions.actualCellWidth+"px":"":i.style.left=d?d*this._renderService.dimensions.actualCellWidth+"px":""}},e.prototype._removeDecoration=function(r){var i;(i=this._decorationElements.get(r))===null||i===void 0||i.remove(),this._decorationElements.delete(r)},f([l(1,h.IBufferService),l(2,h.IDecorationService),l(3,s.IRenderService)],e)}(o.Disposable);p.BufferDecorationRenderer=a},5871:function(H,p){var w=this&&this.__values||function(_){var f=typeof Symbol=="function"&&Symbol.iterator,l=f&&_[f],g=0;if(l)return l.call(_);if(_&&typeof _.length=="number")return{next:function(){return _&&g>=_.length&&(_=void 0),{value:_&&_[g++],done:!_}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.ColorZoneStore=void 0;var c=function(){function _(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}return Object.defineProperty(_.prototype,"zones",{get:function(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones},enumerable:!1,configurable:!0}),_.prototype.clear=function(){this._zones.length=0,this._zonePoolIndex=0},_.prototype.addDecoration=function(f){var l,g;if(f.options.overviewRulerOptions){try{for(var v=w(this._zones),s=v.next();!s.done;s=v.next()){var o=s.value;if(o.color===f.options.overviewRulerOptions.color&&o.position===f.options.overviewRulerOptions.position){if(this._lineIntersectsZone(o,f.marker.line))return;if(this._lineAdjacentToZone(o,f.marker.line,f.options.overviewRulerOptions.position))return void this._addLineToZone(o,f.marker.line)}}}catch(h){l={error:h}}finally{try{s&&!s.done&&(g=v.return)&&g.call(v)}finally{if(l)throw l.error}}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=f.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=f.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=f.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=f.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:f.options.overviewRulerOptions.color,position:f.options.overviewRulerOptions.position,startBufferLine:f.marker.line,endBufferLine:f.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}},_.prototype.setPadding=function(f){this._linePadding=f},_.prototype._lineIntersectsZone=function(f,l){return l>=f.startBufferLine&&l<=f.endBufferLine},_.prototype._lineAdjacentToZone=function(f,l,g){return l>=f.startBufferLine-this._linePadding[g||"full"]&&l<=f.endBufferLine+this._linePadding[g||"full"]},_.prototype._addLineToZone=function(f,l){f.startBufferLine=Math.min(f.startBufferLine,l),f.endBufferLine=Math.max(f.endBufferLine,l)},_}();p.ColorZoneStore=c},5744:function(H,p,w){var c,_=this&&this.__extends||(c=function(n,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(u[S]=m[S])},c(n,d)},function(n,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=n}c(n,d),n.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}),f=this&&this.__decorate||function(n,d,u,m){var S,y=arguments.length,b=y<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,u):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(n,d,u,m);else for(var C=n.length-1;C>=0;C--)(S=n[C])&&(b=(y<3?S(b):y>3?S(d,u,b):S(d,u))||b);return y>3&&b&&Object.defineProperty(d,u,b),b},l=this&&this.__param||function(n,d){return function(u,m){d(u,m,n)}},g=this&&this.__values||function(n){var d=typeof Symbol=="function"&&Symbol.iterator,u=d&&n[d],m=0;if(u)return u.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&m>=n.length&&(n=void 0),{value:n&&n[m++],done:!n}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.OverviewRulerRenderer=void 0;var v=w(5871),s=w(3656),o=w(4725),h=w(844),a=w(2585),t={full:0,left:0,center:0,right:0},e={full:0,left:0,center:0,right:0},r={full:0,left:0,center:0,right:0},i=function(n){function d(u,m,S,y,b,C){var M,L=n.call(this)||this;L._viewportElement=u,L._screenElement=m,L._bufferService=S,L._decorationService=y,L._renderService=b,L._optionsService=C,L._colorZoneStore=new v.ColorZoneStore,L._shouldUpdateDimensions=!0,L._shouldUpdateAnchor=!0,L._lastKnownBufferLength=0,L._canvas=document.createElement("canvas"),L._canvas.classList.add("xterm-decoration-overview-ruler"),L._refreshCanvasDimensions(),(M=L._viewportElement.parentElement)===null||M===void 0||M.insertBefore(L._canvas,L._viewportElement);var R=L._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");return L._ctx=R,L._registerDecorationListeners(),L._registerBufferChangeListeners(),L._registerDimensionChangeListeners(),L}return _(d,n),Object.defineProperty(d.prototype,"_width",{get:function(){return this._optionsService.options.overviewRulerWidth||0},enumerable:!1,configurable:!0}),d.prototype._registerDecorationListeners=function(){var u=this;this.register(this._decorationService.onDecorationRegistered(function(){return u._queueRefresh(void 0,!0)})),this.register(this._decorationService.onDecorationRemoved(function(){return u._queueRefresh(void 0,!0)}))},d.prototype._registerBufferChangeListeners=function(){var u=this;this.register(this._renderService.onRenderedViewportChange(function(){return u._queueRefresh()})),this.register(this._bufferService.buffers.onBufferActivate(function(){u._canvas.style.display=u._bufferService.buffer===u._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(function(){u._lastKnownBufferLength!==u._bufferService.buffers.normal.lines.length&&(u._refreshDrawHeightConstants(),u._refreshColorZonePadding())}))},d.prototype._registerDimensionChangeListeners=function(){var u=this;this.register(this._renderService.onRender(function(){u._containerHeight&&u._containerHeight===u._screenElement.clientHeight||(u._queueRefresh(!0),u._containerHeight=u._screenElement.clientHeight)})),this.register(this._optionsService.onOptionChange(function(m){m==="overviewRulerWidth"&&u._queueRefresh(!0)})),this.register((0,s.addDisposableDomListener)(window,"resize",function(){u._queueRefresh(!0)})),this._queueRefresh(!0)},d.prototype.dispose=function(){var u;(u=this._canvas)===null||u===void 0||u.remove(),n.prototype.dispose.call(this)},d.prototype._refreshDrawConstants=function(){var u=Math.floor(this._canvas.width/3),m=Math.ceil(this._canvas.width/3);e.full=this._canvas.width,e.left=u,e.center=m,e.right=u,this._refreshDrawHeightConstants(),r.full=0,r.left=0,r.center=e.left,r.right=e.left+e.center},d.prototype._refreshDrawHeightConstants=function(){t.full=Math.round(2*window.devicePixelRatio);var u=this._canvas.height/this._bufferService.buffer.lines.length,m=Math.round(Math.max(Math.min(u,12),6)*window.devicePixelRatio);t.left=m,t.center=m,t.right=m},d.prototype._refreshColorZonePadding=function(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length},d.prototype._refreshCanvasDimensions=function(){this._canvas.style.width=this._width+"px",this._canvas.width=Math.round(this._width*window.devicePixelRatio),this._canvas.style.height=this._screenElement.clientHeight+"px",this._canvas.height=Math.round(this._screenElement.clientHeight*window.devicePixelRatio),this._refreshDrawConstants(),this._refreshColorZonePadding()},d.prototype._refreshDecorations=function(){var u,m,S,y,b,C;this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();try{for(var M=g(this._decorationService.decorations),L=M.next();!L.done;L=M.next()){var R=L.value;this._colorZoneStore.addDecoration(R)}}catch(W){u={error:W}}finally{try{L&&!L.done&&(m=M.return)&&m.call(M)}finally{if(u)throw u.error}}this._ctx.lineWidth=1;var E=this._colorZoneStore.zones;try{for(var x=g(E),A=x.next();!A.done;A=x.next())(z=A.value).position!=="full"&&this._renderColorZone(z)}catch(W){S={error:W}}finally{try{A&&!A.done&&(y=x.return)&&y.call(x)}finally{if(S)throw S.error}}try{for(var T=g(E),U=T.next();!U.done;U=T.next()){var z;(z=U.value).position==="full"&&this._renderColorZone(z)}}catch(W){b={error:W}}finally{try{U&&!U.done&&(C=T.return)&&C.call(T)}finally{if(b)throw b.error}}this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1},d.prototype._renderColorZone=function(u){this._ctx.fillStyle=u.color,this._ctx.fillRect(r[u.position||"full"],Math.round((this._canvas.height-1)*(u.startBufferLine/this._bufferService.buffers.active.lines.length)-t[u.position||"full"]/2),e[u.position||"full"],Math.round((this._canvas.height-1)*((u.endBufferLine-u.startBufferLine)/this._bufferService.buffers.active.lines.length)+t[u.position||"full"]))},d.prototype._queueRefresh=function(u,m){var S=this;this._shouldUpdateDimensions=u||this._shouldUpdateDimensions,this._shouldUpdateAnchor=m||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=window.requestAnimationFrame(function(){S._refreshDecorations(),S._animationFrame=void 0}))},f([l(2,a.IBufferService),l(3,a.IDecorationService),l(4,o.IRenderService),l(5,a.IOptionsService)],d)}(h.Disposable);p.OverviewRulerRenderer=i},2950:function(H,p,w){var c=this&&this.__decorate||function(v,s,o,h){var a,t=arguments.length,e=t<3?s:h===null?h=Object.getOwnPropertyDescriptor(s,o):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(v,s,o,h);else for(var r=v.length-1;r>=0;r--)(a=v[r])&&(e=(t<3?a(e):t>3?a(s,o,e):a(s,o))||e);return t>3&&e&&Object.defineProperty(s,o,e),e},_=this&&this.__param||function(v,s){return function(o,h){s(o,h,v)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CompositionHelper=void 0;var f=w(4725),l=w(2585),g=function(){function v(s,o,h,a,t,e){this._textarea=s,this._compositionView=o,this._bufferService=h,this._optionsService=a,this._coreService=t,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(v.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),v.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},v.prototype.compositionupdate=function(s){var o=this;this._compositionView.textContent=s.data,this.updateCompositionElements(),setTimeout(function(){o._compositionPosition.end=o._textarea.value.length},0)},v.prototype.compositionend=function(){this._finalizeComposition(!0)},v.prototype.keydown=function(s){if(this._isComposing||this._isSendingComposition){if(s.keyCode===229||s.keyCode===16||s.keyCode===17||s.keyCode===18)return!1;this._finalizeComposition(!1)}return s.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},v.prototype._finalizeComposition=function(s){var o=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,s){var h={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(o._isSendingComposition){o._isSendingComposition=!1;var t;h.start+=o._dataAlreadySent.length,(t=o._isComposing?o._textarea.value.substring(h.start,h.end):o._textarea.value.substring(h.start)).length>0&&o._coreService.triggerDataEvent(t,!0)}},0)}else{this._isSendingComposition=!1;var a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(a,!0)}},v.prototype._handleAnyTextareaChanges=function(){var s=this,o=this._textarea.value;setTimeout(function(){if(!s._isComposing){var h=s._textarea.value.replace(o,"");h.length>0&&(s._dataAlreadySent=h,s._coreService.triggerDataEvent(h,!0))}},0)},v.prototype.updateCompositionElements=function(s){var o=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var h=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),a=this._renderService.dimensions.actualCellHeight,t=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=h*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=t+"px",this._compositionView.style.height=a+"px",this._compositionView.style.lineHeight=a+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var r=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=t+"px",this._textarea.style.width=Math.max(r.width,1)+"px",this._textarea.style.height=Math.max(r.height,1)+"px",this._textarea.style.lineHeight=r.height+"px"}s||setTimeout(function(){return o.updateCompositionElements(!0)},0)}},c([_(2,l.IBufferService),_(3,l.IOptionsService),_(4,l.ICoreService),_(5,f.IRenderService)],v)}();p.CompositionHelper=g},9806:(H,p)=>{function w(c,_,f){var l=f.getBoundingClientRect(),g=c.getComputedStyle(f),v=parseInt(g.getPropertyValue("padding-left")),s=parseInt(g.getPropertyValue("padding-top"));return[_.clientX-l.left-v,_.clientY-l.top-s]}Object.defineProperty(p,"__esModule",{value:!0}),p.getRawByteCoords=p.getCoords=p.getCoordsRelativeToElement=void 0,p.getCoordsRelativeToElement=w,p.getCoords=function(c,_,f,l,g,v,s,o,h){if(v){var a=w(c,_,f);if(a)return a[0]=Math.ceil((a[0]+(h?s/2:0))/s),a[1]=Math.ceil(a[1]/o),a[0]=Math.min(Math.max(a[0],1),l+(h?1:0)),a[1]=Math.min(Math.max(a[1],1),g),a}},p.getRawByteCoords=function(c){if(c)return{x:c[0]+32,y:c[1]+32}}},9504:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.moveToCellSequence=void 0;var c=w(2584);function _(o,h,a,t){var e=o-f(a,o),r=h-f(a,h),i=Math.abs(e-r)-function(n,d,u){for(var m=0,S=n-f(u,n),y=d-f(u,d),b=0;b<Math.abs(S-y);b++){var C=l(n,d)==="A"?-1:1,M=u.buffer.lines.get(S+C*b);M!=null&&M.isWrapped&&m++}return m}(o,h,a);return s(i,v(l(o,h),t))}function f(o,h){for(var a=0,t=o.buffer.lines.get(h),e=t==null?void 0:t.isWrapped;e&&h>=0&&h<o.rows;)a++,e=(t=o.buffer.lines.get(--h))==null?void 0:t.isWrapped;return a}function l(o,h){return o>h?"A":"B"}function g(o,h,a,t,e,r){for(var i=o,n=h,d="";i!==a||n!==t;)i+=e?1:-1,e&&i>r.cols-1?(d+=r.buffer.translateBufferLineToString(n,!1,o,i),i=0,o=0,n++):!e&&i<0&&(d+=r.buffer.translateBufferLineToString(n,!1,0,o+1),o=i=r.cols-1,n--);return d+r.buffer.translateBufferLineToString(n,!1,o,i)}function v(o,h){var a=h?"O":"[";return c.C0.ESC+a+o}function s(o,h){o=Math.floor(o);for(var a="",t=0;t<o;t++)a+=h;return a}p.moveToCellSequence=function(o,h,a,t){var e,r=a.buffer.x,i=a.buffer.y;if(!a.buffer.hasScrollback)return function(d,u,m,S,y,b){return _(u,S,y,b).length===0?"":s(g(d,u,d,u-f(y,u),!1,y).length,v("D",b))}(r,i,0,h,a,t)+_(i,h,a,t)+function(d,u,m,S,y,b){var C;C=_(u,S,y,b).length>0?S-f(y,S):u;var M=S,L=function(R,E,x,A,T,U){var z;return z=_(x,A,T,U).length>0?A-f(T,A):E,R<x&&z<=A||R>=x&&z<A?"C":"D"}(d,u,m,S,y,b);return s(g(d,C,m,M,L==="C",y).length,v(L,b))}(r,i,o,h,a,t);if(i===h)return e=r>o?"D":"C",s(Math.abs(r-o),v(e,t));e=i>h?"D":"C";var n=Math.abs(i-h);return s(function(d,u){return u.cols-d}(i>h?o:r,a)+(n-1)*a.cols+1+((i>h?r:o)-1),v(e,t))}},4389:function(H,p,w){var c=this&&this.__assign||function(){return c=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},c.apply(this,arguments)},_=this&&this.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.Terminal=void 0;var f=w(3236),l=w(9042),g=w(7975),v=w(7090),s=w(5741),o=w(8285),h=["cols","rows"],a=function(){function t(e){var r=this;this._core=new f.Terminal(e),this._addonManager=new s.AddonManager,this._publicOptions=c({},this._core.options);var i=function(m){return r._core.options[m]},n=function(m,S){r._checkReadonlyOptions(m),r._core.options[m]=S};for(var d in this._core.options){var u={get:i.bind(this,d),set:n.bind(this,d)};Object.defineProperty(this._publicOptions,d,u)}}return t.prototype._checkReadonlyOptions=function(e){if(h.includes(e))throw new Error('Option "'+e+'" can only be set in the constructor')},t.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(t.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onWriteParsed",{get:function(){return this._core.onWriteParsed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new g.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unicode",{get:function(){return this._checkProposedApi(),new v.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new o.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modes",{get:function(){var e=this._core.coreService.decPrivateModes,r="none";switch(this._core.coreMouseService.activeProtocol){case"X10":r="x10";break;case"VT200":r="vt200";break;case"DRAG":r="drag";break;case"ANY":r="any"}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:r,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._publicOptions},set:function(e){for(var r in e)this._publicOptions[r]=e[r]},enumerable:!1,configurable:!0}),t.prototype.blur=function(){this._core.blur()},t.prototype.focus=function(){this._core.focus()},t.prototype.resize=function(e,r){this._verifyIntegers(e,r),this._core.resize(e,r)},t.prototype.open=function(e){this._core.open(e)},t.prototype.attachCustomKeyEventHandler=function(e){this._core.attachCustomKeyEventHandler(e)},t.prototype.registerLinkMatcher=function(e,r,i){return this._checkProposedApi(),this._core.registerLinkMatcher(e,r,i)},t.prototype.deregisterLinkMatcher=function(e){this._checkProposedApi(),this._core.deregisterLinkMatcher(e)},t.prototype.registerLinkProvider=function(e){return this._checkProposedApi(),this._core.registerLinkProvider(e)},t.prototype.registerCharacterJoiner=function(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)},t.prototype.deregisterCharacterJoiner=function(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)},t.prototype.registerMarker=function(e){return e===void 0&&(e=0),this._checkProposedApi(),this._verifyIntegers(e),this._core.addMarker(e)},t.prototype.registerDecoration=function(e){var r,i,n;return this._checkProposedApi(),this._verifyPositiveIntegers((r=e.x)!==null&&r!==void 0?r:0,(i=e.width)!==null&&i!==void 0?i:0,(n=e.height)!==null&&n!==void 0?n:0),this._core.registerDecoration(e)},t.prototype.addMarker=function(e){return this.registerMarker(e)},t.prototype.hasSelection=function(){return this._core.hasSelection()},t.prototype.select=function(e,r,i){this._verifyIntegers(e,r,i),this._core.select(e,r,i)},t.prototype.getSelection=function(){return this._core.getSelection()},t.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},t.prototype.clearSelection=function(){this._core.clearSelection()},t.prototype.selectAll=function(){this._core.selectAll()},t.prototype.selectLines=function(e,r){this._verifyIntegers(e,r),this._core.selectLines(e,r)},t.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},t.prototype.scrollLines=function(e){this._verifyIntegers(e),this._core.scrollLines(e)},t.prototype.scrollPages=function(e){this._verifyIntegers(e),this._core.scrollPages(e)},t.prototype.scrollToTop=function(){this._core.scrollToTop()},t.prototype.scrollToBottom=function(){this._core.scrollToBottom()},t.prototype.scrollToLine=function(e){this._verifyIntegers(e),this._core.scrollToLine(e)},t.prototype.clear=function(){this._core.clear()},t.prototype.write=function(e,r){this._core.write(e,r)},t.prototype.writeUtf8=function(e,r){this._core.write(e,r)},t.prototype.writeln=function(e,r){this._core.write(e),this._core.write(`\r
`,r)},t.prototype.paste=function(e){this._core.paste(e)},t.prototype.getOption=function(e){return this._core.optionsService.getOption(e)},t.prototype.setOption=function(e,r){this._checkReadonlyOptions(e),this._core.optionsService.setOption(e,r)},t.prototype.refresh=function(e,r){this._verifyIntegers(e,r),this._core.refresh(e,r)},t.prototype.reset=function(){this._core.reset()},t.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},t.prototype.loadAddon=function(e){return this._addonManager.loadAddon(this,e)},Object.defineProperty(t,"strings",{get:function(){return l},enumerable:!1,configurable:!0}),t.prototype._verifyIntegers=function(){for(var e,r,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];try{for(var d=_(i),u=d.next();!u.done;u=d.next()){var m=u.value;if(m===1/0||isNaN(m)||m%1!=0)throw new Error("This API only accepts integers")}}catch(S){e={error:S}}finally{try{u&&!u.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}},t.prototype._verifyPositiveIntegers=function(){for(var e,r,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];try{for(var d=_(i),u=d.next();!u.done;u=d.next()){var m=u.value;if(m&&(m===1/0||isNaN(m)||m%1!=0||m<0))throw new Error("This API only accepts positive integers")}}catch(S){e={error:S}}finally{try{u&&!u.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}},t}();p.Terminal=a},1546:function(H,p,w){var c=this&&this.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.BaseRenderLayer=void 0;var _=w(643),f=w(8803),l=w(1420),g=w(3734),v=w(1752),s=w(8055),o=w(9631),h=w(8978),a=function(){function t(e,r,i,n,d,u,m,S,y){this._container=e,this._alpha=n,this._colors=d,this._rendererId=u,this._bufferService=m,this._optionsService=S,this._decorationService=y,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._columnSelectMode=!1,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+r+"-layer"),this._canvas.style.zIndex=i.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return t.prototype.dispose=function(){var e;(0,o.removeElementFromParent)(this._canvas),(e=this._charAtlas)===null||e===void 0||e.dispose()},t.prototype._initCanvas=function(){this._ctx=(0,v.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},t.prototype.onOptionsChanged=function(){},t.prototype.onBlur=function(){},t.prototype.onFocus=function(){},t.prototype.onCursorMove=function(){},t.prototype.onGridChanged=function(e,r){},t.prototype.onSelectionChanged=function(e,r,i){i===void 0&&(i=!1),this._selectionStart=e,this._selectionEnd=r,this._columnSelectMode=i},t.prototype.setColors=function(e){this._refreshCharAtlas(e)},t.prototype._setTransparency=function(e){if(e!==this._alpha){var r=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,r),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},t.prototype._refreshCharAtlas=function(e){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,l.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,e,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},t.prototype.resize=function(e){this._scaledCellWidth=e.scaledCellWidth,this._scaledCellHeight=e.scaledCellHeight,this._scaledCharWidth=e.scaledCharWidth,this._scaledCharHeight=e.scaledCharHeight,this._scaledCharLeft=e.scaledCharLeft,this._scaledCharTop=e.scaledCharTop,this._canvas.width=e.scaledCanvasWidth,this._canvas.height=e.scaledCanvasHeight,this._canvas.style.width=e.canvasWidth+"px",this._canvas.style.height=e.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},t.prototype.clearTextureAtlas=function(){var e;(e=this._charAtlas)===null||e===void 0||e.clear()},t.prototype._fillCells=function(e,r,i,n){this._ctx.fillRect(e*this._scaledCellWidth,r*this._scaledCellHeight,i*this._scaledCellWidth,n*this._scaledCellHeight)},t.prototype._fillMiddleLineAtCells=function(e,r,i){i===void 0&&(i=1);var n=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(e*this._scaledCellWidth,(r+1)*this._scaledCellHeight-n-window.devicePixelRatio,i*this._scaledCellWidth,window.devicePixelRatio)},t.prototype._fillBottomLineAtCells=function(e,r,i){i===void 0&&(i=1),this._ctx.fillRect(e*this._scaledCellWidth,(r+1)*this._scaledCellHeight-window.devicePixelRatio-1,i*this._scaledCellWidth,window.devicePixelRatio)},t.prototype._fillLeftLineAtCell=function(e,r,i){this._ctx.fillRect(e*this._scaledCellWidth,r*this._scaledCellHeight,window.devicePixelRatio*i,this._scaledCellHeight)},t.prototype._strokeRectAtCell=function(e,r,i,n){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(e*this._scaledCellWidth+window.devicePixelRatio/2,r*this._scaledCellHeight+window.devicePixelRatio/2,i*this._scaledCellWidth-window.devicePixelRatio,n*this._scaledCellHeight-window.devicePixelRatio)},t.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},t.prototype._clearCells=function(e,r,i,n){this._alpha?this._ctx.clearRect(e*this._scaledCellWidth,r*this._scaledCellHeight,i*this._scaledCellWidth,n*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(e*this._scaledCellWidth,r*this._scaledCellHeight,i*this._scaledCellWidth,n*this._scaledCellHeight))},t.prototype._fillCharTrueColor=function(e,r,i){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=f.TEXT_BASELINE,this._clipRow(i);var n=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(n=(0,h.tryDrawCustomChar)(this._ctx,e.getChars(),r*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),n||this._ctx.fillText(e.getChars(),r*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},t.prototype._drawChars=function(e,r,i){var n,d,u,m=this._getContrastColor(e,r,i);if(m||e.isFgRGB()||e.isBgRGB())this._drawUncachedChars(e,r,i,m);else{var S,y;e.isInverse()?(S=e.isBgDefault()?f.INVERTED_DEFAULT_COLOR:e.getBgColor(),y=e.isFgDefault()?f.INVERTED_DEFAULT_COLOR:e.getFgColor()):(y=e.isBgDefault()?_.DEFAULT_COLOR:e.getBgColor(),S=e.isFgDefault()?_.DEFAULT_COLOR:e.getFgColor()),S+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&S<8?8:0,this._currentGlyphIdentifier.chars=e.getChars()||_.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=e.getCode()||_.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=y,this._currentGlyphIdentifier.fg=S,this._currentGlyphIdentifier.bold=!!e.isBold(),this._currentGlyphIdentifier.dim=!!e.isDim(),this._currentGlyphIdentifier.italic=!!e.isItalic();var b=!1;try{for(var C=c(this._decorationService.getDecorationsAtCell(r,i)),M=C.next();!M.done;M=C.next()){var L=M.value;if(L.backgroundColorRGB||L.foregroundColorRGB){b=!0;break}}}catch(R){n={error:R}}finally{try{M&&!M.done&&(d=C.return)&&d.call(C)}finally{if(n)throw n.error}}!b&&((u=this._charAtlas)===null||u===void 0?void 0:u.draw(this._ctx,this._currentGlyphIdentifier,r*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(e,r,i)}},t.prototype._drawUncachedChars=function(e,r,i,n){if(this._ctx.save(),this._ctx.font=this._getFont(!!e.isBold(),!!e.isItalic()),this._ctx.textBaseline=f.TEXT_BASELINE,e.isInverse())if(n)this._ctx.fillStyle=n.css;else if(e.isBgDefault())this._ctx.fillStyle=s.color.opaque(this._colors.background).css;else if(e.isBgRGB())this._ctx.fillStyle="rgb("+g.AttributeData.toColorRGB(e.getBgColor()).join(",")+")";else{var d=e.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&d<8&&(d+=8),this._ctx.fillStyle=this._colors.ansi[d].css}else if(n)this._ctx.fillStyle=n.css;else if(e.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(e.isFgRGB())this._ctx.fillStyle="rgb("+g.AttributeData.toColorRGB(e.getFgColor()).join(",")+")";else{var u=e.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&u<8&&(u+=8),this._ctx.fillStyle=this._colors.ansi[u].css}this._clipRow(i),e.isDim()&&(this._ctx.globalAlpha=f.DIM_OPACITY);var m=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(m=(0,h.tryDrawCustomChar)(this._ctx,e.getChars(),r*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),m||this._ctx.fillText(e.getChars(),r*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},t.prototype._clipRow=function(e){this._ctx.beginPath(),this._ctx.rect(0,e*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},t.prototype._getFont=function(e,r){return(r?"italic":"")+" "+(e?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},t.prototype._getContrastColor=function(e,r,i){var n,d,u,m,S=!1;try{for(var y=c(this._decorationService.getDecorationsAtCell(r,i)),b=y.next();!b.done;b=y.next()){var C=b.value;C.options.layer!=="top"&&S||(C.backgroundColorRGB&&(u=C.backgroundColorRGB.rgba),C.foregroundColorRGB&&(m=C.foregroundColorRGB.rgba),S=C.options.layer==="top")}}catch($){n={error:$}}finally{try{b&&!b.done&&(d=y.return)&&d.call(y)}finally{if(n)throw n.error}}if(S||this._colors.selectionForeground&&this._isCellInSelection(r,i)&&(m=this._colors.selectionForeground.rgba),u||m||this._optionsService.rawOptions.minimumContrastRatio!==1&&!(0,v.excludeFromContrastRatioDemands)(e.getCode())){if(!u&&!m){var M=this._colors.contrastCache.getColor(e.bg,e.fg);if(M!==void 0)return M||void 0}var L=e.getFgColor(),R=e.getFgColorMode(),E=e.getBgColor(),x=e.getBgColorMode(),A=!!e.isInverse(),T=!!e.isInverse();if(A){var U=L;L=E,E=U;var z=R;R=x,x=z}var W=this._resolveBackgroundRgba(u!==void 0?50331648:x,u!=null?u:E,A),K=this._resolveForegroundRgba(R,L,A,T),G=s.rgba.ensureContrastRatio(u!=null?u:W,m!=null?m:K,this._optionsService.rawOptions.minimumContrastRatio);if(!G){if(!m)return void this._colors.contrastCache.setColor(e.bg,e.fg,null);G=m}var k={css:s.channels.toCss(G>>24&255,G>>16&255,G>>8&255),rgba:G};return u||m||this._colors.contrastCache.setColor(e.bg,e.fg,k),k}},t.prototype._resolveBackgroundRgba=function(e,r,i){switch(e){case 16777216:case 33554432:return this._colors.ansi[r].rgba;case 50331648:return r<<8;default:return i?this._colors.foreground.rgba:this._colors.background.rgba}},t.prototype._resolveForegroundRgba=function(e,r,i,n){switch(e){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&n&&r<8&&(r+=8),this._colors.ansi[r].rgba;case 50331648:return r<<8;default:return i?this._colors.background.rgba:this._colors.foreground.rgba}},t.prototype._isCellInSelection=function(e,r){var i=this._selectionStart,n=this._selectionEnd;return!(!i||!n)&&(this._columnSelectMode?e>=i[0]&&r>=i[1]&&e<n[0]&&r<n[1]:r>i[1]&&r<n[1]||i[1]===n[1]&&r===i[1]&&e>=i[0]&&e<n[0]||i[1]<n[1]&&r===n[1]&&e<n[0]||i[1]<n[1]&&r===i[1]&&e>=i[0])},t}();p.BaseRenderLayer=a},2512:function(H,p,w){var c,_=this&&this.__extends||(c=function(e,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&(i[d]=n[d])},c(e,r)},function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}c(e,r),e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}),f=this&&this.__decorate||function(e,r,i,n){var d,u=arguments.length,m=u<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,r,i,n);else for(var S=e.length-1;S>=0;S--)(d=e[S])&&(m=(u<3?d(m):u>3?d(r,i,m):d(r,i))||m);return u>3&&m&&Object.defineProperty(r,i,m),m},l=this&&this.__param||function(e,r){return function(i,n){r(i,n,e)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CursorRenderLayer=void 0;var g=w(1546),v=w(511),s=w(2585),o=w(4725),h=600,a=function(e){function r(i,n,d,u,m,S,y,b,C,M){var L=e.call(this,i,"cursor",n,!0,d,u,S,y,M)||this;return L._onRequestRedraw=m,L._coreService=b,L._coreBrowserService=C,L._cell=new v.CellData,L._state={x:0,y:0,isFocused:!1,style:"",width:0},L._cursorRenderers={bar:L._renderBarCursor.bind(L),block:L._renderBlockCursor.bind(L),underline:L._renderUnderlineCursor.bind(L)},L}return _(r,e),r.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},r.prototype.resize=function(i){e.prototype.resize.call(this,i),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},r.prototype.reset=function(){var i;this._clearCursor(),(i=this._cursorBlinkStateManager)===null||i===void 0||i.restartBlinkAnimation(),this.onOptionsChanged()},r.prototype.onBlur=function(){var i;(i=this._cursorBlinkStateManager)===null||i===void 0||i.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onFocus=function(){var i;(i=this._cursorBlinkStateManager)===null||i===void 0||i.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onOptionsChanged=function(){var i,n=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new t(this._coreBrowserService.isFocused,function(){n._render(!0)})):((i=this._cursorBlinkStateManager)===null||i===void 0||i.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onCursorMove=function(){var i;(i=this._cursorBlinkStateManager)===null||i===void 0||i.restartBlinkAnimation()},r.prototype.onGridChanged=function(i,n){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},r.prototype._render=function(i){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var n=this._bufferService.buffer.ybase+this._bufferService.buffer.y,d=n-this._bufferService.buffer.ydisp;if(d<0||d>=this._bufferService.rows)this._clearCursor();else{var u=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(n).loadCell(u,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var m=this._optionsService.rawOptions.cursorStyle;return m&&m!=="block"?this._cursorRenderers[m](u,d,this._cell):this._renderBlurCursor(u,d,this._cell),this._ctx.restore(),this._state.x=u,this._state.y=d,this._state.isFocused=!1,this._state.style=m,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===u&&this._state.y===d&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](u,d,this._cell),this._ctx.restore(),this._state.x=u,this._state.y=d,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},r.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},r.prototype._renderBarCursor=function(i,n,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(i,n,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},r.prototype._renderBlockCursor=function(i,n,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(i,n,d.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(d,i,n),this._ctx.restore()},r.prototype._renderUnderlineCursor=function(i,n,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(i,n),this._ctx.restore()},r.prototype._renderBlurCursor=function(i,n,d){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(i,n,d.getWidth(),1),this._ctx.restore()},f([l(5,s.IBufferService),l(6,s.IOptionsService),l(7,s.ICoreService),l(8,o.ICoreBrowserService),l(9,s.IDecorationService)],r)}(g.BaseRenderLayer);p.CursorRenderLayer=a;var t=function(){function e(r,i){this._renderCallback=i,this.isCursorVisible=!0,r&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var r=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0})))},e.prototype._restartInterval=function(r){var i=this;r===void 0&&(r=h),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(i._animationTimeRestarted){var n=h-(Date.now()-i._animationTimeRestarted);if(i._animationTimeRestarted=void 0,n>0)return void i._restartInterval(n)}i.isCursorVisible=!1,i._animationFrame=window.requestAnimationFrame(function(){i._renderCallback(),i._animationFrame=void 0}),i._blinkInterval=window.setInterval(function(){if(i._animationTimeRestarted){var d=h-(Date.now()-i._animationTimeRestarted);return i._animationTimeRestarted=void 0,void i._restartInterval(d)}i.isCursorVisible=!i.isCursorVisible,i._animationFrame=window.requestAnimationFrame(function(){i._renderCallback(),i._animationFrame=void 0})},h)},r)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:function(H,p,w){var c,_,f,l,g,v,s,o,h,a,t,e,r,i,n,d,u,m,S,y,b,C,M,L,R,E,x,A,T,U,z,W,K,G,k,$,Y,he,B,oe,V,q,O,D,N,Z,J,Q,fe,Ce,be,X,Se,Ae,He,Ue,Ut,Nt,qt,zt,Gt,Kt,It,Ht,Ne,qe,ze,Ge,Ke,Ve,Xe,Ye,Ze,Je,$e,Qe,et,tt,rt,it,nt,ot,st,at,ct,lt,ht,ut,ft,dt,_t,pt,vt,gt,yt,mt,Ct,bt,St,wt,Lt,xt,Et,Rt,Mt,At,kt,Ot,Dt,Tt,Bt,Pt,Ft,jt,Vt,Xt,Yt,Zt,Jt,$t,Qt,er,tr,rr,ir,nr,or,sr,lr=this&&this.__read||function(F,j){var P=typeof Symbol=="function"&&F[Symbol.iterator];if(!P)return F;var I,le,de=P.call(F),se=[];try{for(;(j===void 0||j-- >0)&&!(I=de.next()).done;)se.push(I.value)}catch(pe){le={error:pe}}finally{try{I&&!I.done&&(P=de.return)&&P.call(de)}finally{if(le)throw le.error}}return se},ar=this&&this.__values||function(F){var j=typeof Symbol=="function"&&Symbol.iterator,P=j&&F[j],I=0;if(P)return P.call(F);if(F&&typeof F.length=="number")return{next:function(){return F&&I>=F.length&&(F=void 0),{value:F&&F[I++],done:!F}}};throw new TypeError(j?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.tryDrawCustomChar=p.powerlineDefinitions=p.boxDrawingDefinitions=p.blockElementDefinitions=void 0;var hr=w(1752);p.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var ur={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};p.boxDrawingDefinitions={"\u2500":(c={},c[1]="M0,.5 L1,.5",c),"\u2501":(_={},_[3]="M0,.5 L1,.5",_),"\u2502":(f={},f[1]="M.5,0 L.5,1",f),"\u2503":(l={},l[3]="M.5,0 L.5,1",l),"\u250C":(g={},g[1]="M0.5,1 L.5,.5 L1,.5",g),"\u250F":(v={},v[3]="M0.5,1 L.5,.5 L1,.5",v),"\u2510":(s={},s[1]="M0,.5 L.5,.5 L.5,1",s),"\u2513":(o={},o[3]="M0,.5 L.5,.5 L.5,1",o),"\u2514":(h={},h[1]="M.5,0 L.5,.5 L1,.5",h),"\u2517":(a={},a[3]="M.5,0 L.5,.5 L1,.5",a),"\u2518":(t={},t[1]="M.5,0 L.5,.5 L0,.5",t),"\u251B":(e={},e[3]="M.5,0 L.5,.5 L0,.5",e),"\u251C":(r={},r[1]="M.5,0 L.5,1 M.5,.5 L1,.5",r),"\u2523":(i={},i[3]="M.5,0 L.5,1 M.5,.5 L1,.5",i),"\u2524":(n={},n[1]="M.5,0 L.5,1 M.5,.5 L0,.5",n),"\u252B":(d={},d[3]="M.5,0 L.5,1 M.5,.5 L0,.5",d),"\u252C":(u={},u[1]="M0,.5 L1,.5 M.5,.5 L.5,1",u),"\u2533":(m={},m[3]="M0,.5 L1,.5 M.5,.5 L.5,1",m),"\u2534":(S={},S[1]="M0,.5 L1,.5 M.5,.5 L.5,0",S),"\u253B":(y={},y[3]="M0,.5 L1,.5 M.5,.5 L.5,0",y),"\u253C":(b={},b[1]="M0,.5 L1,.5 M.5,0 L.5,1",b),"\u254B":(C={},C[3]="M0,.5 L1,.5 M.5,0 L.5,1",C),"\u2574":(M={},M[1]="M.5,.5 L0,.5",M),"\u2578":(L={},L[3]="M.5,.5 L0,.5",L),"\u2575":(R={},R[1]="M.5,.5 L.5,0",R),"\u2579":(E={},E[3]="M.5,.5 L.5,0",E),"\u2576":(x={},x[1]="M.5,.5 L1,.5",x),"\u257A":(A={},A[3]="M.5,.5 L1,.5",A),"\u2577":(T={},T[1]="M.5,.5 L.5,1",T),"\u257B":(U={},U[3]="M.5,.5 L.5,1",U),"\u2550":(z={},z[1]=function(F,j){return"M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)},z),"\u2551":(W={},W[1]=function(F,j){return"M"+(.5-F)+",0 L"+(.5-F)+",1 M"+(.5+F)+",0 L"+(.5+F)+",1"},W),"\u2552":(K={},K[1]=function(F,j){return"M.5,1 L.5,"+(.5-j)+" L1,"+(.5-j)+" M.5,"+(.5+j)+" L1,"+(.5+j)},K),"\u2553":(G={},G[1]=function(F,j){return"M"+(.5-F)+",1 L"+(.5-F)+",.5 L1,.5 M"+(.5+F)+",.5 L"+(.5+F)+",1"},G),"\u2554":(k={},k[1]=function(F,j){return"M1,"+(.5-j)+" L"+(.5-F)+","+(.5-j)+" L"+(.5-F)+",1 M1,"+(.5+j)+" L"+(.5+F)+","+(.5+j)+" L"+(.5+F)+",1"},k),"\u2555":($={},$[1]=function(F,j){return"M0,"+(.5-j)+" L.5,"+(.5-j)+" L.5,1 M0,"+(.5+j)+" L.5,"+(.5+j)},$),"\u2556":(Y={},Y[1]=function(F,j){return"M"+(.5+F)+",1 L"+(.5+F)+",.5 L0,.5 M"+(.5-F)+",.5 L"+(.5-F)+",1"},Y),"\u2557":(he={},he[1]=function(F,j){return"M0,"+(.5+j)+" L"+(.5-F)+","+(.5+j)+" L"+(.5-F)+",1 M0,"+(.5-j)+" L"+(.5+F)+","+(.5-j)+" L"+(.5+F)+",1"},he),"\u2558":(B={},B[1]=function(F,j){return"M.5,0 L.5,"+(.5+j)+" L1,"+(.5+j)+" M.5,"+(.5-j)+" L1,"+(.5-j)},B),"\u2559":(oe={},oe[1]=function(F,j){return"M1,.5 L"+(.5-F)+",.5 L"+(.5-F)+",0 M"+(.5+F)+",.5 L"+(.5+F)+",0"},oe),"\u255A":(V={},V[1]=function(F,j){return"M1,"+(.5-j)+" L"+(.5+F)+","+(.5-j)+" L"+(.5+F)+",0 M1,"+(.5+j)+" L"+(.5-F)+","+(.5+j)+" L"+(.5-F)+",0"},V),"\u255B":(q={},q[1]=function(F,j){return"M0,"+(.5+j)+" L.5,"+(.5+j)+" L.5,0 M0,"+(.5-j)+" L.5,"+(.5-j)},q),"\u255C":(O={},O[1]=function(F,j){return"M0,.5 L"+(.5+F)+",.5 L"+(.5+F)+",0 M"+(.5-F)+",.5 L"+(.5-F)+",0"},O),"\u255D":(D={},D[1]=function(F,j){return"M0,"+(.5-j)+" L"+(.5-F)+","+(.5-j)+" L"+(.5-F)+",0 M0,"+(.5+j)+" L"+(.5+F)+","+(.5+j)+" L"+(.5+F)+",0"},D),"\u255E":(N={},N[1]=function(F,j){return"M.5,0 L.5,1 M.5,"+(.5-j)+" L1,"+(.5-j)+" M.5,"+(.5+j)+" L1,"+(.5+j)},N),"\u255F":(Z={},Z[1]=function(F,j){return"M"+(.5-F)+",0 L"+(.5-F)+",1 M"+(.5+F)+",0 L"+(.5+F)+",1 M"+(.5+F)+",.5 L1,.5"},Z),"\u2560":(J={},J[1]=function(F,j){return"M"+(.5-F)+",0 L"+(.5-F)+",1 M1,"+(.5+j)+" L"+(.5+F)+","+(.5+j)+" L"+(.5+F)+",1 M1,"+(.5-j)+" L"+(.5+F)+","+(.5-j)+" L"+(.5+F)+",0"},J),"\u2561":(Q={},Q[1]=function(F,j){return"M.5,0 L.5,1 M0,"+(.5-j)+" L.5,"+(.5-j)+" M0,"+(.5+j)+" L.5,"+(.5+j)},Q),"\u2562":(fe={},fe[1]=function(F,j){return"M0,.5 L"+(.5-F)+",.5 M"+(.5-F)+",0 L"+(.5-F)+",1 M"+(.5+F)+",0 L"+(.5+F)+",1"},fe),"\u2563":(Ce={},Ce[1]=function(F,j){return"M"+(.5+F)+",0 L"+(.5+F)+",1 M0,"+(.5+j)+" L"+(.5-F)+","+(.5+j)+" L"+(.5-F)+",1 M0,"+(.5-j)+" L"+(.5-F)+","+(.5-j)+" L"+(.5-F)+",0"},Ce),"\u2564":(be={},be[1]=function(F,j){return"M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)+" M.5,"+(.5+j)+" L.5,1"},be),"\u2565":(X={},X[1]=function(F,j){return"M0,.5 L1,.5 M"+(.5-F)+",.5 L"+(.5-F)+",1 M"+(.5+F)+",.5 L"+(.5+F)+",1"},X),"\u2566":(Se={},Se[1]=function(F,j){return"M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L"+(.5-F)+","+(.5+j)+" L"+(.5-F)+",1 M1,"+(.5+j)+" L"+(.5+F)+","+(.5+j)+" L"+(.5+F)+",1"},Se),"\u2567":(Ae={},Ae[1]=function(F,j){return"M.5,0 L.5,"+(.5-j)+" M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)},Ae),"\u2568":(He={},He[1]=function(F,j){return"M0,.5 L1,.5 M"+(.5-F)+",.5 L"+(.5-F)+",0 M"+(.5+F)+",.5 L"+(.5+F)+",0"},He),"\u2569":(Ue={},Ue[1]=function(F,j){return"M0,"+(.5+j)+" L1,"+(.5+j)+" M0,"+(.5-j)+" L"+(.5-F)+","+(.5-j)+" L"+(.5-F)+",0 M1,"+(.5-j)+" L"+(.5+F)+","+(.5-j)+" L"+(.5+F)+",0"},Ue),"\u256A":(Ut={},Ut[1]=function(F,j){return"M.5,0 L.5,1 M0,"+(.5-j)+" L1,"+(.5-j)+" M0,"+(.5+j)+" L1,"+(.5+j)},Ut),"\u256B":(Nt={},Nt[1]=function(F,j){return"M0,.5 L1,.5 M"+(.5-F)+",0 L"+(.5-F)+",1 M"+(.5+F)+",0 L"+(.5+F)+",1"},Nt),"\u256C":(qt={},qt[1]=function(F,j){return"M0,"+(.5+j)+" L"+(.5-F)+","+(.5+j)+" L"+(.5-F)+",1 M1,"+(.5+j)+" L"+(.5+F)+","+(.5+j)+" L"+(.5+F)+",1 M0,"+(.5-j)+" L"+(.5-F)+","+(.5-j)+" L"+(.5-F)+",0 M1,"+(.5-j)+" L"+(.5+F)+","+(.5-j)+" L"+(.5+F)+",0"},qt),"\u2571":(zt={},zt[1]="M1,0 L0,1",zt),"\u2572":(Gt={},Gt[1]="M0,0 L1,1",Gt),"\u2573":(Kt={},Kt[1]="M1,0 L0,1 M0,0 L1,1",Kt),"\u257C":(It={},It[1]="M.5,.5 L0,.5",It[3]="M.5,.5 L1,.5",It),"\u257D":(Ht={},Ht[1]="M.5,.5 L.5,0",Ht[3]="M.5,.5 L.5,1",Ht),"\u257E":(Ne={},Ne[1]="M.5,.5 L1,.5",Ne[3]="M.5,.5 L0,.5",Ne),"\u257F":(qe={},qe[1]="M.5,.5 L.5,1",qe[3]="M.5,.5 L.5,0",qe),"\u250D":(ze={},ze[1]="M.5,.5 L.5,1",ze[3]="M.5,.5 L1,.5",ze),"\u250E":(Ge={},Ge[1]="M.5,.5 L1,.5",Ge[3]="M.5,.5 L.5,1",Ge),"\u2511":(Ke={},Ke[1]="M.5,.5 L.5,1",Ke[3]="M.5,.5 L0,.5",Ke),"\u2512":(Ve={},Ve[1]="M.5,.5 L0,.5",Ve[3]="M.5,.5 L.5,1",Ve),"\u2515":(Xe={},Xe[1]="M.5,.5 L.5,0",Xe[3]="M.5,.5 L1,.5",Xe),"\u2516":(Ye={},Ye[1]="M.5,.5 L1,.5",Ye[3]="M.5,.5 L.5,0",Ye),"\u2519":(Ze={},Ze[1]="M.5,.5 L.5,0",Ze[3]="M.5,.5 L0,.5",Ze),"\u251A":(Je={},Je[1]="M.5,.5 L0,.5",Je[3]="M.5,.5 L.5,0",Je),"\u251D":($e={},$e[1]="M.5,0 L.5,1",$e[3]="M.5,.5 L1,.5",$e),"\u251E":(Qe={},Qe[1]="M0.5,1 L.5,.5 L1,.5",Qe[3]="M.5,.5 L.5,0",Qe),"\u251F":(et={},et[1]="M.5,0 L.5,.5 L1,.5",et[3]="M.5,.5 L.5,1",et),"\u2520":(tt={},tt[1]="M.5,.5 L1,.5",tt[3]="M.5,0 L.5,1",tt),"\u2521":(rt={},rt[1]="M.5,.5 L.5,1",rt[3]="M.5,0 L.5,.5 L1,.5",rt),"\u2522":(it={},it[1]="M.5,.5 L.5,0",it[3]="M0.5,1 L.5,.5 L1,.5",it),"\u2525":(nt={},nt[1]="M.5,0 L.5,1",nt[3]="M.5,.5 L0,.5",nt),"\u2526":(ot={},ot[1]="M0,.5 L.5,.5 L.5,1",ot[3]="M.5,.5 L.5,0",ot),"\u2527":(st={},st[1]="M.5,0 L.5,.5 L0,.5",st[3]="M.5,.5 L.5,1",st),"\u2528":(at={},at[1]="M.5,.5 L0,.5",at[3]="M.5,0 L.5,1",at),"\u2529":(ct={},ct[1]="M.5,.5 L.5,1",ct[3]="M.5,0 L.5,.5 L0,.5",ct),"\u252A":(lt={},lt[1]="M.5,.5 L.5,0",lt[3]="M0,.5 L.5,.5 L.5,1",lt),"\u252D":(ht={},ht[1]="M0.5,1 L.5,.5 L1,.5",ht[3]="M.5,.5 L0,.5",ht),"\u252E":(ut={},ut[1]="M0,.5 L.5,.5 L.5,1",ut[3]="M.5,.5 L1,.5",ut),"\u252F":(ft={},ft[1]="M.5,.5 L.5,1",ft[3]="M0,.5 L1,.5",ft),"\u2530":(dt={},dt[1]="M0,.5 L1,.5",dt[3]="M.5,.5 L.5,1",dt),"\u2531":(_t={},_t[1]="M.5,.5 L1,.5",_t[3]="M0,.5 L.5,.5 L.5,1",_t),"\u2532":(pt={},pt[1]="M.5,.5 L0,.5",pt[3]="M0.5,1 L.5,.5 L1,.5",pt),"\u2535":(vt={},vt[1]="M.5,0 L.5,.5 L1,.5",vt[3]="M.5,.5 L0,.5",vt),"\u2536":(gt={},gt[1]="M.5,0 L.5,.5 L0,.5",gt[3]="M.5,.5 L1,.5",gt),"\u2537":(yt={},yt[1]="M.5,.5 L.5,0",yt[3]="M0,.5 L1,.5",yt),"\u2538":(mt={},mt[1]="M0,.5 L1,.5",mt[3]="M.5,.5 L.5,0",mt),"\u2539":(Ct={},Ct[1]="M.5,.5 L1,.5",Ct[3]="M.5,0 L.5,.5 L0,.5",Ct),"\u253A":(bt={},bt[1]="M.5,.5 L0,.5",bt[3]="M.5,0 L.5,.5 L1,.5",bt),"\u253D":(St={},St[1]="M.5,0 L.5,1 M.5,.5 L1,.5",St[3]="M.5,.5 L0,.5",St),"\u253E":(wt={},wt[1]="M.5,0 L.5,1 M.5,.5 L0,.5",wt[3]="M.5,.5 L1,.5",wt),"\u253F":(Lt={},Lt[1]="M.5,0 L.5,1",Lt[3]="M0,.5 L1,.5",Lt),"\u2540":(xt={},xt[1]="M0,.5 L1,.5 M.5,.5 L.5,1",xt[3]="M.5,.5 L.5,0",xt),"\u2541":(Et={},Et[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Et[3]="M.5,.5 L.5,1",Et),"\u2542":(Rt={},Rt[1]="M0,.5 L1,.5",Rt[3]="M.5,0 L.5,1",Rt),"\u2543":(Mt={},Mt[1]="M0.5,1 L.5,.5 L1,.5",Mt[3]="M.5,0 L.5,.5 L0,.5",Mt),"\u2544":(At={},At[1]="M0,.5 L.5,.5 L.5,1",At[3]="M.5,0 L.5,.5 L1,.5",At),"\u2545":(kt={},kt[1]="M.5,0 L.5,.5 L1,.5",kt[3]="M0,.5 L.5,.5 L.5,1",kt),"\u2546":(Ot={},Ot[1]="M.5,0 L.5,.5 L0,.5",Ot[3]="M0.5,1 L.5,.5 L1,.5",Ot),"\u2547":(Dt={},Dt[1]="M.5,.5 L.5,1",Dt[3]="M.5,.5 L.5,0 M0,.5 L1,.5",Dt),"\u2548":(Tt={},Tt[1]="M.5,.5 L.5,0",Tt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",Tt),"\u2549":(Bt={},Bt[1]="M.5,.5 L1,.5",Bt[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Bt),"\u254A":(Pt={},Pt[1]="M.5,.5 L0,.5",Pt[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Pt),"\u254C":(Ft={},Ft[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Ft),"\u254D":(jt={},jt[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",jt),"\u2504":(Vt={},Vt[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Vt),"\u2505":(Xt={},Xt[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Xt),"\u2508":(Yt={},Yt[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Yt),"\u2509":(Zt={},Zt[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Zt),"\u254E":(Jt={},Jt[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Jt),"\u254F":($t={},$t[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",$t),"\u2506":(Qt={},Qt[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Qt),"\u2507":(er={},er[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",er),"\u250A":(tr={},tr[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",tr),"\u250B":(rr={},rr[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",rr),"\u256D":(ir={},ir[1]="C.5,1,.5,.5,1,.5",ir),"\u256E":(nr={},nr[1]="C.5,1,.5,.5,0,.5",nr),"\u256F":(or={},or[1]="C.5,0,.5,.5,0,.5",or),"\u2570":(sr={},sr[1]="C.5,0,.5,.5,1,.5",sr)},p.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0},"\uE0B1":{d:"M0,0 L1,.5 L0,1",type:1,horizontalPadding:.5},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0},"\uE0B3":{d:"M1,0 L0,.5 L1,1",type:1,horizontalPadding:.5}},p.tryDrawCustomChar=function(F,j,P,I,le,de){var se=p.blockElementDefinitions[j];if(se)return function(ie,xe,ce,we,De,Te){for(var ge=0;ge<xe.length;ge++){var ye=xe[ge],ee=De/8,ne=Te/8;ie.fillRect(ce+ye.x*ee,we+ye.y*ne,ye.w*ee,ye.h*ne)}}(F,se,P,I,le,de),!0;var pe=ur[j];if(pe)return function(ie,xe,ce,we,De,Te){var ge,ye=fr.get(xe);ye||(ye=new Map,fr.set(xe,ye));var ee=ie.fillStyle;if(typeof ee!="string")throw new Error('Unexpected fillStyle type "'+ee+'"');var ne=ye.get(ee);if(!ne){var te=xe[0].length,ue=xe.length,ve=document.createElement("canvas");ve.width=te,ve.height=ue;var Ee=(0,hr.throwIfFalsy)(ve.getContext("2d")),Le=new ImageData(te,ue),Fe=void 0,Re=void 0,Be=void 0,Ie=void 0;if(ee.startsWith("#"))Fe=parseInt(ee.slice(1,3),16),Re=parseInt(ee.slice(3,5),16),Be=parseInt(ee.slice(5,7),16),Ie=ee.length>7&&parseInt(ee.slice(7,9),16)||1;else{if(!ee.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+ee+'" when drawing pattern glyph');Fe=(ge=lr(ee.substring(5,ee.length-1).split(",").map(function(Pe){return parseFloat(Pe)}),4))[0],Re=ge[1],Be=ge[2],Ie=ge[3]}for(var Me=0;Me<ue;Me++)for(var Oe=0;Oe<te;Oe++)Le.data[4*(Me*te+Oe)]=Fe,Le.data[4*(Me*te+Oe)+1]=Re,Le.data[4*(Me*te+Oe)+2]=Be,Le.data[4*(Me*te+Oe)+3]=xe[Me][Oe]*(255*Ie);Ee.putImageData(Le,0,0),ne=(0,hr.throwIfFalsy)(ie.createPattern(ve,null)),ye.set(ee,ne)}ie.fillStyle=ne,ie.fillRect(ce,we,De,Te)}(F,pe,P,I,le,de),!0;var ae=p.boxDrawingDefinitions[j];if(ae)return function(ie,xe,ce,we,De,Te){var ge,ye,ee,ne;ie.strokeStyle=ie.fillStyle;try{for(var te=ar(Object.entries(xe)),ue=te.next();!ue.done;ue=te.next()){var ve=lr(ue.value,2),Ee=ve[0],Le=ve[1];ie.beginPath(),ie.lineWidth=window.devicePixelRatio*Number.parseInt(Ee);var Fe=void 0;Fe=typeof Le=="function"?Le(.15,.15/Te*De):Le;try{for(var Re=(ee=void 0,ar(Fe.split(" "))),Be=Re.next();!Be.done;Be=Re.next()){var Ie=Be.value,Me=Ie[0],Oe=dr[Me];if(Oe){var Pe=Ie.substring(1).split(",");Pe[0]&&Pe[1]&&Oe(ie,_r(Pe,De,Te,ce,we))}else console.error('Could not find drawing instructions for "'+Me+'"')}}catch(je){ee={error:je}}finally{try{Be&&!Be.done&&(ne=Re.return)&&ne.call(Re)}finally{if(ee)throw ee.error}}ie.stroke(),ie.closePath()}}catch(je){ge={error:je}}finally{try{ue&&!ue.done&&(ye=te.return)&&ye.call(te)}finally{if(ge)throw ge.error}}}(F,ae,P,I,le,de),!0;var ke=p.powerlineDefinitions[j];return!!ke&&(function(ie,xe,ce,we,De,Te){var ge,ye;ie.beginPath(),ie.lineWidth=window.devicePixelRatio;try{for(var ee=ar(xe.d.split(" ")),ne=ee.next();!ne.done;ne=ee.next()){var te=ne.value,ue=te[0],ve=dr[ue];if(ve){var Ee=te.substring(1).split(",");Ee[0]&&Ee[1]&&ve(ie,_r(Ee,De,Te,ce,we,xe.horizontalPadding))}else console.error('Could not find drawing instructions for "'+ue+'"')}}catch(Le){ge={error:Le}}finally{try{ne&&!ne.done&&(ye=ee.return)&&ye.call(ee)}finally{if(ge)throw ge.error}}xe.type===1?(ie.strokeStyle=ie.fillStyle,ie.stroke()):ie.fill(),ie.closePath()}(F,ke,P,I,le,de),!0)};var fr=new Map;function vr(F,j,P){return P===void 0&&(P=0),Math.max(Math.min(F,j),P)}var dr={C:function(F,j){return F.bezierCurveTo(j[0],j[1],j[2],j[3],j[4],j[5])},L:function(F,j){return F.lineTo(j[0],j[1])},M:function(F,j){return F.moveTo(j[0],j[1])}};function _r(F,j,P,I,le,de){de===void 0&&(de=0);var se=F.map(function(ke){return parseFloat(ke)||parseInt(ke)});if(se.length<2)throw new Error("Too few arguments for instruction");for(var pe=0;pe<se.length;pe+=2)se[pe]*=j-2*de*window.devicePixelRatio,se[pe]!==0&&(se[pe]=vr(Math.round(se[pe]+.5)-.5,j,0)),se[pe]+=I+de*window.devicePixelRatio;for(var ae=1;ae<se.length;ae+=2)se[ae]*=P,se[ae]!==0&&(se[ae]=vr(Math.round(se[ae]+.5)-.5,P,0)),se[ae]+=le;return se}},3700:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.GridCache=void 0;var w=function(){function c(){this.cache=[]}return c.prototype.resize=function(_,f){for(var l=0;l<_;l++){this.cache.length<=l&&this.cache.push([]);for(var g=this.cache[l].length;g<f;g++)this.cache[l].push(void 0);this.cache[l].length=f}this.cache.length=_},c.prototype.clear=function(){for(var _=0;_<this.cache.length;_++)for(var f=0;f<this.cache[_].length;f++)this.cache[_][f]=void 0},c}();p.GridCache=w},5098:function(H,p,w){var c,_=this&&this.__extends||(c=function(a,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},c(a,t)},function(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=a}c(a,t),a.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(a,t,e,r){var i,n=arguments.length,d=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(a,t,e,r);else for(var u=a.length-1;u>=0;u--)(i=a[u])&&(d=(n<3?i(d):n>3?i(t,e,d):i(t,e))||d);return n>3&&d&&Object.defineProperty(t,e,d),d},l=this&&this.__param||function(a,t){return function(e,r){t(e,r,a)}};Object.defineProperty(p,"__esModule",{value:!0}),p.LinkRenderLayer=void 0;var g=w(1546),v=w(8803),s=w(2040),o=w(2585),h=function(a){function t(e,r,i,n,d,u,m,S,y){var b=a.call(this,e,"link",r,!0,i,n,m,S,y)||this;return d.onShowLinkUnderline(function(C){return b._onShowLinkUnderline(C)}),d.onHideLinkUnderline(function(C){return b._onHideLinkUnderline(C)}),u.onShowLinkUnderline(function(C){return b._onShowLinkUnderline(C)}),u.onHideLinkUnderline(function(C){return b._onHideLinkUnderline(C)}),b}return _(t,a),t.prototype.resize=function(e){a.prototype.resize.call(this,e),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(e){if(e.fg===v.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&(0,s.is256Color)(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var r=e.y1+1;r<e.y2;r++)this._fillBottomLineAtCells(0,r,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},t.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},f([l(6,o.IBufferService),l(7,o.IOptionsService),l(8,o.IDecorationService)],t)}(g.BaseRenderLayer);p.LinkRenderLayer=h},3525:function(H,p,w){var c,_=this&&this.__extends||(c=function(u,m){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,y){S.__proto__=y}||function(S,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(S[b]=y[b])},c(u,m)},function(u,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function S(){this.constructor=u}c(u,m),u.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}),f=this&&this.__decorate||function(u,m,S,y){var b,C=arguments.length,M=C<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,S):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(u,m,S,y);else for(var L=u.length-1;L>=0;L--)(b=u[L])&&(M=(C<3?b(M):C>3?b(m,S,M):b(m,S))||M);return C>3&&M&&Object.defineProperty(m,S,M),M},l=this&&this.__param||function(u,m){return function(S,y){m(S,y,u)}},g=this&&this.__values||function(u){var m=typeof Symbol=="function"&&Symbol.iterator,S=m&&u[m],y=0;if(S)return S.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&y>=u.length&&(u=void 0),{value:u&&u[y++],done:!u}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.Renderer=void 0;var v=w(9596),s=w(4149),o=w(2512),h=w(5098),a=w(844),t=w(4725),e=w(2585),r=w(1420),i=w(8460),n=1,d=function(u){function m(S,y,b,C,M,L,R,E){var x=u.call(this)||this;x._colors=S,x._screenElement=y,x._bufferService=L,x._charSizeService=R,x._optionsService=E,x._id=n++,x._onRequestRedraw=new i.EventEmitter;var A=x._optionsService.rawOptions.allowTransparency;return x._renderLayers=[M.createInstance(v.TextRenderLayer,x._screenElement,0,x._colors,A,x._id),M.createInstance(s.SelectionRenderLayer,x._screenElement,1,x._colors,x._id),M.createInstance(h.LinkRenderLayer,x._screenElement,2,x._colors,x._id,b,C),M.createInstance(o.CursorRenderLayer,x._screenElement,3,x._colors,x._id,x._onRequestRedraw)],x.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},x._devicePixelRatio=window.devicePixelRatio,x._updateDimensions(),x.onOptionsChanged(),x}return _(m,u),Object.defineProperty(m.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),m.prototype.dispose=function(){var S,y;try{for(var b=g(this._renderLayers),C=b.next();!C.done;C=b.next())C.value.dispose()}catch(M){S={error:M}}finally{try{C&&!C.done&&(y=b.return)&&y.call(b)}finally{if(S)throw S.error}}u.prototype.dispose.call(this),(0,r.removeTerminalFromCache)(this._id)},m.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},m.prototype.setColors=function(S){var y,b;this._colors=S;try{for(var C=g(this._renderLayers),M=C.next();!M.done;M=C.next()){var L=M.value;L.setColors(this._colors),L.reset()}}catch(R){y={error:R}}finally{try{M&&!M.done&&(b=C.return)&&b.call(C)}finally{if(y)throw y.error}}},m.prototype.onResize=function(S,y){var b,C;this._updateDimensions();try{for(var M=g(this._renderLayers),L=M.next();!L.done;L=M.next())L.value.resize(this.dimensions)}catch(R){b={error:R}}finally{try{L&&!L.done&&(C=M.return)&&C.call(M)}finally{if(b)throw b.error}}this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},m.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},m.prototype.onBlur=function(){this._runOperation(function(S){return S.onBlur()})},m.prototype.onFocus=function(){this._runOperation(function(S){return S.onFocus()})},m.prototype.onSelectionChanged=function(S,y,b){b===void 0&&(b=!1),this._runOperation(function(C){return C.onSelectionChanged(S,y,b)}),this._colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})},m.prototype.onCursorMove=function(){this._runOperation(function(S){return S.onCursorMove()})},m.prototype.onOptionsChanged=function(){this._runOperation(function(S){return S.onOptionsChanged()})},m.prototype.clear=function(){this._runOperation(function(S){return S.reset()})},m.prototype._runOperation=function(S){var y,b;try{for(var C=g(this._renderLayers),M=C.next();!M.done;M=C.next())S(M.value)}catch(L){y={error:L}}finally{try{M&&!M.done&&(b=C.return)&&b.call(C)}finally{if(y)throw y.error}}},m.prototype.renderRows=function(S,y){var b,C;try{for(var M=g(this._renderLayers),L=M.next();!L.done;L=M.next())L.value.onGridChanged(S,y)}catch(R){b={error:R}}finally{try{L&&!L.done&&(C=M.return)&&C.call(M)}finally{if(b)throw b.error}}},m.prototype.clearTextureAtlas=function(){var S,y;try{for(var b=g(this._renderLayers),C=b.next();!C.done;C=b.next())C.value.clearTextureAtlas()}catch(M){S={error:M}}finally{try{C&&!C.done&&(y=b.return)&&y.call(b)}finally{if(S)throw S.error}}},m.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},f([l(4,e.IInstantiationService),l(5,e.IBufferService),l(6,t.ICharSizeService),l(7,e.IOptionsService)],m)}(a.Disposable);p.Renderer=d},1752:(H,p)=>{function w(c){return 57508<=c&&c<=57558}Object.defineProperty(p,"__esModule",{value:!0}),p.excludeFromContrastRatioDemands=p.isPowerlineGlyph=p.throwIfFalsy=void 0,p.throwIfFalsy=function(c){if(!c)throw new Error("value must not be falsy");return c},p.isPowerlineGlyph=w,p.excludeFromContrastRatioDemands=function(c){return w(c)||function(_){return 9472<=_&&_<=9631}(c)}},4149:function(H,p,w){var c,_=this&&this.__extends||(c=function(o,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])},c(o,h)},function(o,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function a(){this.constructor=o}c(o,h),o.prototype=h===null?Object.create(h):(a.prototype=h.prototype,new a)}),f=this&&this.__decorate||function(o,h,a,t){var e,r=arguments.length,i=r<3?h:t===null?t=Object.getOwnPropertyDescriptor(h,a):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,h,a,t);else for(var n=o.length-1;n>=0;n--)(e=o[n])&&(i=(r<3?e(i):r>3?e(h,a,i):e(h,a))||i);return r>3&&i&&Object.defineProperty(h,a,i),i},l=this&&this.__param||function(o,h){return function(a,t){h(a,t,o)}};Object.defineProperty(p,"__esModule",{value:!0}),p.SelectionRenderLayer=void 0;var g=w(1546),v=w(2585),s=function(o){function h(a,t,e,r,i,n,d){var u=o.call(this,a,"selection",t,!0,e,r,i,n,d)||this;return u._clearState(),u}return _(h,o),h.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},h.prototype.resize=function(a){o.prototype.resize.call(this,a),this._clearState()},h.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},h.prototype.onSelectionChanged=function(a,t,e){if(o.prototype.onSelectionChanged.call(this,a,t,e),this._didStateChange(a,t,e,this._bufferService.buffer.ydisp))if(this._clearAll(),a&&t){var r=a[1]-this._bufferService.buffer.ydisp,i=t[1]-this._bufferService.buffer.ydisp,n=Math.max(r,0),d=Math.min(i,this._bufferService.rows-1);if(n>=this._bufferService.rows||d<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var u=a[0],m=t[0]-u,S=d-n+1;this._fillCells(u,n,m,S)}else{u=r===n?a[0]:0;var y=n===i?t[0]:this._bufferService.cols;this._fillCells(u,n,y-u,1);var b=Math.max(d-n-1,0);if(this._fillCells(0,n+1,this._bufferService.cols,b),n!==d){var C=i===d?t[0]:this._bufferService.cols;this._fillCells(0,d,C,1)}}this._state.start=[a[0],a[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},h.prototype._didStateChange=function(a,t,e,r){return!this._areCoordinatesEqual(a,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||e!==this._state.columnSelectMode||r!==this._state.ydisp},h.prototype._areCoordinatesEqual=function(a,t){return!(!a||!t)&&a[0]===t[0]&&a[1]===t[1]},f([l(4,v.IBufferService),l(5,v.IOptionsService),l(6,v.IDecorationService)],h)}(g.BaseRenderLayer);p.SelectionRenderLayer=s},9596:function(H,p,w){var c,_=this&&this.__extends||(c=function(n,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(u[S]=m[S])},c(n,d)},function(n,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=n}c(n,d),n.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}),f=this&&this.__decorate||function(n,d,u,m){var S,y=arguments.length,b=y<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,u):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(n,d,u,m);else for(var C=n.length-1;C>=0;C--)(S=n[C])&&(b=(y<3?S(b):y>3?S(d,u,b):S(d,u))||b);return y>3&&b&&Object.defineProperty(d,u,b),b},l=this&&this.__param||function(n,d){return function(u,m){d(u,m,n)}},g=this&&this.__values||function(n){var d=typeof Symbol=="function"&&Symbol.iterator,u=d&&n[d],m=0;if(u)return u.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&m>=n.length&&(n=void 0),{value:n&&n[m++],done:!n}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.TextRenderLayer=void 0;var v=w(3700),s=w(1546),o=w(3734),h=w(643),a=w(511),t=w(2585),e=w(4725),r=w(4269),i=function(n){function d(u,m,S,y,b,C,M,L,R){var E=n.call(this,u,"text",m,y,S,b,C,M,R)||this;return E._characterJoinerService=L,E._characterWidth=0,E._characterFont="",E._characterOverlapCache={},E._workCell=new a.CellData,E._state=new v.GridCache,E}return _(d,n),d.prototype.resize=function(u){n.prototype.resize.call(this,u);var m=this._getFont(!1,!1);this._characterWidth===u.scaledCharWidth&&this._characterFont===m||(this._characterWidth=u.scaledCharWidth,this._characterFont=m,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},d.prototype.reset=function(){this._state.clear(),this._clearAll()},d.prototype._forEachCell=function(u,m,S){for(var y=u;y<=m;y++)for(var b=y+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.lines.get(b),M=this._characterJoinerService.getJoinedCharacters(b),L=0;L<this._bufferService.cols;L++){C.loadCell(L,this._workCell);var R=this._workCell,E=!1,x=L;if(R.getWidth()!==0){if(M.length>0&&L===M[0][0]){E=!0;var A=M.shift();R=new r.JoinedCellData(this._workCell,C.translateToString(!0,A[0],A[1]),A[1]-A[0]),x=A[1]-1}!E&&this._isOverlapping(R)&&x<C.length-1&&C.getCodePoint(x+1)===h.NULL_CELL_CODE&&(R.content&=-12582913,R.content|=2<<22),S(R,L,y),L=x}}},d.prototype._drawBackground=function(u,m){var S=this,y=this._ctx,b=this._bufferService.cols,C=0,M=0,L=null;y.save(),this._forEachCell(u,m,function(R,E,x){var A,T,U=null;R.isInverse()?U=R.isFgDefault()?S._colors.foreground.css:R.isFgRGB()?"rgb("+o.AttributeData.toColorRGB(R.getFgColor()).join(",")+")":S._colors.ansi[R.getFgColor()].css:R.isBgRGB()?U="rgb("+o.AttributeData.toColorRGB(R.getBgColor()).join(",")+")":R.isBgPalette()&&(U=S._colors.ansi[R.getBgColor()].css);var z=!1;try{for(var W=g(S._decorationService.getDecorationsAtCell(E,S._bufferService.buffer.ydisp+x)),K=W.next();!K.done;K=W.next()){var G=K.value;G.options.layer!=="top"&&z||(G.backgroundColorRGB&&(U=G.backgroundColorRGB.css),z=G.options.layer==="top")}}catch(k){A={error:k}}finally{try{K&&!K.done&&(T=W.return)&&T.call(W)}finally{if(A)throw A.error}}L===null&&(C=E,M=x),x!==M?(y.fillStyle=L||"",S._fillCells(C,M,b-C,1),C=E,M=x):L!==U&&(y.fillStyle=L||"",S._fillCells(C,M,E-C,1),C=E,M=x),L=U}),L!==null&&(y.fillStyle=L,this._fillCells(C,M,b-C,1)),y.restore()},d.prototype._drawForeground=function(u,m){var S=this;this._forEachCell(u,m,function(y,b,C){if(!y.isInvisible()&&(S._drawChars(y,b,C),y.isUnderline()||y.isStrikethrough())){if(S._ctx.save(),y.isInverse())if(y.isBgDefault())S._ctx.fillStyle=S._colors.background.css;else if(y.isBgRGB())S._ctx.fillStyle="rgb("+o.AttributeData.toColorRGB(y.getBgColor()).join(",")+")";else{var M=y.getBgColor();S._optionsService.rawOptions.drawBoldTextInBrightColors&&y.isBold()&&M<8&&(M+=8),S._ctx.fillStyle=S._colors.ansi[M].css}else if(y.isFgDefault())S._ctx.fillStyle=S._colors.foreground.css;else if(y.isFgRGB())S._ctx.fillStyle="rgb("+o.AttributeData.toColorRGB(y.getFgColor()).join(",")+")";else{var L=y.getFgColor();S._optionsService.rawOptions.drawBoldTextInBrightColors&&y.isBold()&&L<8&&(L+=8),S._ctx.fillStyle=S._colors.ansi[L].css}y.isStrikethrough()&&S._fillMiddleLineAtCells(b,C,y.getWidth()),y.isUnderline()&&S._fillBottomLineAtCells(b,C,y.getWidth()),S._ctx.restore()}})},d.prototype.onGridChanged=function(u,m){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,u,this._bufferService.cols,m-u+1),this._drawBackground(u,m),this._drawForeground(u,m))},d.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},d.prototype._isOverlapping=function(u){if(u.getWidth()!==1||u.getCode()<256)return!1;var m=u.getChars();if(this._characterOverlapCache.hasOwnProperty(m))return this._characterOverlapCache[m];this._ctx.save(),this._ctx.font=this._characterFont;var S=Math.floor(this._ctx.measureText(m).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[m]=S,S},f([l(5,t.IBufferService),l(6,t.IOptionsService),l(7,e.ICharacterJoinerService),l(8,t.IDecorationService)],d)}(s.BaseRenderLayer);p.TextRenderLayer=i},9616:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BaseCharAtlas=void 0;var w=function(){function c(){this._didWarmUp=!1}return c.prototype.dispose=function(){},c.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},c.prototype._doWarmUp=function(){},c.prototype.clear=function(){},c.prototype.beginFrame=function(){},c}();p.BaseCharAtlas=w},1420:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.removeTerminalFromCache=p.acquireCharAtlas=void 0;var c=w(2040),_=w(1906),f=[];p.acquireCharAtlas=function(l,g,v,s,o){for(var h=(0,c.generateConfig)(s,o,l,v),a=0;a<f.length;a++){var t=(e=f[a]).ownedBy.indexOf(g);if(t>=0){if((0,c.configEquals)(e.config,h))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),f.splice(a,1)):e.ownedBy.splice(t,1);break}}for(a=0;a<f.length;a++){var e=f[a];if((0,c.configEquals)(e.config,h))return e.ownedBy.push(g),e.atlas}var r={atlas:new _.DynamicCharAtlas(document,h),config:h,ownedBy:[g]};return f.push(r),r.atlas},p.removeTerminalFromCache=function(l){for(var g=0;g<f.length;g++){var v=f[g].ownedBy.indexOf(l);if(v!==-1){f[g].ownedBy.length===1?(f[g].atlas.dispose(),f.splice(g,1)):f[g].ownedBy.splice(v,1);break}}}},2040:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.is256Color=p.configEquals=p.generateConfig=void 0;var c=w(643);p.generateConfig=function(_,f,l,g){var v={foreground:g.foreground,background:g.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:g.ansi.slice()};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:_,scaledCharHeight:f,fontFamily:l.fontFamily,fontSize:l.fontSize,fontWeight:l.fontWeight,fontWeightBold:l.fontWeightBold,allowTransparency:l.allowTransparency,colors:v}},p.configEquals=function(_,f){for(var l=0;l<_.colors.ansi.length;l++)if(_.colors.ansi[l].rgba!==f.colors.ansi[l].rgba)return!1;return _.devicePixelRatio===f.devicePixelRatio&&_.fontFamily===f.fontFamily&&_.fontSize===f.fontSize&&_.fontWeight===f.fontWeight&&_.fontWeightBold===f.fontWeightBold&&_.allowTransparency===f.allowTransparency&&_.scaledCharWidth===f.scaledCharWidth&&_.scaledCharHeight===f.scaledCharHeight&&_.colors.foreground===f.colors.foreground&&_.colors.background===f.colors.background},p.is256Color=function(_){return _<c.DEFAULT_COLOR}},8803:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CHAR_ATLAS_CELL_SPACING=p.TEXT_BASELINE=p.DIM_OPACITY=p.INVERTED_DEFAULT_COLOR=void 0;var c=w(6114);p.INVERTED_DEFAULT_COLOR=257,p.DIM_OPACITY=.5,p.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic",p.CHAR_ATLAS_CELL_SPACING=1},1906:function(H,p,w){var c,_=this&&this.__extends||(c=function(u,m){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,y){S.__proto__=y}||function(S,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(S[b]=y[b])},c(u,m)},function(u,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function S(){this.constructor=u}c(u,m),u.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)});Object.defineProperty(p,"__esModule",{value:!0}),p.NoneCharAtlas=p.DynamicCharAtlas=p.getGlyphCacheKey=void 0;var f=w(8803),l=w(9616),g=w(5680),v=w(7001),s=w(6114),o=w(1752),h=w(8055),a=1024,t=1024,e={css:"rgba(0, 0, 0, 0)",rgba:0};function r(u){return u.code<<21|u.bg<<12|u.fg<<3|(u.bold?0:4)+(u.dim?0:2)+(u.italic?0:1)}p.getGlyphCacheKey=r;var i=function(u){function m(S,y){var b=u.call(this)||this;b._config=y,b._drawToCacheCount=0,b._glyphsWaitingOnBitmap=[],b._bitmapCommitTimeout=null,b._bitmap=null,b._cacheCanvas=S.createElement("canvas"),b._cacheCanvas.width=a,b._cacheCanvas.height=t,b._cacheCtx=(0,o.throwIfFalsy)(b._cacheCanvas.getContext("2d",{alpha:!0}));var C=S.createElement("canvas");C.width=b._config.scaledCharWidth,C.height=b._config.scaledCharHeight,b._tmpCtx=(0,o.throwIfFalsy)(C.getContext("2d",{alpha:b._config.allowTransparency})),b._width=Math.floor(a/b._config.scaledCharWidth),b._height=Math.floor(t/b._config.scaledCharHeight);var M=b._width*b._height;return b._cacheMap=new v.LRUMap(M),b._cacheMap.prealloc(M),b}return _(m,u),m.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},m.prototype.beginFrame=function(){this._drawToCacheCount=0},m.prototype.clear=function(){if(this._cacheMap.size>0){var S=this._width*this._height;this._cacheMap=new v.LRUMap(S),this._cacheMap.prealloc(S)}this._cacheCtx.clearRect(0,0,a,t),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},m.prototype.draw=function(S,y,b,C){if(y.code===32)return!0;if(!this._canCache(y))return!1;var M=r(y),L=this._cacheMap.get(M);if(L!=null)return this._drawFromCache(S,L,b,C),!0;if(this._drawToCacheCount<100){var R;R=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var E=this._drawToCache(y,R);return this._cacheMap.set(M,E),this._drawFromCache(S,E,b,C),!0}return!1},m.prototype._canCache=function(S){return S.code<256},m.prototype._toCoordinateX=function(S){return S%this._width*this._config.scaledCharWidth},m.prototype._toCoordinateY=function(S){return Math.floor(S/this._width)*this._config.scaledCharHeight},m.prototype._drawFromCache=function(S,y,b,C){if(!y.isEmpty){var M=this._toCoordinateX(y.index),L=this._toCoordinateY(y.index);S.drawImage(y.inBitmap?this._bitmap:this._cacheCanvas,M,L,this._config.scaledCharWidth,this._config.scaledCharHeight,b,C,this._config.scaledCharWidth,this._config.scaledCharHeight)}},m.prototype._getColorFromAnsiIndex=function(S){return S<this._config.colors.ansi.length?this._config.colors.ansi[S]:g.DEFAULT_ANSI_COLORS[S]},m.prototype._getBackgroundColor=function(S){return this._config.allowTransparency?e:S.bg===f.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:S.bg<256?this._getColorFromAnsiIndex(S.bg):this._config.colors.background},m.prototype._getForegroundColor=function(S){return S.fg===f.INVERTED_DEFAULT_COLOR?h.color.opaque(this._config.colors.background):S.fg<256?this._getColorFromAnsiIndex(S.fg):this._config.colors.foreground},m.prototype._drawToCache=function(S,y){this._drawToCacheCount++,this._tmpCtx.save();var b=this._getBackgroundColor(S);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=b.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var C=S.bold?this._config.fontWeightBold:this._config.fontWeight,M=S.italic?"italic":"";this._tmpCtx.font=M+" "+C+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=f.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(S).css,S.dim&&(this._tmpCtx.globalAlpha=f.DIM_OPACITY),this._tmpCtx.fillText(S.chars,0,this._config.scaledCharHeight);var L=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),R=!1;if(this._config.allowTransparency||(R=d(L,b)),R&&S.chars==="_"&&!this._config.allowTransparency)for(var E=1;E<=5&&(this._tmpCtx.fillText(S.chars,0,this._config.scaledCharHeight-E),R=d(L=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),b));E++);this._tmpCtx.restore();var x=this._toCoordinateX(y),A=this._toCoordinateY(y);this._cacheCtx.putImageData(L,x,A);var T={index:y,isEmpty:R,inBitmap:!1};return this._addGlyphToBitmap(T),T},m.prototype._addGlyphToBitmap=function(S){var y=this;!("createImageBitmap"in window)||s.isFirefox||s.isSafari||(this._glyphsWaitingOnBitmap.push(S),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return y._generateBitmap()},100)))},m.prototype._generateBitmap=function(){var S=this,y=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(b){S._bitmap=b;for(var C=0;C<y.length;C++)y[C].inBitmap=!0}),this._bitmapCommitTimeout=null},m}(l.BaseCharAtlas);p.DynamicCharAtlas=i;var n=function(u){function m(S,y){return u.call(this)||this}return _(m,u),m.prototype.draw=function(S,y,b,C){return!1},m}(l.BaseCharAtlas);function d(u,m){for(var S=!0,y=m.rgba>>>24,b=m.rgba>>>16&255,C=m.rgba>>>8&255,M=0;M<u.data.length;M+=4)u.data[M]===y&&u.data[M+1]===b&&u.data[M+2]===C?u.data[M+3]=0:S=!1;return S}p.NoneCharAtlas=n},7001:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.LRUMap=void 0;var w=function(){function c(_){this.capacity=_,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return c.prototype._unlinkNode=function(_){var f=_.prev,l=_.next;_===this._head&&(this._head=l),_===this._tail&&(this._tail=f),f!==null&&(f.next=l),l!==null&&(l.prev=f)},c.prototype._appendNode=function(_){var f=this._tail;f!==null&&(f.next=_),_.prev=f,_.next=null,this._tail=_,this._head===null&&(this._head=_)},c.prototype.prealloc=function(_){for(var f=this._nodePool,l=0;l<_;l++)f.push({prev:null,next:null,key:null,value:null})},c.prototype.get=function(_){var f=this._map[_];return f!==void 0?(this._unlinkNode(f),this._appendNode(f),f.value):null},c.prototype.peekValue=function(_){var f=this._map[_];return f!==void 0?f.value:null},c.prototype.peek=function(){var _=this._head;return _===null?null:_.value},c.prototype.set=function(_,f){var l=this._map[_];if(l!==void 0)l=this._map[_],this._unlinkNode(l),l.value=f;else if(this.size>=this.capacity)l=this._head,this._unlinkNode(l),delete this._map[l.key],l.key=_,l.value=f,this._map[_]=l;else{var g=this._nodePool;g.length>0?((l=g.pop()).key=_,l.value=f):l={prev:null,next:null,key:_,value:f},this._map[_]=l,this.size++}this._appendNode(l)},c}();p.LRUMap=w},1296:function(H,p,w){var c,_=this&&this.__extends||(c=function(y,b){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,M){C.__proto__=M}||function(C,M){for(var L in M)Object.prototype.hasOwnProperty.call(M,L)&&(C[L]=M[L])},c(y,b)},function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function C(){this.constructor=y}c(y,b),y.prototype=b===null?Object.create(b):(C.prototype=b.prototype,new C)}),f=this&&this.__decorate||function(y,b,C,M){var L,R=arguments.length,E=R<3?b:M===null?M=Object.getOwnPropertyDescriptor(b,C):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(y,b,C,M);else for(var x=y.length-1;x>=0;x--)(L=y[x])&&(E=(R<3?L(E):R>3?L(b,C,E):L(b,C))||E);return R>3&&E&&Object.defineProperty(b,C,E),E},l=this&&this.__param||function(y,b){return function(C,M){b(C,M,y)}},g=this&&this.__values||function(y){var b=typeof Symbol=="function"&&Symbol.iterator,C=b&&y[b],M=0;if(C)return C.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&M>=y.length&&(y=void 0),{value:y&&y[M++],done:!y}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.DomRenderer=void 0;var v=w(3787),s=w(8803),o=w(844),h=w(4725),a=w(2585),t=w(8460),e=w(8055),r=w(9631),i="xterm-dom-renderer-owner-",n="xterm-fg-",d="xterm-bg-",u="xterm-focus",m=1,S=function(y){function b(C,M,L,R,E,x,A,T,U,z){var W=y.call(this)||this;return W._colors=C,W._element=M,W._screenElement=L,W._viewportElement=R,W._linkifier=E,W._linkifier2=x,W._charSizeService=T,W._optionsService=U,W._bufferService=z,W._terminalClass=m++,W._rowElements=[],W._rowContainer=document.createElement("div"),W._rowContainer.classList.add("xterm-rows"),W._rowContainer.style.lineHeight="normal",W._rowContainer.setAttribute("aria-hidden","true"),W._refreshRowElements(W._bufferService.cols,W._bufferService.rows),W._selectionContainer=document.createElement("div"),W._selectionContainer.classList.add("xterm-selection"),W._selectionContainer.setAttribute("aria-hidden","true"),W.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},W._updateDimensions(),W._injectCss(),W._rowFactory=A.createInstance(v.DomRendererRowFactory,document,W._colors),W._element.classList.add(i+W._terminalClass),W._screenElement.appendChild(W._rowContainer),W._screenElement.appendChild(W._selectionContainer),W.register(W._linkifier.onShowLinkUnderline(function(K){return W._onLinkHover(K)})),W.register(W._linkifier.onHideLinkUnderline(function(K){return W._onLinkLeave(K)})),W.register(W._linkifier2.onShowLinkUnderline(function(K){return W._onLinkHover(K)})),W.register(W._linkifier2.onHideLinkUnderline(function(K){return W._onLinkLeave(K)})),W}return _(b,y),Object.defineProperty(b.prototype,"onRequestRedraw",{get:function(){return new t.EventEmitter().event},enumerable:!1,configurable:!0}),b.prototype.dispose=function(){this._element.classList.remove(i+this._terminalClass),(0,r.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),y.prototype.dispose.call(this)},b.prototype._updateDimensions=function(){var C,M;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;try{for(var L=g(this._rowElements),R=L.next();!R.done;R=L.next()){var E=R.value;E.style.width=this.dimensions.canvasWidth+"px",E.style.height=this.dimensions.actualCellHeight+"px",E.style.lineHeight=this.dimensions.actualCellHeight+"px",E.style.overflow="hidden"}}catch(A){C={error:A}}finally{try{R&&!R.done&&(M=L.return)&&M.call(L)}finally{if(C)throw C.error}}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var x=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=x,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},b.prototype.setColors=function(C){this._colors=C,this._injectCss()},b.prototype._injectCss=function(){var C=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var M=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";M+=this._terminalSelector+" span:not(."+v.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+v.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+v.ITALIC_CLASS+" { font-style: italic;}",M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",M+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",M+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+v.CURSOR_CLASS+"."+v.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+v.CURSOR_CLASS+"."+v.CURSOR_BLINK_CLASS+":not(."+v.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+v.CURSOR_CLASS+"."+v.CURSOR_BLINK_CLASS+"."+v.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+v.CURSOR_CLASS+"."+v.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+v.CURSOR_CLASS+"."+v.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+v.CURSOR_CLASS+"."+v.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",M+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionOpaque.css+";}",this._colors.ansi.forEach(function(L,R){M+=C._terminalSelector+" ."+n+R+" { color: "+L.css+"; }"+C._terminalSelector+" ."+d+R+" { background-color: "+L.css+"; }"}),M+=this._terminalSelector+" ."+n+s.INVERTED_DEFAULT_COLOR+" { color: "+e.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+d+s.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=M},b.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},b.prototype._refreshRowElements=function(C,M){for(var L=this._rowElements.length;L<=M;L++){var R=document.createElement("div");this._rowContainer.appendChild(R),this._rowElements.push(R)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())},b.prototype.onResize=function(C,M){this._refreshRowElements(C,M),this._updateDimensions()},b.prototype.onCharSizeChanged=function(){this._updateDimensions()},b.prototype.onBlur=function(){this._rowContainer.classList.remove(u)},b.prototype.onFocus=function(){this._rowContainer.classList.add(u)},b.prototype.onSelectionChanged=function(C,M,L){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.onSelectionChanged(C,M,L),this.renderRows(0,this._bufferService.rows-1),C&&M){var R=C[1]-this._bufferService.buffer.ydisp,E=M[1]-this._bufferService.buffer.ydisp,x=Math.max(R,0),A=Math.min(E,this._bufferService.rows-1);if(!(x>=this._bufferService.rows||A<0)){var T=document.createDocumentFragment();if(L){var U=C[0]>M[0];T.appendChild(this._createSelectionElement(x,U?M[0]:C[0],U?C[0]:M[0],A-x+1))}else{var z=R===x?C[0]:0,W=x===E?M[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(x,z,W));var K=A-x-1;if(T.appendChild(this._createSelectionElement(x+1,0,this._bufferService.cols,K)),x!==A){var G=E===A?M[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(A,0,G))}}this._selectionContainer.appendChild(T)}}},b.prototype._createSelectionElement=function(C,M,L,R){R===void 0&&(R=1);var E=document.createElement("div");return E.style.height=R*this.dimensions.actualCellHeight+"px",E.style.top=C*this.dimensions.actualCellHeight+"px",E.style.left=M*this.dimensions.actualCellWidth+"px",E.style.width=this.dimensions.actualCellWidth*(L-M)+"px",E},b.prototype.onCursorMove=function(){},b.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},b.prototype.clear=function(){var C,M;try{for(var L=g(this._rowElements),R=L.next();!R.done;R=L.next())R.value.innerText=""}catch(E){C={error:E}}finally{try{R&&!R.done&&(M=L.return)&&M.call(L)}finally{if(C)throw C.error}}},b.prototype.renderRows=function(C,M){for(var L=this._bufferService.buffer.ybase+this._bufferService.buffer.y,R=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),E=this._optionsService.rawOptions.cursorBlink,x=C;x<=M;x++){var A=this._rowElements[x];A.innerText="";var T=x+this._bufferService.buffer.ydisp,U=this._bufferService.buffer.lines.get(T),z=this._optionsService.rawOptions.cursorStyle;A.appendChild(this._rowFactory.createRow(U,T,T===L,z,R,E,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(b.prototype,"_terminalSelector",{get:function(){return"."+i+this._terminalClass},enumerable:!1,configurable:!0}),b.prototype._onLinkHover=function(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!0)},b.prototype._onLinkLeave=function(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!1)},b.prototype._setCellUnderline=function(C,M,L,R,E,x){for(;C!==M||L!==R;){var A=this._rowElements[L];if(!A)return;var T=A.children[C];T&&(T.style.textDecoration=x?"underline":"none"),++C>=E&&(C=0,L++)}},f([l(6,a.IInstantiationService),l(7,h.ICharSizeService),l(8,a.IOptionsService),l(9,a.IBufferService)],b)}(o.Disposable);p.DomRenderer=S},3787:function(H,p,w){var c=this&&this.__decorate||function(i,n,d,u){var m,S=arguments.length,y=S<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,d):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(i,n,d,u);else for(var b=i.length-1;b>=0;b--)(m=i[b])&&(y=(S<3?m(y):S>3?m(n,d,y):m(n,d))||y);return S>3&&y&&Object.defineProperty(n,d,y),y},_=this&&this.__param||function(i,n){return function(d,u){n(d,u,i)}},f=this&&this.__values||function(i){var n=typeof Symbol=="function"&&Symbol.iterator,d=n&&i[n],u=0;if(d)return d.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&u>=i.length&&(i=void 0),{value:i&&i[u++],done:!i}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.DomRendererRowFactory=p.CURSOR_STYLE_UNDERLINE_CLASS=p.CURSOR_STYLE_BAR_CLASS=p.CURSOR_STYLE_BLOCK_CLASS=p.CURSOR_BLINK_CLASS=p.CURSOR_CLASS=p.STRIKETHROUGH_CLASS=p.UNDERLINE_CLASS=p.ITALIC_CLASS=p.DIM_CLASS=p.BOLD_CLASS=void 0;var l=w(8803),g=w(643),v=w(511),s=w(2585),o=w(8055),h=w(4725),a=w(4269),t=w(1752);p.BOLD_CLASS="xterm-bold",p.DIM_CLASS="xterm-dim",p.ITALIC_CLASS="xterm-italic",p.UNDERLINE_CLASS="xterm-underline",p.STRIKETHROUGH_CLASS="xterm-strikethrough",p.CURSOR_CLASS="xterm-cursor",p.CURSOR_BLINK_CLASS="xterm-cursor-blink",p.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",p.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",p.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var e=function(){function i(n,d,u,m,S,y){this._document=n,this._colors=d,this._characterJoinerService=u,this._optionsService=m,this._coreService=S,this._decorationService=y,this._workCell=new v.CellData,this._columnSelectMode=!1}return i.prototype.setColors=function(n){this._colors=n},i.prototype.onSelectionChanged=function(n,d,u){this._selectionStart=n,this._selectionEnd=d,this._columnSelectMode=u},i.prototype.createRow=function(n,d,u,m,S,y,b,C){for(var M,L,R=this._document.createDocumentFragment(),E=this._characterJoinerService.getJoinedCharacters(d),x=0,A=Math.min(n.length,C)-1;A>=0;A--)if(n.loadCell(A,this._workCell).getCode()!==g.NULL_CELL_CODE||u&&A===S){x=A+1;break}for(A=0;A<x;A++){n.loadCell(A,this._workCell);var T=this._workCell.getWidth();if(T!==0){var U=!1,z=A,W=this._workCell;if(E.length>0&&A===E[0][0]){U=!0;var K=E.shift();W=new a.JoinedCellData(this._workCell,n.translateToString(!0,K[0],K[1]),K[1]-K[0]),z=K[1]-1,T=W.getWidth()}var G=this._document.createElement("span");if(T>1&&(G.style.width=b*T+"px"),U&&(G.style.display="inline",S>=A&&S<=z&&(S=A)),!this._coreService.isCursorHidden&&u&&A===S)switch(G.classList.add(p.CURSOR_CLASS),y&&G.classList.add(p.CURSOR_BLINK_CLASS),m){case"bar":G.classList.add(p.CURSOR_STYLE_BAR_CLASS);break;case"underline":G.classList.add(p.CURSOR_STYLE_UNDERLINE_CLASS);break;default:G.classList.add(p.CURSOR_STYLE_BLOCK_CLASS)}W.isBold()&&G.classList.add(p.BOLD_CLASS),W.isItalic()&&G.classList.add(p.ITALIC_CLASS),W.isDim()&&G.classList.add(p.DIM_CLASS),W.isUnderline()&&G.classList.add(p.UNDERLINE_CLASS),W.isInvisible()?G.textContent=g.WHITESPACE_CELL_CHAR:G.textContent=W.getChars()||g.WHITESPACE_CELL_CHAR,W.isStrikethrough()&&G.classList.add(p.STRIKETHROUGH_CLASS);var k=W.getFgColor(),$=W.getFgColorMode(),Y=W.getBgColor(),he=W.getBgColorMode(),B=!!W.isInverse();if(B){var oe=k;k=Y,Y=oe;var V=$;$=he,he=V}var q=void 0,O=void 0,D=!1;try{for(var N=(M=void 0,f(this._decorationService.getDecorationsAtCell(A,d))),Z=N.next();!Z.done;Z=N.next()){var J=Z.value;J.options.layer!=="top"&&D||(J.backgroundColorRGB&&(he=50331648,Y=J.backgroundColorRGB.rgba>>8&16777215,q=J.backgroundColorRGB),J.foregroundColorRGB&&($=50331648,k=J.foregroundColorRGB.rgba>>8&16777215,O=J.foregroundColorRGB),D=J.options.layer==="top")}}catch(be){M={error:be}}finally{try{Z&&!Z.done&&(L=N.return)&&L.call(N)}finally{if(M)throw M.error}}var Q=this._isCellInSelection(A,d);D||this._colors.selectionForeground&&Q&&($=50331648,k=this._colors.selectionForeground.rgba>>8&16777215,O=this._colors.selectionForeground),Q&&(q=this._colors.selectionOpaque,D=!0),D&&G.classList.add("xterm-decoration-top");var fe=void 0;switch(he){case 16777216:case 33554432:fe=this._colors.ansi[Y],G.classList.add("xterm-bg-"+Y);break;case 50331648:fe=o.rgba.toColor(Y>>16,Y>>8&255,255&Y),this._addStyle(G,"background-color:#"+r((Y>>>0).toString(16),"0",6));break;default:B?(fe=this._colors.foreground,G.classList.add("xterm-bg-"+l.INVERTED_DEFAULT_COLOR)):fe=this._colors.background}switch($){case 16777216:case 33554432:W.isBold()&&k<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(k+=8),this._applyMinimumContrast(G,fe,this._colors.ansi[k],W,q,void 0)||G.classList.add("xterm-fg-"+k);break;case 50331648:var Ce=o.rgba.toColor(k>>16&255,k>>8&255,255&k);this._applyMinimumContrast(G,fe,Ce,W,q,O)||this._addStyle(G,"color:#"+r(k.toString(16),"0",6));break;default:this._applyMinimumContrast(G,fe,this._colors.foreground,W,q,void 0)||B&&G.classList.add("xterm-fg-"+l.INVERTED_DEFAULT_COLOR)}R.appendChild(G),A=z}}return R},i.prototype._applyMinimumContrast=function(n,d,u,m,S,y){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,t.excludeFromContrastRatioDemands)(m.getCode()))return!1;var b=void 0;return S||y||(b=this._colors.contrastCache.getColor(d.rgba,u.rgba)),b===void 0&&(b=o.color.ensureContrastRatio(S||d,y||u,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor((S||d).rgba,(y||u).rgba,b!=null?b:null)),!!b&&(this._addStyle(n,"color:"+b.css),!0)},i.prototype._addStyle=function(n,d){n.setAttribute("style",""+(n.getAttribute("style")||"")+d+";")},i.prototype._isCellInSelection=function(n,d){var u=this._selectionStart,m=this._selectionEnd;return!(!u||!m)&&(this._columnSelectMode?u[0]<=m[0]?n>=u[0]&&d>=u[1]&&n<m[0]&&d<=m[1]:n<u[0]&&d>=u[1]&&n>=m[0]&&d<=m[1]:d>u[1]&&d<m[1]||u[1]===m[1]&&d===u[1]&&n>=u[0]&&n<m[0]||u[1]<m[1]&&d===m[1]&&n<m[0]||u[1]<m[1]&&d===u[1]&&n>=u[0])},c([_(2,h.ICharacterJoinerService),_(3,s.IOptionsService),_(4,s.ICoreService),_(5,s.IDecorationService)],i)}();function r(i,n,d){for(;i.length<d;)i=n+i;return i}p.DomRendererRowFactory=e},456:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.SelectionModel=void 0;var w=function(){function c(_){this._bufferService=_,this.isSelectAllActive=!1,this.selectionStartLength=0}return c.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(c.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"finalSelectionEnd",{get:function(){return this.isSelectAllActive?[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1]:this.selectionStart?!this.selectionEnd||this.areSelectionValuesReversed()?(_=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?_%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)-1]:[_%this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)]:[_,this.selectionStart[1]]:this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?(_=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?[_%this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)]:[Math.max(_,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd:void 0;var _},enumerable:!1,configurable:!0}),c.prototype.areSelectionValuesReversed=function(){var _=this.selectionStart,f=this.selectionEnd;return!(!_||!f)&&(_[1]>f[1]||_[1]===f[1]&&_[0]>f[0])},c.prototype.onTrim=function(_){return this.selectionStart&&(this.selectionStart[1]-=_),this.selectionEnd&&(this.selectionEnd[1]-=_),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},c}();p.SelectionModel=w},428:function(H,p,w){var c=this&&this.__decorate||function(s,o,h,a){var t,e=arguments.length,r=e<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,h):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,o,h,a);else for(var i=s.length-1;i>=0;i--)(t=s[i])&&(r=(e<3?t(r):e>3?t(o,h,r):t(o,h))||r);return e>3&&r&&Object.defineProperty(o,h,r),r},_=this&&this.__param||function(s,o){return function(h,a){o(h,a,s)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CharSizeService=void 0;var f=w(2585),l=w(8460),g=function(){function s(o,h,a){this._optionsService=a,this.width=0,this.height=0,this._onCharSizeChange=new l.EventEmitter,this._measureStrategy=new v(o,h,this._optionsService)}return Object.defineProperty(s.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),s.prototype.measure=function(){var o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())},c([_(2,f.IOptionsService)],s)}();p.CharSizeService=g;var v=function(){function s(o,h,a){this._document=o,this._parentElement=h,this._optionsService=a,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return s.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var o=this._measureElement.getBoundingClientRect();return o.width!==0&&o.height!==0&&(this._result.width=o.width,this._result.height=Math.ceil(o.height)),this._result},s}()},4269:function(H,p,w){var c,_=this&&this.__extends||(c=function(t,e){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},c(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}c(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}),f=this&&this.__decorate||function(t,e,r,i){var n,d=arguments.length,u=d<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(t,e,r,i);else for(var m=t.length-1;m>=0;m--)(n=t[m])&&(u=(d<3?n(u):d>3?n(e,r,u):n(e,r))||u);return d>3&&u&&Object.defineProperty(e,r,u),u},l=this&&this.__param||function(t,e){return function(r,i){e(r,i,t)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CharacterJoinerService=p.JoinedCellData=void 0;var g=w(3734),v=w(643),s=w(511),o=w(2585),h=function(t){function e(r,i,n){var d=t.call(this)||this;return d.content=0,d.combinedData="",d.fg=r.fg,d.bg=r.bg,d.combinedData=i,d._width=n,d}return _(e,t),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(r){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(g.AttributeData);p.JoinedCellData=h;var a=function(){function t(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new s.CellData}return t.prototype.register=function(e){var r={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(r),r.id},t.prototype.deregister=function(e){for(var r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===e)return this._characterJoiners.splice(r,1),!0;return!1},t.prototype.getJoinedCharacters=function(e){if(this._characterJoiners.length===0)return[];var r=this._bufferService.buffer.lines.get(e);if(!r||r.length===0)return[];for(var i=[],n=r.translateToString(!0),d=0,u=0,m=0,S=r.getFg(0),y=r.getBg(0),b=0;b<r.getTrimmedLength();b++)if(r.loadCell(b,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==S||this._workCell.bg!==y){if(b-d>1)for(var C=this._getJoinedRanges(n,m,u,r,d),M=0;M<C.length;M++)i.push(C[M]);d=b,m=u,S=this._workCell.fg,y=this._workCell.bg}u+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-d>1)for(C=this._getJoinedRanges(n,m,u,r,d),M=0;M<C.length;M++)i.push(C[M]);return i},t.prototype._getJoinedRanges=function(e,r,i,n,d){var u=e.substring(r,i),m=[];try{m=this._characterJoiners[0].handler(u)}catch(C){console.error(C)}for(var S=1;S<this._characterJoiners.length;S++)try{for(var y=this._characterJoiners[S].handler(u),b=0;b<y.length;b++)t._mergeRanges(m,y[b])}catch(C){console.error(C)}return this._stringRangesToCellRanges(m,n,d),m},t.prototype._stringRangesToCellRanges=function(e,r,i){var n=0,d=!1,u=0,m=e[n];if(m){for(var S=i;S<this._bufferService.cols;S++){var y=r.getWidth(S),b=r.getString(S).length||v.WHITESPACE_CELL_CHAR.length;if(y!==0){if(!d&&m[0]<=u&&(m[0]=S,d=!0),m[1]<=u){if(m[1]=S,!(m=e[++n]))break;m[0]<=u?(m[0]=S,d=!0):d=!1}u+=b}}m&&(m[1]=this._bufferService.cols)}},t._mergeRanges=function(e,r){for(var i=!1,n=0;n<e.length;n++){var d=e[n];if(i){if(r[1]<=d[0])return e[n-1][1]=r[1],e;if(r[1]<=d[1])return e[n-1][1]=Math.max(r[1],d[1]),e.splice(n,1),e;e.splice(n,1),n--}else{if(r[1]<=d[0])return e.splice(n,0,r),e;if(r[1]<=d[1])return d[0]=Math.min(r[0],d[0]),e;r[0]<d[1]&&(d[0]=Math.min(r[0],d[0]),i=!0)}}return i?e[e.length-1][1]=r[1]:e.push(r),e},t=f([l(0,o.IBufferService)],t)}();p.CharacterJoinerService=a},5114:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CoreBrowserService=void 0;var w=function(){function c(_){this._textarea=_}return Object.defineProperty(c.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),c}();p.CoreBrowserService=w},8934:function(H,p,w){var c=this&&this.__decorate||function(v,s,o,h){var a,t=arguments.length,e=t<3?s:h===null?h=Object.getOwnPropertyDescriptor(s,o):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(v,s,o,h);else for(var r=v.length-1;r>=0;r--)(a=v[r])&&(e=(t<3?a(e):t>3?a(s,o,e):a(s,o))||e);return t>3&&e&&Object.defineProperty(s,o,e),e},_=this&&this.__param||function(v,s){return function(o,h){s(o,h,v)}};Object.defineProperty(p,"__esModule",{value:!0}),p.MouseService=void 0;var f=w(4725),l=w(9806),g=function(){function v(s,o){this._renderService=s,this._charSizeService=o}return v.prototype.getCoords=function(s,o,h,a,t){return(0,l.getCoords)(window,s,o,h,a,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,t)},v.prototype.getRawByteCoords=function(s,o,h,a){var t=this.getCoords(s,o,h,a);return(0,l.getRawByteCoords)(t)},c([_(0,f.IRenderService),_(1,f.ICharSizeService)],v)}();p.MouseService=g},3230:function(H,p,w){var c,_=this&&this.__extends||(c=function(r,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,d){n.__proto__=d}||function(n,d){for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(n[u]=d[u])},c(r,i)},function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=r}c(r,i),r.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}),f=this&&this.__decorate||function(r,i,n,d){var u,m=arguments.length,S=m<3?i:d===null?d=Object.getOwnPropertyDescriptor(i,n):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,i,n,d);else for(var y=r.length-1;y>=0;y--)(u=r[y])&&(S=(m<3?u(S):m>3?u(i,n,S):u(i,n))||S);return m>3&&S&&Object.defineProperty(i,n,S),S},l=this&&this.__param||function(r,i){return function(n,d){i(n,d,r)}};Object.defineProperty(p,"__esModule",{value:!0}),p.RenderService=void 0;var g=w(6193),v=w(8460),s=w(844),o=w(5596),h=w(3656),a=w(2585),t=w(4725),e=function(r){function i(n,d,u,m,S,y,b){var C=r.call(this)||this;if(C._renderer=n,C._rowCount=d,C._charSizeService=S,C._isPaused=!1,C._needsFullRefresh=!1,C._isNextRenderRedrawOnly=!0,C._needsSelectionRefresh=!1,C._canvasWidth=0,C._canvasHeight=0,C._selectionState={start:void 0,end:void 0,columnSelectMode:!1},C._onDimensionsChange=new v.EventEmitter,C._onRenderedViewportChange=new v.EventEmitter,C._onRender=new v.EventEmitter,C._onRefreshRequest=new v.EventEmitter,C.register({dispose:function(){return C._renderer.dispose()}}),C._renderDebouncer=new g.RenderDebouncer(function(L,R){return C._renderRows(L,R)}),C.register(C._renderDebouncer),C._screenDprMonitor=new o.ScreenDprMonitor,C._screenDprMonitor.setListener(function(){return C.onDevicePixelRatioChange()}),C.register(C._screenDprMonitor),C.register(b.onResize(function(){return C._fullRefresh()})),C.register(b.buffers.onBufferActivate(function(){var L;return(L=C._renderer)===null||L===void 0?void 0:L.clear()})),C.register(m.onOptionChange(function(){return C._handleOptionsChanged()})),C.register(C._charSizeService.onCharSizeChange(function(){return C.onCharSizeChanged()})),C.register(y.onDecorationRegistered(function(){return C._fullRefresh()})),C.register(y.onDecorationRemoved(function(){return C._fullRefresh()})),C._renderer.onRequestRedraw(function(L){return C.refreshRows(L.start,L.end,!0)}),C.register((0,h.addDisposableDomListener)(window,"resize",function(){return C.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var M=new IntersectionObserver(function(L){return C._onIntersectionChange(L[L.length-1])},{threshold:0});M.observe(u),C.register({dispose:function(){return M.disconnect()}})}return C}return _(i,r),Object.defineProperty(i.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRenderedViewportChange",{get:function(){return this._onRenderedViewportChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),i.prototype._onIntersectionChange=function(n){this._isPaused=n.isIntersecting===void 0?n.intersectionRatio===0:!n.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},i.prototype.refreshRows=function(n,d,u){u===void 0&&(u=!1),this._isPaused?this._needsFullRefresh=!0:(u||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(n,d,this._rowCount))},i.prototype._renderRows=function(n,d){this._renderer.renderRows(n,d),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:n,end:d}),this._onRender.fire({start:n,end:d}),this._isNextRenderRedrawOnly=!0},i.prototype.resize=function(n,d){this._rowCount=d,this._fireOnCanvasResize()},i.prototype._handleOptionsChanged=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},i.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},i.prototype.dispose=function(){r.prototype.dispose.call(this)},i.prototype.setRenderer=function(n){var d=this;this._renderer.dispose(),this._renderer=n,this._renderer.onRequestRedraw(function(u){return d.refreshRows(u.start,u.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},i.prototype.addRefreshCallback=function(n){return this._renderDebouncer.addRefreshCallback(n)},i.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},i.prototype.clearTextureAtlas=function(){var n,d;(d=(n=this._renderer)===null||n===void 0?void 0:n.clearTextureAtlas)===null||d===void 0||d.call(n),this._fullRefresh()},i.prototype.setColors=function(n){this._renderer.setColors(n),this._fullRefresh()},i.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},i.prototype.onResize=function(n,d){this._renderer.onResize(n,d),this._fullRefresh()},i.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},i.prototype.onBlur=function(){this._renderer.onBlur()},i.prototype.onFocus=function(){this._renderer.onFocus()},i.prototype.onSelectionChanged=function(n,d,u){this._selectionState.start=n,this._selectionState.end=d,this._selectionState.columnSelectMode=u,this._renderer.onSelectionChanged(n,d,u)},i.prototype.onCursorMove=function(){this._renderer.onCursorMove()},i.prototype.clear=function(){this._renderer.clear()},f([l(3,a.IOptionsService),l(4,t.ICharSizeService),l(5,a.IDecorationService),l(6,a.IBufferService)],i)}(s.Disposable);p.RenderService=e},9312:function(H,p,w){var c,_=this&&this.__extends||(c=function(m,S){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var C in b)Object.prototype.hasOwnProperty.call(b,C)&&(y[C]=b[C])},c(m,S)},function(m,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function y(){this.constructor=m}c(m,S),m.prototype=S===null?Object.create(S):(y.prototype=S.prototype,new y)}),f=this&&this.__decorate||function(m,S,y,b){var C,M=arguments.length,L=M<3?S:b===null?b=Object.getOwnPropertyDescriptor(S,y):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(m,S,y,b);else for(var R=m.length-1;R>=0;R--)(C=m[R])&&(L=(M<3?C(L):M>3?C(S,y,L):C(S,y))||L);return M>3&&L&&Object.defineProperty(S,y,L),L},l=this&&this.__param||function(m,S){return function(y,b){S(y,b,m)}};Object.defineProperty(p,"__esModule",{value:!0}),p.SelectionService=void 0;var g=w(6114),v=w(456),s=w(511),o=w(8460),h=w(4725),a=w(2585),t=w(9806),e=w(9504),r=w(844),i=w(4841),n=String.fromCharCode(160),d=new RegExp(n,"g"),u=function(m){function S(y,b,C,M,L,R,E,x){var A=m.call(this)||this;return A._element=y,A._screenElement=b,A._linkifier=C,A._bufferService=M,A._coreService=L,A._mouseService=R,A._optionsService=E,A._renderService=x,A._dragScrollAmount=0,A._enabled=!0,A._workCell=new s.CellData,A._mouseDownTimeStamp=0,A._oldHasSelection=!1,A._oldSelectionStart=void 0,A._oldSelectionEnd=void 0,A._onLinuxMouseSelection=A.register(new o.EventEmitter),A._onRedrawRequest=A.register(new o.EventEmitter),A._onSelectionChange=A.register(new o.EventEmitter),A._onRequestScrollLines=A.register(new o.EventEmitter),A._mouseMoveListener=function(T){return A._onMouseMove(T)},A._mouseUpListener=function(T){return A._onMouseUp(T)},A._coreService.onUserInput(function(){A.hasSelection&&A.clearSelection()}),A._trimListener=A._bufferService.buffer.lines.onTrim(function(T){return A._onTrim(T)}),A.register(A._bufferService.buffers.onBufferActivate(function(T){return A._onBufferActivate(T)})),A.enable(),A._model=new v.SelectionModel(A._bufferService),A._activeSelectionMode=0,A}return _(S,m),Object.defineProperty(S.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),S.prototype.dispose=function(){this._removeMouseDownListeners()},S.prototype.reset=function(){this.clearSelection()},S.prototype.disable=function(){this.clearSelection(),this._enabled=!1},S.prototype.enable=function(){this._enabled=!0},Object.defineProperty(S.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"hasSelection",{get:function(){var y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!y||!b||y[0]===b[0]&&y[1]===b[1])},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"selectionText",{get:function(){var y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!y||!b)return"";var C=this._bufferService.buffer,M=[];if(this._activeSelectionMode===3){if(y[0]===b[0])return"";for(var L=y[0]<b[0]?y[0]:b[0],R=y[0]<b[0]?b[0]:y[0],E=y[1];E<=b[1];E++){var x=C.translateBufferLineToString(E,!0,L,R);M.push(x)}}else{var A=y[1]===b[1]?b[0]:void 0;for(M.push(C.translateBufferLineToString(y[1],!0,y[0],A)),E=y[1]+1;E<=b[1]-1;E++){var T=C.lines.get(E);x=C.translateBufferLineToString(E,!0),T!=null&&T.isWrapped?M[M.length-1]+=x:M.push(x)}y[1]!==b[1]&&(T=C.lines.get(b[1]),x=C.translateBufferLineToString(b[1],!0,0,b[0]),T&&T.isWrapped?M[M.length-1]+=x:M.push(x))}return M.map(function(U){return U.replace(d," ")}).join(g.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),S.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},S.prototype.refresh=function(y){var b=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return b._refresh()})),g.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},S.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},S.prototype._isClickInSelection=function(y){var b=this._getMouseBufferCoords(y),C=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!!(C&&M&&b)&&this._areCoordsInSelection(b,C,M)},S.prototype.isCellInSelection=function(y,b){var C=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!C||!M)&&this._areCoordsInSelection([y,b],C,M)},S.prototype._areCoordsInSelection=function(y,b,C){return y[1]>b[1]&&y[1]<C[1]||b[1]===C[1]&&y[1]===b[1]&&y[0]>=b[0]&&y[0]<C[0]||b[1]<C[1]&&y[1]===C[1]&&y[0]<C[0]||b[1]<C[1]&&y[1]===b[1]&&y[0]>=b[0]},S.prototype._selectWordAtCursor=function(y,b){var C,M,L=(M=(C=this._linkifier.currentLink)===null||C===void 0?void 0:C.link)===null||M===void 0?void 0:M.range;if(L)return this._model.selectionStart=[L.start.x-1,L.start.y-1],this._model.selectionStartLength=(0,i.getRangeLength)(L,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var R=this._getMouseBufferCoords(y);return!!R&&(this._selectWordAt(R,b),this._model.selectionEnd=void 0,!0)},S.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},S.prototype.selectLines=function(y,b){this._model.clearSelection(),y=Math.max(y,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()},S.prototype._onTrim=function(y){this._model.onTrim(y)&&this.refresh()},S.prototype._getMouseBufferCoords=function(y){var b=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b},S.prototype._getMouseEventScrollAmount=function(y){var b=(0,t.getCoordsRelativeToElement)(window,y,this._screenElement)[1],C=this._renderService.dimensions.canvasHeight;return b>=0&&b<=C?0:(b>C&&(b-=C),b=Math.min(Math.max(b,-50),50),(b/=50)/Math.abs(b)+Math.round(14*b))},S.prototype.shouldForceSelection=function(y){return g.isMac?y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:y.shiftKey},S.prototype.onMouseDown=function(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._onIncrementalClick(y):y.detail===1?this._onSingleClick(y):y.detail===2?this._onDoubleClick(y):y.detail===3&&this._onTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}},S.prototype._addMouseDownListeners=function(){var y=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return y._dragScroll()},50)},S.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},S.prototype._onIncrementalClick=function(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))},S.prototype._onSingleClick=function(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),this._model.selectionStart){this._model.selectionEnd=void 0;var b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},S.prototype._onDoubleClick=function(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)},S.prototype._onTripleClick=function(y){var b=this._getMouseBufferCoords(y);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))},S.prototype.shouldColumnSelect=function(y){return y.altKey&&!(g.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},S.prototype._onMouseMove=function(y){if(y.stopImmediatePropagation(),this._model.selectionStart){var b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var C=this._bufferService.buffer;if(this._model.selectionEnd[1]<C.lines.length){var M=C.lines.get(this._model.selectionEnd[1]);M&&M.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},S.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}},S.prototype._onMouseUp=function(y){var b=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&y.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var C=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(C&&C[0]!==void 0&&C[1]!==void 0){var M=(0,e.moveToCellSequence)(C[0]-1,C[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(M,!0)}}}else this._fireEventIfSelectionChanged()},S.prototype._fireEventIfSelectionChanged=function(){var y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,C=!(!y||!b||y[0]===b[0]&&y[1]===b[1]);C?y&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,b,C)):this._oldHasSelection&&this._fireOnSelectionChange(y,b,C)},S.prototype._fireOnSelectionChange=function(y,b,C){this._oldSelectionStart=y,this._oldSelectionEnd=b,this._oldHasSelection=C,this._onSelectionChange.fire()},S.prototype._onBufferActivate=function(y){var b=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(function(C){return b._onTrim(C)})},S.prototype._convertViewportColToCharacterIndex=function(y,b){for(var C=b[0],M=0;b[0]>=M;M++){var L=y.loadCell(M,this._workCell).getChars().length;this._workCell.getWidth()===0?C--:L>1&&b[0]!==M&&(C+=L-1)}return C},S.prototype.setSelection=function(y,b,C){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,b],this._model.selectionStartLength=C,this.refresh(),this._fireEventIfSelectionChanged()},S.prototype.rightClickSelect=function(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},S.prototype._getWordAt=function(y,b,C,M){if(C===void 0&&(C=!0),M===void 0&&(M=!0),!(y[0]>=this._bufferService.cols)){var L=this._bufferService.buffer,R=L.lines.get(y[1]);if(R){var E=L.translateBufferLineToString(y[1],!1),x=this._convertViewportColToCharacterIndex(R,y),A=x,T=y[0]-x,U=0,z=0,W=0,K=0;if(E.charAt(x)===" "){for(;x>0&&E.charAt(x-1)===" ";)x--;for(;A<E.length&&E.charAt(A+1)===" ";)A++}else{var G=y[0],k=y[0];R.getWidth(G)===0&&(U++,G--),R.getWidth(k)===2&&(z++,k++);var $=R.getString(k).length;for($>1&&(K+=$-1,A+=$-1);G>0&&x>0&&!this._isCharWordSeparator(R.loadCell(G-1,this._workCell));){R.loadCell(G-1,this._workCell);var Y=this._workCell.getChars().length;this._workCell.getWidth()===0?(U++,G--):Y>1&&(W+=Y-1,x-=Y-1),x--,G--}for(;k<R.length&&A+1<E.length&&!this._isCharWordSeparator(R.loadCell(k+1,this._workCell));){R.loadCell(k+1,this._workCell);var he=this._workCell.getChars().length;this._workCell.getWidth()===2?(z++,k++):he>1&&(K+=he-1,A+=he-1),A++,k++}}A++;var B=x+T-U+W,oe=Math.min(this._bufferService.cols,A-x+U+z-W-K);if(b||E.slice(x,A).trim()!==""){if(C&&B===0&&R.getCodePoint(0)!==32){var V=L.lines.get(y[1]-1);if(V&&R.isWrapped&&V.getCodePoint(this._bufferService.cols-1)!==32){var q=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if(q){var O=this._bufferService.cols-q.start;B-=O,oe+=O}}}if(M&&B+oe===this._bufferService.cols&&R.getCodePoint(this._bufferService.cols-1)!==32){var D=L.lines.get(y[1]+1);if((D==null?void 0:D.isWrapped)&&D.getCodePoint(0)!==32){var N=this._getWordAt([0,y[1]+1],!1,!1,!0);N&&(oe+=N.length)}}return{start:B,length:oe}}}}},S.prototype._selectWordAt=function(y,b){var C=this._getWordAt(y,b);if(C){for(;C.start<0;)C.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[C.start,y[1]],this._model.selectionStartLength=C.length}},S.prototype._selectToWordAt=function(y){var b=this._getWordAt(y,!0);if(b){for(var C=y[1];b.start<0;)b.start+=this._bufferService.cols,C--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,C++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,C]}},S.prototype._isCharWordSeparator=function(y){return y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(y.getChars())>=0},S.prototype._selectLineAt=function(y){var b=this._bufferService.buffer.getWrappedRangeForLine(y),C={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,i.getRangeLength)(C,this._bufferService.cols)},f([l(3,a.IBufferService),l(4,a.ICoreService),l(5,h.IMouseService),l(6,a.IOptionsService),l(7,h.IRenderService)],S)}(r.Disposable);p.SelectionService=u},4725:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ICharacterJoinerService=p.ISoundService=p.ISelectionService=p.IRenderService=p.IMouseService=p.ICoreBrowserService=p.ICharSizeService=void 0;var c=w(8343);p.ICharSizeService=(0,c.createDecorator)("CharSizeService"),p.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),p.IMouseService=(0,c.createDecorator)("MouseService"),p.IRenderService=(0,c.createDecorator)("RenderService"),p.ISelectionService=(0,c.createDecorator)("SelectionService"),p.ISoundService=(0,c.createDecorator)("SoundService"),p.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService")},357:function(H,p,w){var c=this&&this.__decorate||function(g,v,s,o){var h,a=arguments.length,t=a<3?v:o===null?o=Object.getOwnPropertyDescriptor(v,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(g,v,s,o);else for(var e=g.length-1;e>=0;e--)(h=g[e])&&(t=(a<3?h(t):a>3?h(v,s,t):h(v,s))||t);return a>3&&t&&Object.defineProperty(v,s,t),t},_=this&&this.__param||function(g,v){return function(s,o){v(s,o,g)}};Object.defineProperty(p,"__esModule",{value:!0}),p.SoundService=void 0;var f=w(2585),l=function(){function g(v){this._optionsService=v}return Object.defineProperty(g,"audioContext",{get:function(){if(!g._audioContext){var v=window.AudioContext||window.webkitAudioContext;if(!v)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;g._audioContext=new v}return g._audioContext},enumerable:!1,configurable:!0}),g.prototype.playBellSound=function(){var v=g.audioContext;if(v){var s=v.createBufferSource();v.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),function(o){s.buffer=o,s.connect(v.destination),s.start(0)})}},g.prototype._base64ToArrayBuffer=function(v){for(var s=window.atob(v),o=s.length,h=new Uint8Array(o),a=0;a<o;a++)h[a]=s.charCodeAt(a);return h.buffer},g.prototype._removeMimeType=function(v){return v.split(",")[1]},g=c([_(0,f.IOptionsService)],g)}();p.SoundService=l},6349:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CircularList=void 0;var c=w(8460),_=function(){function f(l){this._maxLength=l,this.onDeleteEmitter=new c.EventEmitter,this.onInsertEmitter=new c.EventEmitter,this.onTrimEmitter=new c.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(f.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"maxLength",{get:function(){return this._maxLength},set:function(l){if(this._maxLength!==l){for(var g=new Array(l),v=0;v<Math.min(l,this.length);v++)g[v]=this._array[this._getCyclicIndex(v)];this._array=g,this._maxLength=l,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._length},set:function(l){if(l>this._length)for(var g=this._length;g<l;g++)this._array[g]=void 0;this._length=l},enumerable:!1,configurable:!0}),f.prototype.get=function(l){return this._array[this._getCyclicIndex(l)]},f.prototype.set=function(l,g){this._array[this._getCyclicIndex(l)]=g},f.prototype.push=function(l){this._array[this._getCyclicIndex(this._length)]=l,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},f.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(f.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),f.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},f.prototype.splice=function(l,g){for(var v=[],s=2;s<arguments.length;s++)v[s-2]=arguments[s];if(g){for(var o=l;o<this._length-g;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+g)];this._length-=g,this.onDeleteEmitter.fire({index:l,amount:g})}for(o=this._length-1;o>=l;o--)this._array[this._getCyclicIndex(o+v.length)]=this._array[this._getCyclicIndex(o)];for(o=0;o<v.length;o++)this._array[this._getCyclicIndex(l+o)]=v[o];if(v.length&&this.onInsertEmitter.fire({index:l,amount:v.length}),this._length+v.length>this._maxLength){var h=this._length+v.length-this._maxLength;this._startIndex+=h,this._length=this._maxLength,this.onTrimEmitter.fire(h)}else this._length+=v.length},f.prototype.trimStart=function(l){l>this._length&&(l=this._length),this._startIndex+=l,this._length-=l,this.onTrimEmitter.fire(l)},f.prototype.shiftElements=function(l,g,v){if(!(g<=0)){if(l<0||l>=this._length)throw new Error("start argument out of range");if(l+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(var s=g-1;s>=0;s--)this.set(l+s+v,this.get(l+s));var o=l+g+v-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(s=0;s<g;s++)this.set(l+s+v,this.get(l+s))}},f.prototype._getCyclicIndex=function(l){return(this._startIndex+l)%this._maxLength},f}();p.CircularList=_},1439:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.clone=void 0,p.clone=function w(c,_){if(_===void 0&&(_=5),typeof c!="object")return c;var f=Array.isArray(c)?[]:{};for(var l in c)f[l]=_<=1?c[l]:c[l]&&w(c[l],_-1);return f}},8055:function(H,p){var w,c,_,f,l=this&&this.__read||function(s,o){var h=typeof Symbol=="function"&&s[Symbol.iterator];if(!h)return s;var a,t,e=h.call(s),r=[];try{for(;(o===void 0||o-- >0)&&!(a=e.next()).done;)r.push(a.value)}catch(i){t={error:i}}finally{try{a&&!a.done&&(h=e.return)&&h.call(e)}finally{if(t)throw t.error}}return r};function g(s){var o=s.toString(16);return o.length<2?"0"+o:o}function v(s,o){return s<o?(o+.05)/(s+.05):(s+.05)/(o+.05)}Object.defineProperty(p,"__esModule",{value:!0}),p.contrastRatio=p.toPaddedHex=p.rgba=p.rgb=p.css=p.color=p.channels=void 0,function(s){s.toCss=function(o,h,a,t){return t!==void 0?"#"+g(o)+g(h)+g(a)+g(t):"#"+g(o)+g(h)+g(a)},s.toRgba=function(o,h,a,t){return t===void 0&&(t=255),(o<<24|h<<16|a<<8|t)>>>0}}(w=p.channels||(p.channels={})),(c=p.color||(p.color={})).blend=function(s,o){var h=(255&o.rgba)/255;if(h===1)return{css:o.css,rgba:o.rgba};var a=o.rgba>>24&255,t=o.rgba>>16&255,e=o.rgba>>8&255,r=s.rgba>>24&255,i=s.rgba>>16&255,n=s.rgba>>8&255,d=r+Math.round((a-r)*h),u=i+Math.round((t-i)*h),m=n+Math.round((e-n)*h);return{css:w.toCss(d,u,m),rgba:w.toRgba(d,u,m)}},c.isOpaque=function(s){return(255&s.rgba)==255},c.ensureContrastRatio=function(s,o,h){var a=f.ensureContrastRatio(s.rgba,o.rgba,h);if(a)return f.toColor(a>>24&255,a>>16&255,a>>8&255)},c.opaque=function(s){var o=(255|s.rgba)>>>0,h=l(f.toChannels(o),3),a=h[0],t=h[1],e=h[2];return{css:w.toCss(a,t,e),rgba:o}},c.opacity=function(s,o){var h=Math.round(255*o),a=l(f.toChannels(s.rgba),3),t=a[0],e=a[1],r=a[2];return{css:w.toCss(t,e,r,h),rgba:w.toRgba(t,e,r,h)}},c.toColorRGB=function(s){return[s.rgba>>24&255,s.rgba>>16&255,s.rgba>>8&255]},(p.css||(p.css={})).toColor=function(s){if(s.match(/#[0-9a-f]{3,8}/i))switch(s.length){case 4:var o=parseInt(s.slice(1,2).repeat(2),16),h=parseInt(s.slice(2,3).repeat(2),16),a=parseInt(s.slice(3,4).repeat(2),16);return f.toColor(o,h,a);case 5:o=parseInt(s.slice(1,2).repeat(2),16),h=parseInt(s.slice(2,3).repeat(2),16),a=parseInt(s.slice(3,4).repeat(2),16);var t=parseInt(s.slice(4,5).repeat(2),16);return f.toColor(o,h,a,t);case 7:return{css:s,rgba:(parseInt(s.slice(1),16)<<8|255)>>>0};case 9:return{css:s,rgba:parseInt(s.slice(1),16)>>>0}}var e=s.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(e)return o=parseInt(e[1]),h=parseInt(e[2]),a=parseInt(e[3]),t=Math.round(255*(e[5]===void 0?1:parseFloat(e[5]))),f.toColor(o,h,a,t);throw new Error("css.toColor: Unsupported css format")},function(s){function o(h,a,t){var e=h/255,r=a/255,i=t/255;return .2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}s.relativeLuminance=function(h){return o(h>>16&255,h>>8&255,255&h)},s.relativeLuminance2=o}(_=p.rgb||(p.rgb={})),function(s){function o(a,t,e){for(var r=a>>24&255,i=a>>16&255,n=a>>8&255,d=t>>24&255,u=t>>16&255,m=t>>8&255,S=v(_.relativeLuminance2(d,u,m),_.relativeLuminance2(r,i,n));S<e&&(d>0||u>0||m>0);)d-=Math.max(0,Math.ceil(.1*d)),u-=Math.max(0,Math.ceil(.1*u)),m-=Math.max(0,Math.ceil(.1*m)),S=v(_.relativeLuminance2(d,u,m),_.relativeLuminance2(r,i,n));return(d<<24|u<<16|m<<8|255)>>>0}function h(a,t,e){for(var r=a>>24&255,i=a>>16&255,n=a>>8&255,d=t>>24&255,u=t>>16&255,m=t>>8&255,S=v(_.relativeLuminance2(d,u,m),_.relativeLuminance2(r,i,n));S<e&&(d<255||u<255||m<255);)d=Math.min(255,d+Math.ceil(.1*(255-d))),u=Math.min(255,u+Math.ceil(.1*(255-u))),m=Math.min(255,m+Math.ceil(.1*(255-m))),S=v(_.relativeLuminance2(d,u,m),_.relativeLuminance2(r,i,n));return(d<<24|u<<16|m<<8|255)>>>0}s.ensureContrastRatio=function(a,t,e){var r=_.relativeLuminance(a>>8),i=_.relativeLuminance(t>>8);if(v(r,i)<e){if(i<r){var n=o(a,t,e),d=v(r,_.relativeLuminance(n>>8));if(d<e){var u=h(a,a,e);return d>v(r,_.relativeLuminance(u>>8))?n:u}return n}var m=h(a,t,e),S=v(r,_.relativeLuminance(m>>8));return S<e?(u=o(a,a,e),S>v(r,_.relativeLuminance(u>>8))?m:u):m}},s.reduceLuminance=o,s.increaseLuminance=h,s.toChannels=function(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]},s.toColor=function(a,t,e,r){return{css:w.toCss(a,t,e,r),rgba:w.toRgba(a,t,e,r)}}}(f=p.rgba||(p.rgba={})),p.toPaddedHex=g,p.contrastRatio=v},8969:function(H,p,w){var c,_=this&&this.__extends||(c=function(b,C){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,L){M.__proto__=L}||function(M,L){for(var R in L)Object.prototype.hasOwnProperty.call(L,R)&&(M[R]=L[R])},c(b,C)},function(b,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function M(){this.constructor=b}c(b,C),b.prototype=C===null?Object.create(C):(M.prototype=C.prototype,new M)}),f=this&&this.__values||function(b){var C=typeof Symbol=="function"&&Symbol.iterator,M=C&&b[C],L=0;if(M)return M.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&L>=b.length&&(b=void 0),{value:b&&b[L++],done:!b}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.CoreTerminal=void 0;var l=w(844),g=w(2585),v=w(4348),s=w(7866),o=w(744),h=w(7302),a=w(6975),t=w(8460),e=w(1753),r=w(3730),i=w(1480),n=w(7994),d=w(9282),u=w(5435),m=w(5981),S=!1,y=function(b){function C(M){var L=b.call(this)||this;return L._onBinary=new t.EventEmitter,L._onData=new t.EventEmitter,L._onLineFeed=new t.EventEmitter,L._onResize=new t.EventEmitter,L._onScroll=new t.EventEmitter,L._onWriteParsed=new t.EventEmitter,L._instantiationService=new v.InstantiationService,L.optionsService=new h.OptionsService(M),L._instantiationService.setService(g.IOptionsService,L.optionsService),L._bufferService=L.register(L._instantiationService.createInstance(o.BufferService)),L._instantiationService.setService(g.IBufferService,L._bufferService),L._logService=L._instantiationService.createInstance(s.LogService),L._instantiationService.setService(g.ILogService,L._logService),L.coreService=L.register(L._instantiationService.createInstance(a.CoreService,function(){return L.scrollToBottom()})),L._instantiationService.setService(g.ICoreService,L.coreService),L.coreMouseService=L._instantiationService.createInstance(e.CoreMouseService),L._instantiationService.setService(g.ICoreMouseService,L.coreMouseService),L._dirtyRowService=L._instantiationService.createInstance(r.DirtyRowService),L._instantiationService.setService(g.IDirtyRowService,L._dirtyRowService),L.unicodeService=L._instantiationService.createInstance(i.UnicodeService),L._instantiationService.setService(g.IUnicodeService,L.unicodeService),L._charsetService=L._instantiationService.createInstance(n.CharsetService),L._instantiationService.setService(g.ICharsetService,L._charsetService),L._inputHandler=new u.InputHandler(L._bufferService,L._charsetService,L.coreService,L._dirtyRowService,L._logService,L.optionsService,L.coreMouseService,L.unicodeService),L.register((0,t.forwardEvent)(L._inputHandler.onLineFeed,L._onLineFeed)),L.register(L._inputHandler),L.register((0,t.forwardEvent)(L._bufferService.onResize,L._onResize)),L.register((0,t.forwardEvent)(L.coreService.onData,L._onData)),L.register((0,t.forwardEvent)(L.coreService.onBinary,L._onBinary)),L.register(L.optionsService.onOptionChange(function(R){return L._updateOptions(R)})),L.register(L._bufferService.onScroll(function(R){L._onScroll.fire({position:L._bufferService.buffer.ydisp,source:0}),L._dirtyRowService.markRangeDirty(L._bufferService.buffer.scrollTop,L._bufferService.buffer.scrollBottom)})),L.register(L._inputHandler.onScroll(function(R){L._onScroll.fire({position:L._bufferService.buffer.ydisp,source:0}),L._dirtyRowService.markRangeDirty(L._bufferService.buffer.scrollTop,L._bufferService.buffer.scrollBottom)})),L._writeBuffer=new m.WriteBuffer(function(R,E){return L._inputHandler.parse(R,E)}),L.register((0,t.forwardEvent)(L._writeBuffer.onWriteParsed,L._onWriteParsed)),L}return _(C,b),Object.defineProperty(C.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onScroll",{get:function(){var M=this;return this._onScrollApi||(this._onScrollApi=new t.EventEmitter,this.register(this._onScroll.event(function(L){var R;(R=M._onScrollApi)===null||R===void 0||R.fire(L.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"options",{get:function(){return this.optionsService.options},set:function(M){for(var L in M)this.optionsService.options[L]=M[L]},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){var M;this._isDisposed||(b.prototype.dispose.call(this),(M=this._windowsMode)===null||M===void 0||M.dispose(),this._windowsMode=void 0)},C.prototype.write=function(M,L){this._writeBuffer.write(M,L)},C.prototype.writeSync=function(M,L){this._logService.logLevel<=g.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(M,L)},C.prototype.resize=function(M,L){isNaN(M)||isNaN(L)||(M=Math.max(M,o.MINIMUM_COLS),L=Math.max(L,o.MINIMUM_ROWS),this._bufferService.resize(M,L))},C.prototype.scroll=function(M,L){L===void 0&&(L=!1),this._bufferService.scroll(M,L)},C.prototype.scrollLines=function(M,L,R){this._bufferService.scrollLines(M,L,R)},C.prototype.scrollPages=function(M){this._bufferService.scrollPages(M)},C.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},C.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},C.prototype.scrollToLine=function(M){this._bufferService.scrollToLine(M)},C.prototype.registerEscHandler=function(M,L){return this._inputHandler.registerEscHandler(M,L)},C.prototype.registerDcsHandler=function(M,L){return this._inputHandler.registerDcsHandler(M,L)},C.prototype.registerCsiHandler=function(M,L){return this._inputHandler.registerCsiHandler(M,L)},C.prototype.registerOscHandler=function(M,L){return this._inputHandler.registerOscHandler(M,L)},C.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},C.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},C.prototype._updateOptions=function(M){var L;switch(M){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():((L=this._windowsMode)===null||L===void 0||L.dispose(),this._windowsMode=void 0)}},C.prototype._enableWindowsMode=function(){var M=this;if(!this._windowsMode){var L=[];L.push(this.onLineFeed(d.updateWindowsModeWrappedState.bind(null,this._bufferService))),L.push(this.registerCsiHandler({final:"H"},function(){return(0,d.updateWindowsModeWrappedState)(M._bufferService),!1})),this._windowsMode={dispose:function(){var R,E;try{for(var x=f(L),A=x.next();!A.done;A=x.next())A.value.dispose()}catch(T){R={error:T}}finally{try{A&&!A.done&&(E=x.return)&&E.call(x)}finally{if(R)throw R.error}}}}}},C}(l.Disposable);p.CoreTerminal=y},8460:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.forwardEvent=p.EventEmitter=void 0;var w=function(){function c(){this._listeners=[],this._disposed=!1}return Object.defineProperty(c.prototype,"event",{get:function(){var _=this;return this._event||(this._event=function(f){return _._listeners.push(f),{dispose:function(){if(!_._disposed){for(var l=0;l<_._listeners.length;l++)if(_._listeners[l]===f)return void _._listeners.splice(l,1)}}}}),this._event},enumerable:!1,configurable:!0}),c.prototype.fire=function(_,f){for(var l=[],g=0;g<this._listeners.length;g++)l.push(this._listeners[g]);for(g=0;g<l.length;g++)l[g].call(void 0,_,f)},c.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},c}();p.EventEmitter=w,p.forwardEvent=function(c,_){return c(function(f){return _.fire(f)})}},5435:function(H,p,w){var c,_=this&&this.__extends||(c=function(L,R){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,x){E.__proto__=x}||function(E,x){for(var A in x)Object.prototype.hasOwnProperty.call(x,A)&&(E[A]=x[A])},c(L,R)},function(L,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function E(){this.constructor=L}c(L,R),L.prototype=R===null?Object.create(R):(E.prototype=R.prototype,new E)});Object.defineProperty(p,"__esModule",{value:!0}),p.InputHandler=p.WindowsOptionsReportType=void 0;var f,l=w(2584),g=w(7116),v=w(2015),s=w(844),o=w(8273),h=w(482),a=w(8437),t=w(8460),e=w(643),r=w(511),i=w(3734),n=w(2585),d=w(6242),u=w(6351),m=w(5941),S={"(":0,")":1,"*":2,"+":3,"-":1,".":2},y=131072;function b(L,R){if(L>24)return R.setWinLines||!1;switch(L){case 1:return!!R.restoreWin;case 2:return!!R.minimizeWin;case 3:return!!R.setWinPosition;case 4:return!!R.setWinSizePixels;case 5:return!!R.raiseWin;case 6:return!!R.lowerWin;case 7:return!!R.refreshWin;case 8:return!!R.setWinSizeChars;case 9:return!!R.maximizeWin;case 10:return!!R.fullscreenWin;case 11:return!!R.getWinState;case 13:return!!R.getWinPosition;case 14:return!!R.getWinSizePixels;case 15:return!!R.getScreenSizePixels;case 16:return!!R.getCellSizePixels;case 18:return!!R.getWinSizeChars;case 19:return!!R.getScreenSizeChars;case 20:return!!R.getIconTitle;case 21:return!!R.getWinTitle;case 22:return!!R.pushTitle;case 23:return!!R.popTitle;case 24:return!!R.setWinLines}return!1}(function(L){L[L.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",L[L.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(f=p.WindowsOptionsReportType||(p.WindowsOptionsReportType={}));var C=function(){function L(R,E,x,A){this._bufferService=R,this._coreService=E,this._logService=x,this._optionsService=A,this._data=new Uint32Array(0)}return L.prototype.hook=function(R){this._data=new Uint32Array(0)},L.prototype.put=function(R,E,x){this._data=(0,o.concat)(this._data,R.subarray(E,x))},L.prototype.unhook=function(R){if(!R)return this._data=new Uint32Array(0),!0;var E=(0,h.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),E){case'"q':this._coreService.triggerDataEvent(l.C0.ESC+'P1$r0"q'+l.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(l.C0.ESC+'P1$r61;1"p'+l.C0.ESC+"\\");break;case"r":var x=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(l.C0.ESC+"P1$r"+x+l.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(l.C0.ESC+"P1$r0m"+l.C0.ESC+"\\");break;case" q":var A={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];A-=this._optionsService.rawOptions.cursorBlink?1:0,this._coreService.triggerDataEvent(l.C0.ESC+"P1$r"+A+" q"+l.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",E),this._coreService.triggerDataEvent(l.C0.ESC+"P0$r"+l.C0.ESC+"\\")}return!0},L}(),M=function(L){function R(E,x,A,T,U,z,W,K,G){G===void 0&&(G=new v.EscapeSequenceParser);var k=L.call(this)||this;k._bufferService=E,k._charsetService=x,k._coreService=A,k._dirtyRowService=T,k._logService=U,k._optionsService=z,k._coreMouseService=W,k._unicodeService=K,k._parser=G,k._parseBuffer=new Uint32Array(4096),k._stringDecoder=new h.StringToUtf32,k._utf8Decoder=new h.Utf8ToUtf32,k._workCell=new r.CellData,k._windowTitle="",k._iconName="",k._windowTitleStack=[],k._iconNameStack=[],k._curAttrData=a.DEFAULT_ATTR_DATA.clone(),k._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone(),k._onRequestBell=new t.EventEmitter,k._onRequestRefreshRows=new t.EventEmitter,k._onRequestReset=new t.EventEmitter,k._onRequestSendFocus=new t.EventEmitter,k._onRequestSyncScrollBar=new t.EventEmitter,k._onRequestWindowsOptionsReport=new t.EventEmitter,k._onA11yChar=new t.EventEmitter,k._onA11yTab=new t.EventEmitter,k._onCursorMove=new t.EventEmitter,k._onLineFeed=new t.EventEmitter,k._onScroll=new t.EventEmitter,k._onTitleChange=new t.EventEmitter,k._onColor=new t.EventEmitter,k._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},k._specialColors=[256,257,258],k.register(k._parser),k._activeBuffer=k._bufferService.buffer,k.register(k._bufferService.buffers.onBufferActivate(function(B){return k._activeBuffer=B.activeBuffer})),k._parser.setCsiHandlerFallback(function(B,oe){k._logService.debug("Unknown CSI code: ",{identifier:k._parser.identToString(B),params:oe.toArray()})}),k._parser.setEscHandlerFallback(function(B){k._logService.debug("Unknown ESC code: ",{identifier:k._parser.identToString(B)})}),k._parser.setExecuteHandlerFallback(function(B){k._logService.debug("Unknown EXECUTE code: ",{code:B})}),k._parser.setOscHandlerFallback(function(B,oe,V){k._logService.debug("Unknown OSC code: ",{identifier:B,action:oe,data:V})}),k._parser.setDcsHandlerFallback(function(B,oe,V){oe==="HOOK"&&(V=V.toArray()),k._logService.debug("Unknown DCS code: ",{identifier:k._parser.identToString(B),action:oe,payload:V})}),k._parser.setPrintHandler(function(B,oe,V){return k.print(B,oe,V)}),k._parser.registerCsiHandler({final:"@"},function(B){return k.insertChars(B)}),k._parser.registerCsiHandler({intermediates:" ",final:"@"},function(B){return k.scrollLeft(B)}),k._parser.registerCsiHandler({final:"A"},function(B){return k.cursorUp(B)}),k._parser.registerCsiHandler({intermediates:" ",final:"A"},function(B){return k.scrollRight(B)}),k._parser.registerCsiHandler({final:"B"},function(B){return k.cursorDown(B)}),k._parser.registerCsiHandler({final:"C"},function(B){return k.cursorForward(B)}),k._parser.registerCsiHandler({final:"D"},function(B){return k.cursorBackward(B)}),k._parser.registerCsiHandler({final:"E"},function(B){return k.cursorNextLine(B)}),k._parser.registerCsiHandler({final:"F"},function(B){return k.cursorPrecedingLine(B)}),k._parser.registerCsiHandler({final:"G"},function(B){return k.cursorCharAbsolute(B)}),k._parser.registerCsiHandler({final:"H"},function(B){return k.cursorPosition(B)}),k._parser.registerCsiHandler({final:"I"},function(B){return k.cursorForwardTab(B)}),k._parser.registerCsiHandler({final:"J"},function(B){return k.eraseInDisplay(B)}),k._parser.registerCsiHandler({prefix:"?",final:"J"},function(B){return k.eraseInDisplay(B)}),k._parser.registerCsiHandler({final:"K"},function(B){return k.eraseInLine(B)}),k._parser.registerCsiHandler({prefix:"?",final:"K"},function(B){return k.eraseInLine(B)}),k._parser.registerCsiHandler({final:"L"},function(B){return k.insertLines(B)}),k._parser.registerCsiHandler({final:"M"},function(B){return k.deleteLines(B)}),k._parser.registerCsiHandler({final:"P"},function(B){return k.deleteChars(B)}),k._parser.registerCsiHandler({final:"S"},function(B){return k.scrollUp(B)}),k._parser.registerCsiHandler({final:"T"},function(B){return k.scrollDown(B)}),k._parser.registerCsiHandler({final:"X"},function(B){return k.eraseChars(B)}),k._parser.registerCsiHandler({final:"Z"},function(B){return k.cursorBackwardTab(B)}),k._parser.registerCsiHandler({final:"`"},function(B){return k.charPosAbsolute(B)}),k._parser.registerCsiHandler({final:"a"},function(B){return k.hPositionRelative(B)}),k._parser.registerCsiHandler({final:"b"},function(B){return k.repeatPrecedingCharacter(B)}),k._parser.registerCsiHandler({final:"c"},function(B){return k.sendDeviceAttributesPrimary(B)}),k._parser.registerCsiHandler({prefix:">",final:"c"},function(B){return k.sendDeviceAttributesSecondary(B)}),k._parser.registerCsiHandler({final:"d"},function(B){return k.linePosAbsolute(B)}),k._parser.registerCsiHandler({final:"e"},function(B){return k.vPositionRelative(B)}),k._parser.registerCsiHandler({final:"f"},function(B){return k.hVPosition(B)}),k._parser.registerCsiHandler({final:"g"},function(B){return k.tabClear(B)}),k._parser.registerCsiHandler({final:"h"},function(B){return k.setMode(B)}),k._parser.registerCsiHandler({prefix:"?",final:"h"},function(B){return k.setModePrivate(B)}),k._parser.registerCsiHandler({final:"l"},function(B){return k.resetMode(B)}),k._parser.registerCsiHandler({prefix:"?",final:"l"},function(B){return k.resetModePrivate(B)}),k._parser.registerCsiHandler({final:"m"},function(B){return k.charAttributes(B)}),k._parser.registerCsiHandler({final:"n"},function(B){return k.deviceStatus(B)}),k._parser.registerCsiHandler({prefix:"?",final:"n"},function(B){return k.deviceStatusPrivate(B)}),k._parser.registerCsiHandler({intermediates:"!",final:"p"},function(B){return k.softReset(B)}),k._parser.registerCsiHandler({intermediates:" ",final:"q"},function(B){return k.setCursorStyle(B)}),k._parser.registerCsiHandler({final:"r"},function(B){return k.setScrollRegion(B)}),k._parser.registerCsiHandler({final:"s"},function(B){return k.saveCursor(B)}),k._parser.registerCsiHandler({final:"t"},function(B){return k.windowOptions(B)}),k._parser.registerCsiHandler({final:"u"},function(B){return k.restoreCursor(B)}),k._parser.registerCsiHandler({intermediates:"'",final:"}"},function(B){return k.insertColumns(B)}),k._parser.registerCsiHandler({intermediates:"'",final:"~"},function(B){return k.deleteColumns(B)}),k._parser.setExecuteHandler(l.C0.BEL,function(){return k.bell()}),k._parser.setExecuteHandler(l.C0.LF,function(){return k.lineFeed()}),k._parser.setExecuteHandler(l.C0.VT,function(){return k.lineFeed()}),k._parser.setExecuteHandler(l.C0.FF,function(){return k.lineFeed()}),k._parser.setExecuteHandler(l.C0.CR,function(){return k.carriageReturn()}),k._parser.setExecuteHandler(l.C0.BS,function(){return k.backspace()}),k._parser.setExecuteHandler(l.C0.HT,function(){return k.tab()}),k._parser.setExecuteHandler(l.C0.SO,function(){return k.shiftOut()}),k._parser.setExecuteHandler(l.C0.SI,function(){return k.shiftIn()}),k._parser.setExecuteHandler(l.C1.IND,function(){return k.index()}),k._parser.setExecuteHandler(l.C1.NEL,function(){return k.nextLine()}),k._parser.setExecuteHandler(l.C1.HTS,function(){return k.tabSet()}),k._parser.registerOscHandler(0,new d.OscHandler(function(B){return k.setTitle(B),k.setIconName(B),!0})),k._parser.registerOscHandler(1,new d.OscHandler(function(B){return k.setIconName(B)})),k._parser.registerOscHandler(2,new d.OscHandler(function(B){return k.setTitle(B)})),k._parser.registerOscHandler(4,new d.OscHandler(function(B){return k.setOrReportIndexedColor(B)})),k._parser.registerOscHandler(10,new d.OscHandler(function(B){return k.setOrReportFgColor(B)})),k._parser.registerOscHandler(11,new d.OscHandler(function(B){return k.setOrReportBgColor(B)})),k._parser.registerOscHandler(12,new d.OscHandler(function(B){return k.setOrReportCursorColor(B)})),k._parser.registerOscHandler(104,new d.OscHandler(function(B){return k.restoreIndexedColor(B)})),k._parser.registerOscHandler(110,new d.OscHandler(function(B){return k.restoreFgColor(B)})),k._parser.registerOscHandler(111,new d.OscHandler(function(B){return k.restoreBgColor(B)})),k._parser.registerOscHandler(112,new d.OscHandler(function(B){return k.restoreCursorColor(B)})),k._parser.registerEscHandler({final:"7"},function(){return k.saveCursor()}),k._parser.registerEscHandler({final:"8"},function(){return k.restoreCursor()}),k._parser.registerEscHandler({final:"D"},function(){return k.index()}),k._parser.registerEscHandler({final:"E"},function(){return k.nextLine()}),k._parser.registerEscHandler({final:"H"},function(){return k.tabSet()}),k._parser.registerEscHandler({final:"M"},function(){return k.reverseIndex()}),k._parser.registerEscHandler({final:"="},function(){return k.keypadApplicationMode()}),k._parser.registerEscHandler({final:">"},function(){return k.keypadNumericMode()}),k._parser.registerEscHandler({final:"c"},function(){return k.fullReset()}),k._parser.registerEscHandler({final:"n"},function(){return k.setgLevel(2)}),k._parser.registerEscHandler({final:"o"},function(){return k.setgLevel(3)}),k._parser.registerEscHandler({final:"|"},function(){return k.setgLevel(3)}),k._parser.registerEscHandler({final:"}"},function(){return k.setgLevel(2)}),k._parser.registerEscHandler({final:"~"},function(){return k.setgLevel(1)}),k._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return k.selectDefaultCharset()}),k._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return k.selectDefaultCharset()});var $=function(B){Y._parser.registerEscHandler({intermediates:"(",final:B},function(){return k.selectCharset("("+B)}),Y._parser.registerEscHandler({intermediates:")",final:B},function(){return k.selectCharset(")"+B)}),Y._parser.registerEscHandler({intermediates:"*",final:B},function(){return k.selectCharset("*"+B)}),Y._parser.registerEscHandler({intermediates:"+",final:B},function(){return k.selectCharset("+"+B)}),Y._parser.registerEscHandler({intermediates:"-",final:B},function(){return k.selectCharset("-"+B)}),Y._parser.registerEscHandler({intermediates:".",final:B},function(){return k.selectCharset("."+B)}),Y._parser.registerEscHandler({intermediates:"/",final:B},function(){return k.selectCharset("/"+B)})},Y=this;for(var he in g.CHARSETS)$(he);return k._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return k.screenAlignmentPattern()}),k._parser.setErrorHandler(function(B){return k._logService.error("Parsing error: ",B),B}),k._parser.registerDcsHandler({intermediates:"$",final:"q"},new C(k._bufferService,k._coreService,k._logService,k._optionsService)),k}return _(R,L),Object.defineProperty(R.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),R.prototype.dispose=function(){L.prototype.dispose.call(this)},R.prototype._preserveStack=function(E,x,A,T){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=x,this._parseStack.decodedLength=A,this._parseStack.position=T},R.prototype._logSlowResolvingAsync=function(E){this._logService.logLevel<=n.LogLevelEnum.WARN&&Promise.race([E,new Promise(function(x,A){return setTimeout(function(){return A("#SLOW_TIMEOUT")},5e3)})]).catch(function(x){if(x!=="#SLOW_TIMEOUT")throw x;console.warn("async parser handler taking longer than 5000 ms")})},R.prototype.parse=function(E,x){var A,T=this._activeBuffer.x,U=this._activeBuffer.y,z=0,W=this._parseStack.paused;if(W){if(A=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,x))return this._logSlowResolvingAsync(A),A;T=this._parseStack.cursorStartX,U=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>y&&(z=this._parseStack.position+y)}if(this._logService.logLevel<=n.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?' "'+E+'"':' "'+Array.prototype.map.call(E,function($){return String.fromCharCode($)}).join("")+'"'),typeof E=="string"?E.split("").map(function($){return $.charCodeAt(0)}):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<y&&(this._parseBuffer=new Uint32Array(Math.min(E.length,y))),W||this._dirtyRowService.clearRange(),E.length>y)for(var K=z;K<E.length;K+=y){var G=K+y<E.length?K+y:E.length,k=typeof E=="string"?this._stringDecoder.decode(E.substring(K,G),this._parseBuffer):this._utf8Decoder.decode(E.subarray(K,G),this._parseBuffer);if(A=this._parser.parse(this._parseBuffer,k))return this._preserveStack(T,U,k,K),this._logSlowResolvingAsync(A),A}else if(!W&&(k=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer),A=this._parser.parse(this._parseBuffer,k)))return this._preserveStack(T,U,k,0),this._logSlowResolvingAsync(A),A;this._activeBuffer.x===T&&this._activeBuffer.y===U||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},R.prototype.print=function(E,x,A){var T,U,z=this._charsetService.charset,W=this._optionsService.rawOptions.screenReaderMode,K=this._bufferService.cols,G=this._coreService.decPrivateModes.wraparound,k=this._coreService.modes.insertMode,$=this._curAttrData,Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&A-x>0&&Y.getWidth(this._activeBuffer.x-1)===2&&Y.setCellFromCodePoint(this._activeBuffer.x-1,0,1,$.fg,$.bg,$.extended);for(var he=x;he<A;++he){if(T=E[he],U=this._unicodeService.wcwidth(T),T<127&&z){var B=z[String.fromCharCode(T)];B&&(T=B.charCodeAt(0))}if(W&&this._onA11yChar.fire((0,h.stringFromCodePoint)(T)),U||!this._activeBuffer.x){if(this._activeBuffer.x+U-1>=K){if(G){for(;this._activeBuffer.x<K;)Y.setCellFromCodePoint(this._activeBuffer.x++,0,1,$.fg,$.bg,$.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),Y=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=K-1,U===2)continue}if(k&&(Y.insertCells(this._activeBuffer.x,U,this._activeBuffer.getNullCell($),$),Y.getWidth(K-1)===2&&Y.setCellFromCodePoint(K-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,$.fg,$.bg,$.extended)),Y.setCellFromCodePoint(this._activeBuffer.x++,T,U,$.fg,$.bg,$.extended),U>0)for(;--U;)Y.setCellFromCodePoint(this._activeBuffer.x++,0,0,$.fg,$.bg,$.extended)}else Y.getWidth(this._activeBuffer.x-1)?Y.addCodepointToCell(this._activeBuffer.x-1,T):Y.addCodepointToCell(this._activeBuffer.x-2,T)}A-x>0&&(Y.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<K&&A-x>0&&Y.getWidth(this._activeBuffer.x)===0&&!Y.hasContent(this._activeBuffer.x)&&Y.setCellFromCodePoint(this._activeBuffer.x,0,1,$.fg,$.bg,$.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},R.prototype.registerCsiHandler=function(E,x){var A=this;return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,x):this._parser.registerCsiHandler(E,function(T){return!b(T.params[0],A._optionsService.rawOptions.windowOptions)||x(T)})},R.prototype.registerDcsHandler=function(E,x){return this._parser.registerDcsHandler(E,new u.DcsHandler(x))},R.prototype.registerEscHandler=function(E,x){return this._parser.registerEscHandler(E,x)},R.prototype.registerOscHandler=function(E,x){return this._parser.registerOscHandler(E,new d.OscHandler(x))},R.prototype.bell=function(){return this._onRequestBell.fire(),!0},R.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},R.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},R.prototype.backspace=function(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0?void 0:E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);x.hasWidth(this._activeBuffer.x)&&!x.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},R.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0},R.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},R.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},R.prototype._restrictCursor=function(E){E===void 0&&(E=this._bufferService.cols-1),this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},R.prototype._setCursor=function(E,x){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+x):(this._activeBuffer.x=E,this._activeBuffer.y=x),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},R.prototype._moveCursor=function(E,x){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+x)},R.prototype.cursorUp=function(E){var x=this._activeBuffer.y-this._activeBuffer.scrollTop;return x>=0?this._moveCursor(0,-Math.min(x,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0},R.prototype.cursorDown=function(E){var x=this._activeBuffer.scrollBottom-this._activeBuffer.y;return x>=0?this._moveCursor(0,Math.min(x,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0},R.prototype.cursorForward=function(E){return this._moveCursor(E.params[0]||1,0),!0},R.prototype.cursorBackward=function(E){return this._moveCursor(-(E.params[0]||1),0),!0},R.prototype.cursorNextLine=function(E){return this.cursorDown(E),this._activeBuffer.x=0,!0},R.prototype.cursorPrecedingLine=function(E){return this.cursorUp(E),this._activeBuffer.x=0,!0},R.prototype.cursorCharAbsolute=function(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0},R.prototype.cursorPosition=function(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0},R.prototype.charPosAbsolute=function(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0},R.prototype.hPositionRelative=function(E){return this._moveCursor(E.params[0]||1,0),!0},R.prototype.linePosAbsolute=function(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0},R.prototype.vPositionRelative=function(E){return this._moveCursor(0,E.params[0]||1),!0},R.prototype.hVPosition=function(E){return this.cursorPosition(E),!0},R.prototype.tabClear=function(E){var x=E.params[0];return x===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:x===3&&(this._activeBuffer.tabs={}),!0},R.prototype.cursorForwardTab=function(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var x=E.params[0]||1;x--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},R.prototype.cursorBackwardTab=function(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var x=E.params[0]||1;x--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},R.prototype._eraseInBufferLine=function(E,x,A,T){T===void 0&&(T=!1);var U=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);U.replaceCells(x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T&&(U.isWrapped=!1)},R.prototype._resetBufferLine=function(E){var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);x.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),x.isWrapped=!1},R.prototype.eraseInDisplay=function(E){var x;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(x=this._activeBuffer.y,this._dirtyRowService.markDirty(x),this._eraseInBufferLine(x++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);x<this._bufferService.rows;x++)this._resetBufferLine(x);this._dirtyRowService.markDirty(x);break;case 1:for(x=this._activeBuffer.y,this._dirtyRowService.markDirty(x),this._eraseInBufferLine(x,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(x+1).isWrapped=!1);x--;)this._resetBufferLine(x);this._dirtyRowService.markDirty(0);break;case 2:for(x=this._bufferService.rows,this._dirtyRowService.markDirty(x-1);x--;)this._resetBufferLine(x);this._dirtyRowService.markDirty(0);break;case 3:var A=this._activeBuffer.lines.length-this._bufferService.rows;A>0&&(this._activeBuffer.lines.trimStart(A),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-A,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-A,0),this._onScroll.fire(0))}return!0},R.prototype.eraseInLine=function(E){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},R.prototype.insertLines=function(E){this._restrictCursor();var x=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var A=this._activeBuffer.ybase+this._activeBuffer.y,T=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-T+1;x--;)this._activeBuffer.lines.splice(U-1,1),this._activeBuffer.lines.splice(A,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},R.prototype.deleteLines=function(E){this._restrictCursor();var x=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var A,T=this._activeBuffer.ybase+this._activeBuffer.y;for(A=this._bufferService.rows-1-this._activeBuffer.scrollBottom,A=this._bufferService.rows-1+this._activeBuffer.ybase-A;x--;)this._activeBuffer.lines.splice(T,1),this._activeBuffer.lines.splice(A,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},R.prototype.insertChars=function(E){this._restrictCursor();var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},R.prototype.deleteChars=function(E){this._restrictCursor();var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},R.prototype.scrollUp=function(E){for(var x=E.params[0]||1;x--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},R.prototype.scrollDown=function(E){for(var x=E.params[0]||1;x--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(a.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},R.prototype.scrollLeft=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=E.params[0]||1,A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);T.deleteCells(0,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},R.prototype.scrollRight=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=E.params[0]||1,A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);T.insertCells(0,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},R.prototype.insertColumns=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=E.params[0]||1,A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);T.insertCells(this._activeBuffer.x,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},R.prototype.deleteColumns=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var x=E.params[0]||1,A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){var T=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);T.deleteCells(this._activeBuffer.x,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),T.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},R.prototype.eraseChars=function(E){this._restrictCursor();var x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},R.prototype.repeatPrecedingCharacter=function(E){if(!this._parser.precedingCodepoint)return!0;for(var x=E.params[0]||1,A=new Uint32Array(x),T=0;T<x;++T)A[T]=this._parser.precedingCodepoint;return this.print(A,0,A.length),!0},R.prototype.sendDeviceAttributesPrimary=function(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0},R.prototype.sendDeviceAttributesSecondary=function(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0},R.prototype._is=function(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0},R.prototype.setMode=function(E){for(var x=0;x<E.length;x++)E.params[x]===4&&(this._coreService.modes.insertMode=!0);return!0},R.prototype.setModePrivate=function(E){for(var x=0;x<E.length;x++)switch(E.params[x]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},R.prototype.resetMode=function(E){for(var x=0;x<E.length;x++)E.params[x]===4&&(this._coreService.modes.insertMode=!1);return!0},R.prototype.resetModePrivate=function(E){for(var x=0;x<E.length;x++)switch(E.params[x]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[x]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},R.prototype._updateAttrColor=function(E,x,A,T,U){return x===2?(E|=50331648,E&=-16777216,E|=i.AttributeData.fromColorRGB([A,T,U])):x===5&&(E&=-50331904,E|=33554432|255&A),E},R.prototype._extractColor=function(E,x,A){var T=[0,0,-1,0,0,0],U=0,z=0;do{if(T[z+U]=E.params[x+z],E.hasSubParams(x+z)){var W=E.getSubParams(x+z),K=0;do T[1]===5&&(U=1),T[z+K+1+U]=W[K];while(++K<W.length&&K+z+1+U<T.length);break}if(T[1]===5&&z+U>=2||T[1]===2&&z+U>=5)break;T[1]&&(U=1)}while(++z+x<E.length&&z+U<T.length);for(K=2;K<T.length;++K)T[K]===-1&&(T[K]=0);switch(T[0]){case 38:A.fg=this._updateAttrColor(A.fg,T[1],T[3],T[4],T[5]);break;case 48:A.bg=this._updateAttrColor(A.bg,T[1],T[3],T[4],T[5]);break;case 58:A.extended=A.extended.clone(),A.extended.underlineColor=this._updateAttrColor(A.extended.underlineColor,T[1],T[3],T[4],T[5])}return z},R.prototype._processUnderline=function(E,x){x.extended=x.extended.clone(),(!~E||E>5)&&(E=1),x.extended.underlineStyle=E,x.fg|=268435456,E===0&&(x.fg&=-268435457),x.updateExtended()},R.prototype.charAttributes=function(E){if(E.length===1&&E.params[0]===0)return this._curAttrData.fg=a.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=a.DEFAULT_ATTR_DATA.bg,!0;for(var x,A=E.length,T=this._curAttrData,U=0;U<A;U++)(x=E.params[U])>=30&&x<=37?(T.fg&=-50331904,T.fg|=16777216|x-30):x>=40&&x<=47?(T.bg&=-50331904,T.bg|=16777216|x-40):x>=90&&x<=97?(T.fg&=-50331904,T.fg|=16777224|x-90):x>=100&&x<=107?(T.bg&=-50331904,T.bg|=16777224|x-100):x===0?(T.fg=a.DEFAULT_ATTR_DATA.fg,T.bg=a.DEFAULT_ATTR_DATA.bg):x===1?T.fg|=134217728:x===3?T.bg|=67108864:x===4?(T.fg|=268435456,this._processUnderline(E.hasSubParams(U)?E.getSubParams(U)[0]:1,T)):x===5?T.fg|=536870912:x===7?T.fg|=67108864:x===8?T.fg|=1073741824:x===9?T.fg|=2147483648:x===2?T.bg|=134217728:x===21?this._processUnderline(2,T):x===22?(T.fg&=-134217729,T.bg&=-134217729):x===23?T.bg&=-67108865:x===24?T.fg&=-268435457:x===25?T.fg&=-536870913:x===27?T.fg&=-67108865:x===28?T.fg&=-1073741825:x===29?T.fg&=2147483647:x===39?(T.fg&=-67108864,T.fg|=16777215&a.DEFAULT_ATTR_DATA.fg):x===49?(T.bg&=-67108864,T.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):x===38||x===48||x===58?U+=this._extractColor(E,U,T):x===59?(T.extended=T.extended.clone(),T.extended.underlineColor=-1,T.updateExtended()):x===100?(T.fg&=-67108864,T.fg|=16777215&a.DEFAULT_ATTR_DATA.fg,T.bg&=-67108864,T.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",x);return!0},R.prototype.deviceStatus=function(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(l.C0.ESC+"[0n");break;case 6:var x=this._activeBuffer.y+1,A=this._activeBuffer.x+1;this._coreService.triggerDataEvent(l.C0.ESC+"["+x+";"+A+"R")}return!0},R.prototype.deviceStatusPrivate=function(E){if(E.params[0]===6){var x=this._activeBuffer.y+1,A=this._activeBuffer.x+1;this._coreService.triggerDataEvent(l.C0.ESC+"[?"+x+";"+A+"R")}return!0},R.prototype.softReset=function(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},R.prototype.setCursorStyle=function(E){var x=E.params[0]||1;switch(x){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var A=x%2==1;return this._optionsService.options.cursorBlink=A,!0},R.prototype.setScrollRegion=function(E){var x,A=E.params[0]||1;return(E.length<2||(x=E.params[1])>this._bufferService.rows||x===0)&&(x=this._bufferService.rows),x>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=x-1,this._setCursor(0,0)),!0},R.prototype.windowOptions=function(E){if(!b(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;var x=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:x!==2&&this._onRequestWindowsOptionsReport.fire(f.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(f.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(l.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:x!==0&&x!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),x!==0&&x!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:x!==0&&x!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),x!==0&&x!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},R.prototype.saveCursor=function(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},R.prototype.restoreCursor=function(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},R.prototype.setTitle=function(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0},R.prototype.setIconName=function(E){return this._iconName=E,!0},R.prototype.setOrReportIndexedColor=function(E){for(var x=[],A=E.split(";");A.length>1;){var T=A.shift(),U=A.shift();if(/^\d+$/.exec(T)){var z=parseInt(T);if(0<=z&&z<256)if(U==="?")x.push({type:0,index:z});else{var W=(0,m.parseColor)(U);W&&x.push({type:1,index:z,color:W})}}}return x.length&&this._onColor.fire(x),!0},R.prototype._setOrReportSpecialColor=function(E,x){for(var A=E.split(";"),T=0;T<A.length&&!(x>=this._specialColors.length);++T,++x)if(A[T]==="?")this._onColor.fire([{type:0,index:this._specialColors[x]}]);else{var U=(0,m.parseColor)(A[T]);U&&this._onColor.fire([{type:1,index:this._specialColors[x],color:U}])}return!0},R.prototype.setOrReportFgColor=function(E){return this._setOrReportSpecialColor(E,0)},R.prototype.setOrReportBgColor=function(E){return this._setOrReportSpecialColor(E,1)},R.prototype.setOrReportCursorColor=function(E){return this._setOrReportSpecialColor(E,2)},R.prototype.restoreIndexedColor=function(E){if(!E)return this._onColor.fire([{type:2}]),!0;for(var x=[],A=E.split(";"),T=0;T<A.length;++T)if(/^\d+$/.exec(A[T])){var U=parseInt(A[T]);0<=U&&U<256&&x.push({type:2,index:U})}return x.length&&this._onColor.fire(x),!0},R.prototype.restoreFgColor=function(E){return this._onColor.fire([{type:2,index:256}]),!0},R.prototype.restoreBgColor=function(E){return this._onColor.fire([{type:2,index:257}]),!0},R.prototype.restoreCursorColor=function(E){return this._onColor.fire([{type:2,index:258}]),!0},R.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},R.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},R.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},R.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0},R.prototype.selectCharset=function(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(S[E[0]],g.CHARSETS[E[1]]||g.DEFAULT_CHARSET),!0)},R.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},R.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},R.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},R.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},R.prototype.reset=function(){this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone()},R.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},R.prototype.setgLevel=function(E){return this._charsetService.setgLevel(E),!0},R.prototype.screenAlignmentPattern=function(){var E=new r.CellData;E.content=1<<22|"E".charCodeAt(0),E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(var x=0;x<this._bufferService.rows;++x){var A=this._activeBuffer.ybase+this._activeBuffer.y+x,T=this._activeBuffer.lines.get(A);T&&(T.fill(E),T.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},R}(s.Disposable);p.InputHandler=M},844:function(H,p){var w=this&&this.__values||function(f){var l=typeof Symbol=="function"&&Symbol.iterator,g=l&&f[l],v=0;if(g)return g.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.getDisposeArrayDisposable=p.disposeArray=p.Disposable=void 0;var c=function(){function f(){this._disposables=[],this._isDisposed=!1}return f.prototype.dispose=function(){var l,g;this._isDisposed=!0;try{for(var v=w(this._disposables),s=v.next();!s.done;s=v.next())s.value.dispose()}catch(o){l={error:o}}finally{try{s&&!s.done&&(g=v.return)&&g.call(v)}finally{if(l)throw l.error}}this._disposables.length=0},f.prototype.register=function(l){return this._disposables.push(l),l},f.prototype.unregister=function(l){var g=this._disposables.indexOf(l);g!==-1&&this._disposables.splice(g,1)},f}();function _(f){var l,g;try{for(var v=w(f),s=v.next();!s.done;s=v.next())s.value.dispose()}catch(o){l={error:o}}finally{try{s&&!s.done&&(g=v.return)&&g.call(v)}finally{if(l)throw l.error}}f.length=0}p.Disposable=c,p.disposeArray=_,p.getDisposeArrayDisposable=function(f){return{dispose:function(){return _(f)}}}},6114:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.isLinux=p.isWindows=p.isIphone=p.isIpad=p.isMac=p.isSafari=p.isLegacyEdge=p.isFirefox=void 0;var w=typeof navigator>"u",c=w?"node":navigator.userAgent,_=w?"node":navigator.platform;p.isFirefox=c.includes("Firefox"),p.isLegacyEdge=c.includes("Edge"),p.isSafari=/^((?!chrome|android).)*safari/i.test(c),p.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(_),p.isIpad=_==="iPad",p.isIphone=_==="iPhone",p.isWindows=["Windows","Win16","Win32","WinCE"].includes(_),p.isLinux=_.indexOf("Linux")>=0},6106:function(H,p){var w=this&&this.__generator||function(_,f){var l,g,v,s,o={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return s={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function h(a){return function(t){return function(e){if(l)throw new TypeError("Generator is already executing.");for(;o;)try{if(l=1,g&&(v=2&e[0]?g.return:e[0]?g.throw||((v=g.return)&&v.call(g),0):g.next)&&!(v=v.call(g,e[1])).done)return v;switch(g=0,v&&(e=[2&e[0],v.value]),e[0]){case 0:case 1:v=e;break;case 4:return o.label++,{value:e[1],done:!1};case 5:o.label++,g=e[1],e=[0];continue;case 7:e=o.ops.pop(),o.trys.pop();continue;default:if(!((v=(v=o.trys).length>0&&v[v.length-1])||e[0]!==6&&e[0]!==2)){o=0;continue}if(e[0]===3&&(!v||e[1]>v[0]&&e[1]<v[3])){o.label=e[1];break}if(e[0]===6&&o.label<v[1]){o.label=v[1],v=e;break}if(v&&o.label<v[2]){o.label=v[2],o.ops.push(e);break}v[2]&&o.ops.pop(),o.trys.pop();continue}e=f.call(_,o)}catch(r){e=[6,r],g=0}finally{l=v=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([a,t])}}};Object.defineProperty(p,"__esModule",{value:!0}),p.SortedList=void 0;var c=function(){function _(f){this._getKey=f,this._array=[]}return _.prototype.clear=function(){this._array.length=0},_.prototype.insert=function(f){if(this._array.length!==0){var l=this._search(this._getKey(f),0,this._array.length-1);this._array.splice(l,0,f)}else this._array.push(f)},_.prototype.delete=function(f){if(this._array.length===0)return!1;var l=this._getKey(f),g=this._search(l,0,this._array.length-1);if(this._getKey(this._array[g])!==l)return!1;do if(this._array[g]===f)return this._array.splice(g,1),!0;while(++g<this._array.length&&this._getKey(this._array[g])===l);return!1},_.prototype.getKeyIterator=function(f){var l;return w(this,function(g){switch(g.label){case 0:if(this._array.length===0)return[2];if((l=this._search(f,0,this._array.length-1))<0||l>=this._array.length)return[2];if(this._getKey(this._array[l])!==f)return[2];g.label=1;case 1:return[4,this._array[l]];case 2:g.sent(),g.label=3;case 3:if(++l<this._array.length&&this._getKey(this._array[l])===f)return[3,1];g.label=4;case 4:return[2]}})},_.prototype.values=function(){return this._array.values()},_.prototype._search=function(f,l,g){if(g<l)return l;var v=Math.floor((l+g)/2);if(this._getKey(this._array[v])>f)return this._search(f,l,v-1);if(this._getKey(this._array[v])<f)return this._search(f,v+1,g);for(;v>0&&this._getKey(this._array[v-1])===f;)v--;return v},_}();p.SortedList=c},8273:(H,p)=>{function w(c,_,f,l){if(f===void 0&&(f=0),l===void 0&&(l=c.length),f>=c.length)return c;f=(c.length+f)%c.length,l=l>=c.length?c.length:(c.length+l)%c.length;for(var g=f;g<l;++g)c[g]=_;return c}Object.defineProperty(p,"__esModule",{value:!0}),p.concat=p.fillFallback=p.fill=void 0,p.fill=function(c,_,f,l){return c.fill?c.fill(_,f,l):w(c,_,f,l)},p.fillFallback=w,p.concat=function(c,_){var f=new c.constructor(c.length+_.length);return f.set(c),f.set(_,c.length),f}},9282:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.updateWindowsModeWrappedState=void 0;var c=w(643);p.updateWindowsModeWrappedState=function(_){var f=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),l=f==null?void 0:f.get(_.cols-1),g=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);g&&l&&(g.isWrapped=l[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&l[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ExtendedAttrs=p.AttributeData=void 0;var w=function(){function _(){this.fg=0,this.bg=0,this.extended=new c}return _.toColorRGB=function(f){return[f>>>16&255,f>>>8&255,255&f]},_.fromColorRGB=function(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]},_.prototype.clone=function(){var f=new _;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f},_.prototype.isInverse=function(){return 67108864&this.fg},_.prototype.isBold=function(){return 134217728&this.fg},_.prototype.isUnderline=function(){return 268435456&this.fg},_.prototype.isBlink=function(){return 536870912&this.fg},_.prototype.isInvisible=function(){return 1073741824&this.fg},_.prototype.isItalic=function(){return 67108864&this.bg},_.prototype.isDim=function(){return 134217728&this.bg},_.prototype.isStrikethrough=function(){return 2147483648&this.fg},_.prototype.getFgColorMode=function(){return 50331648&this.fg},_.prototype.getBgColorMode=function(){return 50331648&this.bg},_.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},_.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},_.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},_.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},_.prototype.isFgDefault=function(){return(50331648&this.fg)==0},_.prototype.isBgDefault=function(){return(50331648&this.bg)==0},_.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},_.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},_.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},_.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},_.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},_.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},_.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},_.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},_.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},_.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},_.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},_}();p.AttributeData=w;var c=function(){function _(f,l){f===void 0&&(f=0),l===void 0&&(l=-1),this.underlineStyle=f,this.underlineColor=l}return _.prototype.clone=function(){return new _(this.underlineStyle,this.underlineColor)},_.prototype.isEmpty=function(){return this.underlineStyle===0},_}();p.ExtendedAttrs=c},9092:function(H,p,w){var c=this&&this.__read||function(r,i){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var d,u,m=n.call(r),S=[];try{for(;(i===void 0||i-- >0)&&!(d=m.next()).done;)S.push(d.value)}catch(y){u={error:y}}finally{try{d&&!d.done&&(n=m.return)&&n.call(m)}finally{if(u)throw u.error}}return S},_=this&&this.__spreadArray||function(r,i,n){if(n||arguments.length===2)for(var d,u=0,m=i.length;u<m;u++)!d&&u in i||(d||(d=Array.prototype.slice.call(i,0,u)),d[u]=i[u]);return r.concat(d||Array.prototype.slice.call(i))};Object.defineProperty(p,"__esModule",{value:!0}),p.BufferStringIterator=p.Buffer=p.MAX_BUFFER_SIZE=void 0;var f=w(6349),l=w(8437),g=w(511),v=w(643),s=w(4634),o=w(4863),h=w(7116),a=w(3734);p.MAX_BUFFER_SIZE=4294967295;var t=function(){function r(i,n,d){this._hasScrollback=i,this._optionsService=n,this._bufferService=d,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=l.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=g.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=g.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return r.prototype.getNullCell=function(i){return i?(this._nullCell.fg=i.fg,this._nullCell.bg=i.bg,this._nullCell.extended=i.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new a.ExtendedAttrs),this._nullCell},r.prototype.getWhitespaceCell=function(i){return i?(this._whitespaceCell.fg=i.fg,this._whitespaceCell.bg=i.bg,this._whitespaceCell.extended=i.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new a.ExtendedAttrs),this._whitespaceCell},r.prototype.getBlankLine=function(i,n){return new l.BufferLine(this._bufferService.cols,this.getNullCell(i),n)},Object.defineProperty(r.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isCursorInViewport",{get:function(){var i=this.ybase+this.y-this.ydisp;return i>=0&&i<this._rows},enumerable:!1,configurable:!0}),r.prototype._getCorrectBufferLength=function(i){if(!this._hasScrollback)return i;var n=i+this._optionsService.rawOptions.scrollback;return n>p.MAX_BUFFER_SIZE?p.MAX_BUFFER_SIZE:n},r.prototype.fillViewportRows=function(i){if(this.lines.length===0){i===void 0&&(i=l.DEFAULT_ATTR_DATA);for(var n=this._rows;n--;)this.lines.push(this.getBlankLine(i))}},r.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},r.prototype.resize=function(i,n){var d=this.getNullCell(l.DEFAULT_ATTR_DATA),u=this._getCorrectBufferLength(n);if(u>this.lines.maxLength&&(this.lines.maxLength=u),this.lines.length>0){if(this._cols<i)for(var m=0;m<this.lines.length;m++)this.lines.get(m).resize(i,d);var S=0;if(this._rows<n)for(var y=this._rows;y<n;y++)this.lines.length<n+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new l.BufferLine(i,d)):this.ybase>0&&this.lines.length<=this.ybase+this.y+S+1?(this.ybase--,S++,this.ydisp>0&&this.ydisp--):this.lines.push(new l.BufferLine(i,d)));else for(y=this._rows;y>n;y--)this.lines.length>n+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(u<this.lines.maxLength){var b=this.lines.length-u;b>0&&(this.lines.trimStart(b),this.ybase=Math.max(this.ybase-b,0),this.ydisp=Math.max(this.ydisp-b,0),this.savedY=Math.max(this.savedY-b,0)),this.lines.maxLength=u}this.x=Math.min(this.x,i-1),this.y=Math.min(this.y,n-1),S&&(this.y+=S),this.savedX=Math.min(this.savedX,i-1),this.scrollTop=0}if(this.scrollBottom=n-1,this._isReflowEnabled&&(this._reflow(i,n),this._cols>i))for(m=0;m<this.lines.length;m++)this.lines.get(m).resize(i,d);this._cols=i,this._rows=n},Object.defineProperty(r.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),r.prototype._reflow=function(i,n){this._cols!==i&&(i>this._cols?this._reflowLarger(i,n):this._reflowSmaller(i,n))},r.prototype._reflowLarger=function(i,n){var d=(0,s.reflowLargerGetLinesToRemove)(this.lines,this._cols,i,this.ybase+this.y,this.getNullCell(l.DEFAULT_ATTR_DATA));if(d.length>0){var u=(0,s.reflowLargerCreateNewLayout)(this.lines,d);(0,s.reflowLargerApplyNewLayout)(this.lines,u.layout),this._reflowLargerAdjustViewport(i,n,u.countRemoved)}},r.prototype._reflowLargerAdjustViewport=function(i,n,d){for(var u=this.getNullCell(l.DEFAULT_ATTR_DATA),m=d;m-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<n&&this.lines.push(new l.BufferLine(i,u))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-d,0)},r.prototype._reflowSmaller=function(i,n){for(var d=this.getNullCell(l.DEFAULT_ATTR_DATA),u=[],m=0,S=this.lines.length-1;S>=0;S--){var y=this.lines.get(S);if(!(!y||!y.isWrapped&&y.getTrimmedLength()<=i)){for(var b=[y];y.isWrapped&&S>0;)y=this.lines.get(--S),b.unshift(y);var C=this.ybase+this.y;if(!(C>=S&&C<S+b.length)){var M,L=b[b.length-1].getTrimmedLength(),R=(0,s.reflowSmallerGetNewLineLengths)(b,this._cols,i),E=R.length-b.length;M=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+E):Math.max(0,this.lines.length-this.lines.maxLength+E);for(var x=[],A=0;A<E;A++){var T=this.getBlankLine(l.DEFAULT_ATTR_DATA,!0);x.push(T)}x.length>0&&(u.push({start:S+b.length+m,newLines:x}),m+=x.length),b.push.apply(b,_([],c(x),!1));var U=R.length-1,z=R[U];z===0&&(z=R[--U]);for(var W=b.length-E-1,K=L;W>=0;){var G=Math.min(K,z);if(b[U]===void 0)break;if(b[U].copyCellsFrom(b[W],K-G,z-G,G,!0),(z-=G)==0&&(z=R[--U]),(K-=G)==0){W--;var k=Math.max(W,0);K=(0,s.getWrappedLineTrimmedLength)(b,k,this._cols)}}for(A=0;A<b.length;A++)R[A]<i&&b[A].setCell(R[A],d);for(var $=E-M;$-- >0;)this.ybase===0?this.y<n-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+m)-n&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+E,this.ybase+n-1)}}}if(u.length>0){var Y=[],he=[];for(A=0;A<this.lines.length;A++)he.push(this.lines.get(A));var B=this.lines.length,oe=B-1,V=0,q=u[V];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+m);var O=0;for(A=Math.min(this.lines.maxLength-1,B+m-1);A>=0;A--)if(q&&q.start>oe+O){for(var D=q.newLines.length-1;D>=0;D--)this.lines.set(A--,q.newLines[D]);A++,Y.push({index:oe+1,amount:q.newLines.length}),O+=q.newLines.length,q=u[++V]}else this.lines.set(A,he[oe--]);var N=0;for(A=Y.length-1;A>=0;A--)Y[A].index+=N,this.lines.onInsertEmitter.fire(Y[A]),N+=Y[A].amount;var Z=Math.max(0,B+m-this.lines.maxLength);Z>0&&this.lines.onTrimEmitter.fire(Z)}},r.prototype.stringIndexToBufferIndex=function(i,n,d){for(d===void 0&&(d=!1);n;){var u=this.lines.get(i);if(!u)return[-1,-1];for(var m=d?u.getTrimmedLength():u.length,S=0;S<m;++S)if(u.get(S)[v.CHAR_DATA_WIDTH_INDEX]&&(n-=u.get(S)[v.CHAR_DATA_CHAR_INDEX].length||1),n<0)return[i,S];i++}return[i,0]},r.prototype.translateBufferLineToString=function(i,n,d,u){d===void 0&&(d=0);var m=this.lines.get(i);return m?m.translateToString(n,d,u):""},r.prototype.getWrappedRangeForLine=function(i){for(var n=i,d=i;n>0&&this.lines.get(n).isWrapped;)n--;for(;d+1<this.lines.length&&this.lines.get(d+1).isWrapped;)d++;return{first:n,last:d}},r.prototype.setupTabStops=function(i){for(i!=null?this.tabs[i]||(i=this.prevStop(i)):(this.tabs={},i=0);i<this._cols;i+=this._optionsService.rawOptions.tabStopWidth)this.tabs[i]=!0},r.prototype.prevStop=function(i){for(i==null&&(i=this.x);!this.tabs[--i]&&i>0;);return i>=this._cols?this._cols-1:i<0?0:i},r.prototype.nextStop=function(i){for(i==null&&(i=this.x);!this.tabs[++i]&&i<this._cols;);return i>=this._cols?this._cols-1:i<0?0:i},r.prototype.clearMarkers=function(i){this._isClearing=!0;for(var n=0;n<this.markers.length;n++)this.markers[n].line===i&&(this.markers[n].dispose(),this.markers.splice(n--,1));this._isClearing=!1},r.prototype.clearAllMarkers=function(){this._isClearing=!0;for(var i=0;i<this.markers.length;i++)this.markers[i].dispose(),this.markers.splice(i--,1);this._isClearing=!1},r.prototype.addMarker=function(i){var n=this,d=new o.Marker(i);return this.markers.push(d),d.register(this.lines.onTrim(function(u){d.line-=u,d.line<0&&d.dispose()})),d.register(this.lines.onInsert(function(u){d.line>=u.index&&(d.line+=u.amount)})),d.register(this.lines.onDelete(function(u){d.line>=u.index&&d.line<u.index+u.amount&&d.dispose(),d.line>u.index&&(d.line-=u.amount)})),d.register(d.onDispose(function(){return n._removeMarker(d)})),d},r.prototype._removeMarker=function(i){this._isClearing||this.markers.splice(this.markers.indexOf(i),1)},r.prototype.iterator=function(i,n,d,u,m){return new e(this,i,n,d,u,m)},r}();p.Buffer=t;var e=function(){function r(i,n,d,u,m,S){d===void 0&&(d=0),u===void 0&&(u=i.lines.length),m===void 0&&(m=0),S===void 0&&(S=0),this._buffer=i,this._trimRight=n,this._startIndex=d,this._endIndex=u,this._startOverscan=m,this._endOverscan=S,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return r.prototype.hasNext=function(){return this._current<this._endIndex},r.prototype.next=function(){var i=this._buffer.getWrappedRangeForLine(this._current);i.first<this._startIndex-this._startOverscan&&(i.first=this._startIndex-this._startOverscan),i.last>this._endIndex+this._endOverscan&&(i.last=this._endIndex+this._endOverscan),i.first=Math.max(i.first,0),i.last=Math.min(i.last,this._buffer.lines.length);for(var n="",d=i.first;d<=i.last;++d)n+=this._buffer.translateBufferLineToString(d,this._trimRight);return this._current=i.last+1,{range:i,content:n}},r}();p.BufferStringIterator=e},8437:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferLine=p.DEFAULT_ATTR_DATA=void 0;var c=w(482),_=w(643),f=w(511),l=w(3734);p.DEFAULT_ATTR_DATA=Object.freeze(new l.AttributeData);var g=function(){function v(s,o,h){h===void 0&&(h=!1),this.isWrapped=h,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*s);for(var a=o||f.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),t=0;t<s;++t)this.setCell(t,a);this.length=s}return v.prototype.get=function(s){var o=this._data[3*s+0],h=2097151&o;return[this._data[3*s+1],2097152&o?this._combined[s]:h?(0,c.stringFromCodePoint)(h):"",o>>22,2097152&o?this._combined[s].charCodeAt(this._combined[s].length-1):h]},v.prototype.set=function(s,o){this._data[3*s+1]=o[_.CHAR_DATA_ATTR_INDEX],o[_.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[s]=o[1],this._data[3*s+0]=2097152|s|o[_.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*s+0]=o[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[_.CHAR_DATA_WIDTH_INDEX]<<22},v.prototype.getWidth=function(s){return this._data[3*s+0]>>22},v.prototype.hasWidth=function(s){return 12582912&this._data[3*s+0]},v.prototype.getFg=function(s){return this._data[3*s+1]},v.prototype.getBg=function(s){return this._data[3*s+2]},v.prototype.hasContent=function(s){return 4194303&this._data[3*s+0]},v.prototype.getCodePoint=function(s){var o=this._data[3*s+0];return 2097152&o?this._combined[s].charCodeAt(this._combined[s].length-1):2097151&o},v.prototype.isCombined=function(s){return 2097152&this._data[3*s+0]},v.prototype.getString=function(s){var o=this._data[3*s+0];return 2097152&o?this._combined[s]:2097151&o?(0,c.stringFromCodePoint)(2097151&o):""},v.prototype.loadCell=function(s,o){var h=3*s;return o.content=this._data[h+0],o.fg=this._data[h+1],o.bg=this._data[h+2],2097152&o.content&&(o.combinedData=this._combined[s]),268435456&o.bg&&(o.extended=this._extendedAttrs[s]),o},v.prototype.setCell=function(s,o){2097152&o.content&&(this._combined[s]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[s]=o.extended),this._data[3*s+0]=o.content,this._data[3*s+1]=o.fg,this._data[3*s+2]=o.bg},v.prototype.setCellFromCodePoint=function(s,o,h,a,t,e){268435456&t&&(this._extendedAttrs[s]=e),this._data[3*s+0]=o|h<<22,this._data[3*s+1]=a,this._data[3*s+2]=t},v.prototype.addCodepointToCell=function(s,o){var h=this._data[3*s+0];2097152&h?this._combined[s]+=(0,c.stringFromCodePoint)(o):(2097151&h?(this._combined[s]=(0,c.stringFromCodePoint)(2097151&h)+(0,c.stringFromCodePoint)(o),h&=-2097152,h|=2097152):h=o|1<<22,this._data[3*s+0]=h)},v.prototype.insertCells=function(s,o,h,a){if((s%=this.length)&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new l.ExtendedAttrs),o<this.length-s){for(var t=new f.CellData,e=this.length-s-o-1;e>=0;--e)this.setCell(s+o+e,this.loadCell(s+e,t));for(e=0;e<o;++e)this.setCell(s+e,h)}else for(e=s;e<this.length;++e)this.setCell(e,h);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new l.ExtendedAttrs)},v.prototype.deleteCells=function(s,o,h,a){if(s%=this.length,o<this.length-s){for(var t=new f.CellData,e=0;e<this.length-s-o;++e)this.setCell(s+e,this.loadCell(s+o+e,t));for(e=this.length-o;e<this.length;++e)this.setCell(e,h)}else for(e=s;e<this.length;++e)this.setCell(e,h);s&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new l.ExtendedAttrs),this.getWidth(s)!==0||this.hasContent(s)||this.setCellFromCodePoint(s,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new l.ExtendedAttrs)},v.prototype.replaceCells=function(s,o,h,a){for(s&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new l.ExtendedAttrs),o<this.length&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new l.ExtendedAttrs);s<o&&s<this.length;)this.setCell(s++,h)},v.prototype.resize=function(s,o){if(s!==this.length){if(s>this.length){var h=new Uint32Array(3*s);this.length&&(3*s<this._data.length?h.set(this._data.subarray(0,3*s)):h.set(this._data)),this._data=h;for(var a=this.length;a<s;++a)this.setCell(a,o)}else if(s){(h=new Uint32Array(3*s)).set(this._data.subarray(0,3*s)),this._data=h;var t=Object.keys(this._combined);for(a=0;a<t.length;a++){var e=parseInt(t[a],10);e>=s&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=s}},v.prototype.fill=function(s){this._combined={},this._extendedAttrs={};for(var o=0;o<this.length;++o)this.setCell(o,s)},v.prototype.copyFrom=function(s){for(var o in this.length!==s.length?this._data=new Uint32Array(s._data):this._data.set(s._data),this.length=s.length,this._combined={},s._combined)this._combined[o]=s._combined[o];for(var o in this._extendedAttrs={},s._extendedAttrs)this._extendedAttrs[o]=s._extendedAttrs[o];this.isWrapped=s.isWrapped},v.prototype.clone=function(){var s=new v(0);for(var o in s._data=new Uint32Array(this._data),s.length=this.length,this._combined)s._combined[o]=this._combined[o];for(var o in this._extendedAttrs)s._extendedAttrs[o]=this._extendedAttrs[o];return s.isWrapped=this.isWrapped,s},v.prototype.getTrimmedLength=function(){for(var s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0])return s+(this._data[3*s+0]>>22);return 0},v.prototype.copyCellsFrom=function(s,o,h,a,t){var e=s._data;if(t)for(var r=a-1;r>=0;r--)for(var i=0;i<3;i++)this._data[3*(h+r)+i]=e[3*(o+r)+i];else for(r=0;r<a;r++)for(i=0;i<3;i++)this._data[3*(h+r)+i]=e[3*(o+r)+i];var n=Object.keys(s._combined);for(i=0;i<n.length;i++){var d=parseInt(n[i],10);d>=o&&(this._combined[d-o+h]=s._combined[d])}},v.prototype.translateToString=function(s,o,h){s===void 0&&(s=!1),o===void 0&&(o=0),h===void 0&&(h=this.length),s&&(h=Math.min(h,this.getTrimmedLength()));for(var a="";o<h;){var t=this._data[3*o+0],e=2097151&t;a+=2097152&t?this._combined[o]:e?(0,c.stringFromCodePoint)(e):_.WHITESPACE_CELL_CHAR,o+=t>>22||1}return a},v}();p.BufferLine=g},4841:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.getRangeLength=void 0,p.getRangeLength=function(w,c){if(w.start.y>w.end.y)throw new Error("Buffer range end ("+w.end.x+", "+w.end.y+") cannot be before start ("+w.start.x+", "+w.start.y+")");return c*(w.end.y-w.start.y)+(w.end.x-w.start.x+1)}},4634:(H,p)=>{function w(c,_,f){if(_===c.length-1)return c[_].getTrimmedLength();var l=!c[_].hasContent(f-1)&&c[_].getWidth(f-1)===1,g=c[_+1].getWidth(0)===2;return l&&g?f-1:f}Object.defineProperty(p,"__esModule",{value:!0}),p.getWrappedLineTrimmedLength=p.reflowSmallerGetNewLineLengths=p.reflowLargerApplyNewLayout=p.reflowLargerCreateNewLayout=p.reflowLargerGetLinesToRemove=void 0,p.reflowLargerGetLinesToRemove=function(c,_,f,l,g){for(var v=[],s=0;s<c.length-1;s++){var o=s,h=c.get(++o);if(h.isWrapped){for(var a=[c.get(s)];o<c.length&&h.isWrapped;)a.push(h),h=c.get(++o);if(l>=s&&l<o)s+=a.length-1;else{for(var t=0,e=w(a,t,_),r=1,i=0;r<a.length;){var n=w(a,r,_),d=n-i,u=f-e,m=Math.min(d,u);a[t].copyCellsFrom(a[r],i,e,m,!1),(e+=m)===f&&(t++,e=0),(i+=m)===n&&(r++,i=0),e===0&&t!==0&&a[t-1].getWidth(f-1)===2&&(a[t].copyCellsFrom(a[t-1],f-1,e++,1,!1),a[t-1].setCell(f-1,g))}a[t].replaceCells(e,f,g);for(var S=0,y=a.length-1;y>0&&(y>t||a[y].getTrimmedLength()===0);y--)S++;S>0&&(v.push(s+a.length-S),v.push(S)),s+=a.length-1}}}return v},p.reflowLargerCreateNewLayout=function(c,_){for(var f=[],l=0,g=_[l],v=0,s=0;s<c.length;s++)if(g===s){var o=_[++l];c.onDeleteEmitter.fire({index:s-v,amount:o}),s+=o-1,v+=o,g=_[++l]}else f.push(s);return{layout:f,countRemoved:v}},p.reflowLargerApplyNewLayout=function(c,_){for(var f=[],l=0;l<_.length;l++)f.push(c.get(_[l]));for(l=0;l<f.length;l++)c.set(l,f[l]);c.length=_.length},p.reflowSmallerGetNewLineLengths=function(c,_,f){for(var l=[],g=c.map(function(e,r){return w(c,r,_)}).reduce(function(e,r){return e+r}),v=0,s=0,o=0;o<g;){if(g-o<f){l.push(g-o);break}v+=f;var h=w(c,s,_);v>h&&(v-=h,s++);var a=c[s].getWidth(v-1)===2;a&&v--;var t=a?f-1:f;l.push(t),o+=t}return l},p.getWrappedLineTrimmedLength=w},5295:function(H,p,w){var c,_=this&&this.__extends||(c=function(v,s){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&(o[a]=h[a])},c(v,s)},function(v,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function o(){this.constructor=v}c(v,s),v.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)});Object.defineProperty(p,"__esModule",{value:!0}),p.BufferSet=void 0;var f=w(9092),l=w(8460),g=function(v){function s(o,h){var a=v.call(this)||this;return a._optionsService=o,a._bufferService=h,a._onBufferActivate=a.register(new l.EventEmitter),a.reset(),a}return _(s,v),Object.defineProperty(s.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),s.prototype.reset=function(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(s.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),s.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},s.prototype.activateAltBuffer=function(o){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(o),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},s.prototype.resize=function(o,h){this._normal.resize(o,h),this._alt.resize(o,h)},s.prototype.setupTabStops=function(o){this._normal.setupTabStops(o),this._alt.setupTabStops(o)},s}(w(844).Disposable);p.BufferSet=g},511:function(H,p,w){var c,_=this&&this.__extends||(c=function(s,o){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,a){h.__proto__=a}||function(h,a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(h[t]=a[t])},c(s,o)},function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function h(){this.constructor=s}c(s,o),s.prototype=o===null?Object.create(o):(h.prototype=o.prototype,new h)});Object.defineProperty(p,"__esModule",{value:!0}),p.CellData=void 0;var f=w(482),l=w(643),g=w(3734),v=function(s){function o(){var h=s!==null&&s.apply(this,arguments)||this;return h.content=0,h.fg=0,h.bg=0,h.extended=new g.ExtendedAttrs,h.combinedData="",h}return _(o,s),o.fromCharData=function(h){var a=new o;return a.setFromCharData(h),a},o.prototype.isCombined=function(){return 2097152&this.content},o.prototype.getWidth=function(){return this.content>>22},o.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""},o.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},o.prototype.setFromCharData=function(h){this.fg=h[l.CHAR_DATA_ATTR_INDEX],this.bg=0;var a=!1;if(h[l.CHAR_DATA_CHAR_INDEX].length>2)a=!0;else if(h[l.CHAR_DATA_CHAR_INDEX].length===2){var t=h[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){var e=h[l.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(t-55296)+e-56320+65536|h[l.CHAR_DATA_WIDTH_INDEX]<<22:a=!0}else a=!0}else this.content=h[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[l.CHAR_DATA_WIDTH_INDEX]<<22;a&&(this.combinedData=h[l.CHAR_DATA_CHAR_INDEX],this.content=2097152|h[l.CHAR_DATA_WIDTH_INDEX]<<22)},o.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},o}(g.AttributeData);p.CellData=v},643:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.WHITESPACE_CELL_CODE=p.WHITESPACE_CELL_WIDTH=p.WHITESPACE_CELL_CHAR=p.NULL_CELL_CODE=p.NULL_CELL_WIDTH=p.NULL_CELL_CHAR=p.CHAR_DATA_CODE_INDEX=p.CHAR_DATA_WIDTH_INDEX=p.CHAR_DATA_CHAR_INDEX=p.CHAR_DATA_ATTR_INDEX=p.DEFAULT_ATTR=p.DEFAULT_COLOR=void 0,p.DEFAULT_COLOR=256,p.DEFAULT_ATTR=256|p.DEFAULT_COLOR<<9,p.CHAR_DATA_ATTR_INDEX=0,p.CHAR_DATA_CHAR_INDEX=1,p.CHAR_DATA_WIDTH_INDEX=2,p.CHAR_DATA_CODE_INDEX=3,p.NULL_CELL_CHAR="",p.NULL_CELL_WIDTH=1,p.NULL_CELL_CODE=0,p.WHITESPACE_CELL_CHAR=" ",p.WHITESPACE_CELL_WIDTH=1,p.WHITESPACE_CELL_CODE=32},4863:function(H,p,w){var c,_=this&&this.__extends||(c=function(g,v){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(s[h]=o[h])},c(g,v)},function(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function s(){this.constructor=g}c(g,v),g.prototype=v===null?Object.create(v):(s.prototype=v.prototype,new s)});Object.defineProperty(p,"__esModule",{value:!0}),p.Marker=void 0;var f=w(8460),l=function(g){function v(s){var o=g.call(this)||this;return o.line=s,o._id=v._nextId++,o.isDisposed=!1,o._onDispose=new f.EventEmitter,o}return _(v,g),Object.defineProperty(v.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),v.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),g.prototype.dispose.call(this))},v._nextId=1,v}(w(844).Disposable);p.Marker=l},7116:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DEFAULT_CHARSET=p.CHARSETS=void 0,p.CHARSETS={},p.DEFAULT_CHARSET=p.CHARSETS.B,p.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},p.CHARSETS.A={"#":"\xA3"},p.CHARSETS.B=void 0,p.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},p.CHARSETS.C=p.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},p.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},p.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},p.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},p.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},p.CHARSETS.E=p.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},p.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},p.CHARSETS.H=p.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},p.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(H,p)=>{var w,c;Object.defineProperty(p,"__esModule",{value:!0}),p.C1_ESCAPED=p.C1=p.C0=void 0,function(_){_.NUL="\0",_.SOH="",_.STX="",_.ETX="",_.EOT="",_.ENQ="",_.ACK="",_.BEL="\x07",_.BS="\b",_.HT="	",_.LF=`
`,_.VT="\v",_.FF="\f",_.CR="\r",_.SO="",_.SI="",_.DLE="",_.DC1="",_.DC2="",_.DC3="",_.DC4="",_.NAK="",_.SYN="",_.ETB="",_.CAN="",_.EM="",_.SUB="",_.ESC="\x1B",_.FS="",_.GS="",_.RS="",_.US="",_.SP=" ",_.DEL="\x7F"}(w=p.C0||(p.C0={})),(c=p.C1||(p.C1={})).PAD="\x80",c.HOP="\x81",c.BPH="\x82",c.NBH="\x83",c.IND="\x84",c.NEL="\x85",c.SSA="\x86",c.ESA="\x87",c.HTS="\x88",c.HTJ="\x89",c.VTS="\x8A",c.PLD="\x8B",c.PLU="\x8C",c.RI="\x8D",c.SS2="\x8E",c.SS3="\x8F",c.DCS="\x90",c.PU1="\x91",c.PU2="\x92",c.STS="\x93",c.CCH="\x94",c.MW="\x95",c.SPA="\x96",c.EPA="\x97",c.SOS="\x98",c.SGCI="\x99",c.SCI="\x9A",c.CSI="\x9B",c.ST="\x9C",c.OSC="\x9D",c.PM="\x9E",c.APC="\x9F",(p.C1_ESCAPED||(p.C1_ESCAPED={})).ST=w.ESC+"\\"},7399:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.evaluateKeyboardEvent=void 0;var c=w(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};p.evaluateKeyboardEvent=function(f,l,g,v){var s={type:0,cancel:!1,key:void 0},o=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?s.key=l?c.C0.ESC+"OA":c.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?s.key=l?c.C0.ESC+"OD":c.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?s.key=l?c.C0.ESC+"OC":c.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(s.key=l?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:if(f.shiftKey){s.key=c.C0.BS;break}if(f.altKey){s.key=c.C0.ESC+c.C0.DEL;break}s.key=c.C0.DEL;break;case 9:if(f.shiftKey){s.key=c.C0.ESC+"[Z";break}s.key=c.C0.HT,s.cancel=!0;break;case 13:s.key=f.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,s.cancel=!0;break;case 27:s.key=c.C0.ESC,f.altKey&&(s.key=c.C0.ESC+c.C0.ESC),s.cancel=!0;break;case 37:if(f.metaKey)break;o?(s.key=c.C0.ESC+"[1;"+(o+1)+"D",s.key===c.C0.ESC+"[1;3D"&&(s.key=c.C0.ESC+(g?"b":"[1;5D"))):s.key=l?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(f.metaKey)break;o?(s.key=c.C0.ESC+"[1;"+(o+1)+"C",s.key===c.C0.ESC+"[1;3C"&&(s.key=c.C0.ESC+(g?"f":"[1;5C"))):s.key=l?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(f.metaKey)break;o?(s.key=c.C0.ESC+"[1;"+(o+1)+"A",g||s.key!==c.C0.ESC+"[1;3A"||(s.key=c.C0.ESC+"[1;5A")):s.key=l?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(f.metaKey)break;o?(s.key=c.C0.ESC+"[1;"+(o+1)+"B",g||s.key!==c.C0.ESC+"[1;3B"||(s.key=c.C0.ESC+"[1;5B")):s.key=l?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(s.key=c.C0.ESC+"[2~");break;case 46:s.key=o?c.C0.ESC+"[3;"+(o+1)+"~":c.C0.ESC+"[3~";break;case 36:s.key=o?c.C0.ESC+"[1;"+(o+1)+"H":l?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:s.key=o?c.C0.ESC+"[1;"+(o+1)+"F":l?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:f.shiftKey?s.type=2:f.ctrlKey?s.key=c.C0.ESC+"[5;"+(o+1)+"~":s.key=c.C0.ESC+"[5~";break;case 34:f.shiftKey?s.type=3:f.ctrlKey?s.key=c.C0.ESC+"[6;"+(o+1)+"~":s.key=c.C0.ESC+"[6~";break;case 112:s.key=o?c.C0.ESC+"[1;"+(o+1)+"P":c.C0.ESC+"OP";break;case 113:s.key=o?c.C0.ESC+"[1;"+(o+1)+"Q":c.C0.ESC+"OQ";break;case 114:s.key=o?c.C0.ESC+"[1;"+(o+1)+"R":c.C0.ESC+"OR";break;case 115:s.key=o?c.C0.ESC+"[1;"+(o+1)+"S":c.C0.ESC+"OS";break;case 116:s.key=o?c.C0.ESC+"[15;"+(o+1)+"~":c.C0.ESC+"[15~";break;case 117:s.key=o?c.C0.ESC+"[17;"+(o+1)+"~":c.C0.ESC+"[17~";break;case 118:s.key=o?c.C0.ESC+"[18;"+(o+1)+"~":c.C0.ESC+"[18~";break;case 119:s.key=o?c.C0.ESC+"[19;"+(o+1)+"~":c.C0.ESC+"[19~";break;case 120:s.key=o?c.C0.ESC+"[20;"+(o+1)+"~":c.C0.ESC+"[20~";break;case 121:s.key=o?c.C0.ESC+"[21;"+(o+1)+"~":c.C0.ESC+"[21~";break;case 122:s.key=o?c.C0.ESC+"[23;"+(o+1)+"~":c.C0.ESC+"[23~";break;case 123:s.key=o?c.C0.ESC+"[24;"+(o+1)+"~":c.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(g&&!v||!f.altKey||f.metaKey)!g||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?s.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(s.key=c.C0.US),f.key==="@"&&(s.key=c.C0.NUL)):f.keyCode===65&&(s.type=1);else{var h=_[f.keyCode],a=h==null?void 0:h[f.shiftKey?1:0];if(a)s.key=c.C0.ESC+a;else if(f.keyCode>=65&&f.keyCode<=90){var t=f.ctrlKey?f.keyCode-64:f.keyCode+32,e=String.fromCharCode(t);f.shiftKey&&(e=e.toUpperCase()),s.key=c.C0.ESC+e}else f.key==="Dead"&&f.code.startsWith("Key")&&(e=f.code.slice(3,4),f.shiftKey||(e=e.toLowerCase()),s.key=c.C0.ESC+e,s.cancel=!0)}else f.keyCode>=65&&f.keyCode<=90?s.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?s.key=c.C0.NUL:f.keyCode>=51&&f.keyCode<=55?s.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?s.key=c.C0.DEL:f.keyCode===219?s.key=c.C0.ESC:f.keyCode===220?s.key=c.C0.FS:f.keyCode===221&&(s.key=c.C0.GS)}return s}},482:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Utf8ToUtf32=p.StringToUtf32=p.utf32ToString=p.stringFromCodePoint=void 0,p.stringFromCodePoint=function(_){return _>65535?(_-=65536,String.fromCharCode(55296+(_>>10))+String.fromCharCode(_%1024+56320)):String.fromCharCode(_)},p.utf32ToString=function(_,f,l){f===void 0&&(f=0),l===void 0&&(l=_.length);for(var g="",v=f;v<l;++v){var s=_[v];s>65535?(s-=65536,g+=String.fromCharCode(55296+(s>>10))+String.fromCharCode(s%1024+56320)):g+=String.fromCharCode(s)}return g};var w=function(){function _(){this._interim=0}return _.prototype.clear=function(){this._interim=0},_.prototype.decode=function(f,l){var g=f.length;if(!g)return 0;var v=0,s=0;this._interim&&(56320<=(a=f.charCodeAt(s++))&&a<=57343?l[v++]=1024*(this._interim-55296)+a-56320+65536:(l[v++]=this._interim,l[v++]=a),this._interim=0);for(var o=s;o<g;++o){var h=f.charCodeAt(o);if(55296<=h&&h<=56319){if(++o>=g)return this._interim=h,v;var a;56320<=(a=f.charCodeAt(o))&&a<=57343?l[v++]=1024*(h-55296)+a-56320+65536:(l[v++]=h,l[v++]=a)}else h!==65279&&(l[v++]=h)}return v},_}();p.StringToUtf32=w;var c=function(){function _(){this.interim=new Uint8Array(3)}return _.prototype.clear=function(){this.interim.fill(0)},_.prototype.decode=function(f,l){var g=f.length;if(!g)return 0;var v,s,o,h,a=0,t=0,e=0;if(this.interim[0]){var r=!1,i=this.interim[0];i&=(224&i)==192?31:(240&i)==224?15:7;for(var n=0,d=void 0;(d=63&this.interim[++n])&&n<4;)i<<=6,i|=d;for(var u=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,m=u-n;e<m;){if(e>=g)return 0;if((192&(d=f[e++]))!=128){e--,r=!0;break}this.interim[n++]=d,i<<=6,i|=63&d}r||(u===2?i<128?e--:l[a++]=i:u===3?i<2048||i>=55296&&i<=57343||i===65279||(l[a++]=i):i<65536||i>1114111||(l[a++]=i)),this.interim.fill(0)}for(var S=g-4,y=e;y<g;){for(;!(!(y<S)||128&(v=f[y])||128&(s=f[y+1])||128&(o=f[y+2])||128&(h=f[y+3]));)l[a++]=v,l[a++]=s,l[a++]=o,l[a++]=h,y+=4;if((v=f[y++])<128)l[a++]=v;else if((224&v)==192){if(y>=g)return this.interim[0]=v,a;if((192&(s=f[y++]))!=128){y--;continue}if((t=(31&v)<<6|63&s)<128){y--;continue}l[a++]=t}else if((240&v)==224){if(y>=g)return this.interim[0]=v,a;if((192&(s=f[y++]))!=128){y--;continue}if(y>=g)return this.interim[0]=v,this.interim[1]=s,a;if((192&(o=f[y++]))!=128){y--;continue}if((t=(15&v)<<12|(63&s)<<6|63&o)<2048||t>=55296&&t<=57343||t===65279)continue;l[a++]=t}else if((248&v)==240){if(y>=g)return this.interim[0]=v,a;if((192&(s=f[y++]))!=128){y--;continue}if(y>=g)return this.interim[0]=v,this.interim[1]=s,a;if((192&(o=f[y++]))!=128){y--;continue}if(y>=g)return this.interim[0]=v,this.interim[1]=s,this.interim[2]=o,a;if((192&(h=f[y++]))!=128){y--;continue}if((t=(7&v)<<18|(63&s)<<12|(63&o)<<6|63&h)<65536||t>1114111)continue;l[a++]=t}}return a},_}();p.Utf8ToUtf32=c},225:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.UnicodeV6=void 0;var c,_=w(8273),f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],g=function(){function v(){if(this.version="6",!c){c=new Uint8Array(65536),(0,_.fill)(c,1),c[0]=0,(0,_.fill)(c,0,1,32),(0,_.fill)(c,0,127,160),(0,_.fill)(c,2,4352,4448),c[9001]=2,c[9002]=2,(0,_.fill)(c,2,11904,42192),c[12351]=1,(0,_.fill)(c,2,44032,55204),(0,_.fill)(c,2,63744,64256),(0,_.fill)(c,2,65040,65050),(0,_.fill)(c,2,65072,65136),(0,_.fill)(c,2,65280,65377),(0,_.fill)(c,2,65504,65511);for(var s=0;s<f.length;++s)(0,_.fill)(c,0,f[s][0],f[s][1]+1)}}return v.prototype.wcwidth=function(s){return s<32?0:s<127?1:s<65536?c[s]:function(o,h){var a,t=0,e=h.length-1;if(o<h[0][0]||o>h[e][1])return!1;for(;e>=t;)if(o>h[a=t+e>>1][1])t=a+1;else{if(!(o<h[a][0]))return!0;e=a-1}return!1}(s,l)?0:s>=131072&&s<=196605||s>=196608&&s<=262141?2:1},v}();p.UnicodeV6=g},5981:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.WriteBuffer=void 0;var c=w(8460),_=typeof queueMicrotask>"u"?function(l){Promise.resolve().then(l)}:queueMicrotask,f=function(){function l(g){this._action=g,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._onWriteParsed=new c.EventEmitter}return Object.defineProperty(l.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),l.prototype.writeSync=function(g,v){if(v!==void 0&&this._syncCalls>v)this._syncCalls=0;else if(this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var s;for(this._isSyncWriting=!0;s=this._writeBuffer.shift();){this._action(s);var o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},l.prototype.write=function(g,v){var s=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return s._innerWrite()})),this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(v)},l.prototype._innerWrite=function(g,v){var s=this;g===void 0&&(g=0),v===void 0&&(v=!0);for(var o=g||Date.now();this._writeBuffer.length>this._bufferOffset;){var h=this._writeBuffer[this._bufferOffset],a=this._action(h,v);if(a)return void a.catch(function(e){return _(function(){throw e}),Promise.resolve(!1)}).then(function(e){return Date.now()-o>=12?setTimeout(function(){return s._innerWrite(0,e)}):s._innerWrite(o,e)});var t=this._callbacks[this._bufferOffset];if(t&&t(),this._bufferOffset++,this._pendingData-=h.length,Date.now()-o>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return s._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()},l}();p.WriteBuffer=f},5941:function(H,p){var w=this&&this.__read||function(l,g){var v=typeof Symbol=="function"&&l[Symbol.iterator];if(!v)return l;var s,o,h=v.call(l),a=[];try{for(;(g===void 0||g-- >0)&&!(s=h.next()).done;)a.push(s.value)}catch(t){o={error:t}}finally{try{s&&!s.done&&(v=h.return)&&v.call(h)}finally{if(o)throw o.error}}return a};Object.defineProperty(p,"__esModule",{value:!0}),p.toRgbString=p.parseColor=void 0;var c=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,_=/^[\da-f]+$/;function f(l,g){var v=l.toString(16),s=v.length<2?"0"+v:v;switch(g){case 4:return v[0];case 8:return s;case 12:return(s+s).slice(0,3);default:return s+s}}p.parseColor=function(l){if(l){var g=l.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);var v=c.exec(g);if(v){var s=v[1]?15:v[4]?255:v[7]?4095:65535;return[Math.round(parseInt(v[1]||v[4]||v[7]||v[10],16)/s*255),Math.round(parseInt(v[2]||v[5]||v[8]||v[11],16)/s*255),Math.round(parseInt(v[3]||v[6]||v[9]||v[12],16)/s*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),_.exec(g)&&[3,6,9,12].includes(g.length))){for(var o=g.length/3,h=[0,0,0],a=0;a<3;++a){var t=parseInt(g.slice(o*a,o*a+o),16);h[a]=o===1?t<<4:o===2?t:o===3?t>>4:t>>8}return h}}},p.toRgbString=function(l,g){g===void 0&&(g=16);var v=w(l,3),s=v[0],o=v[1],h=v[2];return"rgb:"+f(s,g)+"/"+f(o,g)+"/"+f(h,g)}},5770:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.PAYLOAD_LIMIT=void 0,p.PAYLOAD_LIMIT=1e7},6351:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DcsHandler=p.DcsParser=void 0;var c=w(482),_=w(8742),f=w(5770),l=[],g=function(){function o(){this._handlers=Object.create(null),this._active=l,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return o.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=l},o.prototype.registerHandler=function(h,a){this._handlers[h]===void 0&&(this._handlers[h]=[]);var t=this._handlers[h];return t.push(a),{dispose:function(){var e=t.indexOf(a);e!==-1&&t.splice(e,1)}}},o.prototype.clearHandler=function(h){this._handlers[h]&&delete this._handlers[h]},o.prototype.setHandlerFallback=function(h){this._handlerFb=h},o.prototype.reset=function(){if(this._active.length)for(var h=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;h>=0;--h)this._active[h].unhook(!1);this._stack.paused=!1,this._active=l,this._ident=0},o.prototype.hook=function(h,a){if(this.reset(),this._ident=h,this._active=this._handlers[h]||l,this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].hook(a);else this._handlerFb(this._ident,"HOOK",a)},o.prototype.put=function(h,a,t){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(h,a,t);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(h,a,t))},o.prototype.unhook=function(h,a){if(a===void 0&&(a=!0),this._active.length){var t=!1,e=this._active.length-1,r=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,t=a,r=this._stack.fallThrough,this._stack.paused=!1),!r&&t===!1){for(;e>=0&&(t=this._active[e].unhook(h))!==!0;e--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,t;e--}for(;e>=0;e--)if((t=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",h);this._active=l,this._ident=0},o}();p.DcsParser=g;var v=new _.Params;v.addParam(0);var s=function(){function o(h){this._handler=h,this._data="",this._params=v,this._hitLimit=!1}return o.prototype.hook=function(h){this._params=h.length>1||h.params[0]?h.clone():v,this._data="",this._hitLimit=!1},o.prototype.put=function(h,a,t){this._hitLimit||(this._data+=(0,c.utf32ToString)(h,a,t),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},o.prototype.unhook=function(h){var a=this,t=!1;if(this._hitLimit)t=!1;else if(h&&(t=this._handler(this._data,this._params))instanceof Promise)return t.then(function(e){return a._params=v,a._data="",a._hitLimit=!1,e});return this._params=v,this._data="",this._hitLimit=!1,t},o}();p.DcsHandler=s},2015:function(H,p,w){var c,_=this&&this.__extends||(c=function(t,e){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},c(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}c(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(p,"__esModule",{value:!0}),p.EscapeSequenceParser=p.VT500_TRANSITION_TABLE=p.TransitionTable=void 0;var f=w(844),l=w(8273),g=w(8742),v=w(6242),s=w(6351),o=function(){function t(e){this.table=new Uint8Array(e)}return t.prototype.setDefault=function(e,r){(0,l.fill)(this.table,e<<4|r)},t.prototype.add=function(e,r,i,n){this.table[r<<8|e]=i<<4|n},t.prototype.addMany=function(e,r,i,n){for(var d=0;d<e.length;d++)this.table[r<<8|e[d]]=i<<4|n},t}();p.TransitionTable=o;var h=160;p.VT500_TRANSITION_TABLE=function(){var t=new o(4095),e=Array.apply(null,Array(256)).map(function(m,S){return S}),r=function(m,S){return e.slice(m,S)},i=r(32,127),n=r(0,24);n.push(25),n.push.apply(n,r(28,32));var d,u=r(0,14);for(d in t.setDefault(1,0),t.addMany(i,0,2,0),u)t.addMany([24,26,153,154],d,3,0),t.addMany(r(128,144),d,3,0),t.addMany(r(144,152),d,3,0),t.add(156,d,0,0),t.add(27,d,11,1),t.add(157,d,4,8),t.addMany([152,158,159],d,0,7),t.add(155,d,11,3),t.add(144,d,11,9);return t.addMany(n,0,3,0),t.addMany(n,1,3,1),t.add(127,1,0,1),t.addMany(n,8,0,8),t.addMany(n,3,3,3),t.add(127,3,0,3),t.addMany(n,4,3,4),t.add(127,4,0,4),t.addMany(n,6,3,6),t.addMany(n,5,3,5),t.add(127,5,0,5),t.addMany(n,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(i,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(r(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(i,7,0,7),t.addMany(n,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(r(64,127),3,7,0),t.addMany(r(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(r(48,60),4,8,4),t.addMany(r(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(r(32,64),6,0,6),t.add(127,6,0,6),t.addMany(r(64,127),6,0,0),t.addMany(r(32,48),3,9,5),t.addMany(r(32,48),5,9,5),t.addMany(r(48,64),5,0,6),t.addMany(r(64,127),5,7,0),t.addMany(r(32,48),4,9,5),t.addMany(r(32,48),1,9,2),t.addMany(r(32,48),2,9,2),t.addMany(r(48,127),2,10,0),t.addMany(r(48,80),1,10,0),t.addMany(r(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(r(96,127),1,10,0),t.add(80,1,11,9),t.addMany(n,9,0,9),t.add(127,9,0,9),t.addMany(r(28,32),9,0,9),t.addMany(r(32,48),9,9,12),t.addMany(r(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(n,11,0,11),t.addMany(r(32,128),11,0,11),t.addMany(r(28,32),11,0,11),t.addMany(n,10,0,10),t.add(127,10,0,10),t.addMany(r(28,32),10,0,10),t.addMany(r(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(r(32,48),10,9,12),t.addMany(n,12,0,12),t.add(127,12,0,12),t.addMany(r(28,32),12,0,12),t.addMany(r(32,48),12,9,12),t.addMany(r(48,64),12,0,11),t.addMany(r(64,127),12,12,13),t.addMany(r(64,127),10,12,13),t.addMany(r(64,127),9,12,13),t.addMany(n,13,13,13),t.addMany(i,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(h,0,2,0),t.add(h,8,5,8),t.add(h,6,0,6),t.add(h,11,0,11),t.add(h,13,13,13),t}();var a=function(t){function e(r){r===void 0&&(r=p.VT500_TRANSITION_TABLE);var i=t.call(this)||this;return i._transitions=r,i._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},i.initialState=0,i.currentState=i.initialState,i._params=new g.Params,i._params.addParam(0),i._collect=0,i.precedingCodepoint=0,i._printHandlerFb=function(n,d,u){},i._executeHandlerFb=function(n){},i._csiHandlerFb=function(n,d){},i._escHandlerFb=function(n){},i._errorHandlerFb=function(n){return n},i._printHandler=i._printHandlerFb,i._executeHandlers=Object.create(null),i._csiHandlers=Object.create(null),i._escHandlers=Object.create(null),i._oscParser=new v.OscParser,i._dcsParser=new s.DcsParser,i._errorHandler=i._errorHandlerFb,i.registerEscHandler({final:"\\"},function(){return!0}),i}return _(e,t),e.prototype._identifier=function(r,i){i===void 0&&(i=[64,126]);var n=0;if(r.prefix){if(r.prefix.length>1)throw new Error("only one byte as prefix supported");if((n=r.prefix.charCodeAt(0))&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(r.intermediates){if(r.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var d=0;d<r.intermediates.length;++d){var u=r.intermediates.charCodeAt(d);if(32>u||u>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=u}}if(r.final.length!==1)throw new Error("final must be a single byte");var m=r.final.charCodeAt(0);if(i[0]>m||m>i[1])throw new Error("final must be in range "+i[0]+" .. "+i[1]);return(n<<=8)|m},e.prototype.identToString=function(r){for(var i=[];r;)i.push(String.fromCharCode(255&r)),r>>=8;return i.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(r){this._printHandler=r},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(r,i){var n=this._identifier(r,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);var d=this._escHandlers[n];return d.push(i),{dispose:function(){var u=d.indexOf(i);u!==-1&&d.splice(u,1)}}},e.prototype.clearEscHandler=function(r){this._escHandlers[this._identifier(r,[48,126])]&&delete this._escHandlers[this._identifier(r,[48,126])]},e.prototype.setEscHandlerFallback=function(r){this._escHandlerFb=r},e.prototype.setExecuteHandler=function(r,i){this._executeHandlers[r.charCodeAt(0)]=i},e.prototype.clearExecuteHandler=function(r){this._executeHandlers[r.charCodeAt(0)]&&delete this._executeHandlers[r.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(r){this._executeHandlerFb=r},e.prototype.registerCsiHandler=function(r,i){var n=this._identifier(r);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);var d=this._csiHandlers[n];return d.push(i),{dispose:function(){var u=d.indexOf(i);u!==-1&&d.splice(u,1)}}},e.prototype.clearCsiHandler=function(r){this._csiHandlers[this._identifier(r)]&&delete this._csiHandlers[this._identifier(r)]},e.prototype.setCsiHandlerFallback=function(r){this._csiHandlerFb=r},e.prototype.registerDcsHandler=function(r,i){return this._dcsParser.registerHandler(this._identifier(r),i)},e.prototype.clearDcsHandler=function(r){this._dcsParser.clearHandler(this._identifier(r))},e.prototype.setDcsHandlerFallback=function(r){this._dcsParser.setHandlerFallback(r)},e.prototype.registerOscHandler=function(r,i){return this._oscParser.registerHandler(r,i)},e.prototype.clearOscHandler=function(r){this._oscParser.clearHandler(r)},e.prototype.setOscHandlerFallback=function(r){this._oscParser.setHandlerFallback(r)},e.prototype.setErrorHandler=function(r){this._errorHandler=r},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(r,i,n,d,u){this._parseStack.state=r,this._parseStack.handlers=i,this._parseStack.handlerPos=n,this._parseStack.transition=d,this._parseStack.chunkPos=u},e.prototype.parse=function(r,i,n){var d,u=0,m=0,S=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,S=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var y=this._parseStack.handlers,b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&b>-1){for(;b>=0&&(d=y[b](this._params))!==!0;b--)if(d instanceof Promise)return this._parseStack.handlerPos=b,d}this._parseStack.handlers=[];break;case 4:if(n===!1&&b>-1){for(;b>=0&&(d=y[b]())!==!0;b--)if(d instanceof Promise)return this._parseStack.handlerPos=b,d}this._parseStack.handlers=[];break;case 6:if(u=r[this._parseStack.chunkPos],d=this._dcsParser.unhook(u!==24&&u!==26,n))return d;u===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(u=r[this._parseStack.chunkPos],d=this._oscParser.end(u!==24&&u!==26,n))return d;u===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,S=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var C=S;C<i;++C){switch(u=r[C],(m=this._transitions.table[this.currentState<<8|(u<160?u:h)])>>4){case 2:for(var M=C+1;;++M){if(M>=i||(u=r[M])<32||u>126&&u<h){this._printHandler(r,C,M),C=M-1;break}if(++M>=i||(u=r[M])<32||u>126&&u<h){this._printHandler(r,C,M),C=M-1;break}if(++M>=i||(u=r[M])<32||u>126&&u<h){this._printHandler(r,C,M),C=M-1;break}if(++M>=i||(u=r[M])<32||u>126&&u<h){this._printHandler(r,C,M),C=M-1;break}}break;case 3:this._executeHandlers[u]?this._executeHandlers[u]():this._executeHandlerFb(u),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:C,code:u,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var L=(y=this._csiHandlers[this._collect<<8|u])?y.length-1:-1;L>=0&&(d=y[L](this._params))!==!0;L--)if(d instanceof Promise)return this._preserveStack(3,y,L,m,C),d;L<0&&this._csiHandlerFb(this._collect<<8|u,this._params),this.precedingCodepoint=0;break;case 8:do switch(u){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(u-48)}while(++C<i&&(u=r[C])>47&&u<60);C--;break;case 9:this._collect<<=8,this._collect|=u;break;case 10:for(var R=this._escHandlers[this._collect<<8|u],E=R?R.length-1:-1;E>=0&&(d=R[E]())!==!0;E--)if(d instanceof Promise)return this._preserveStack(4,R,E,m,C),d;E<0&&this._escHandlerFb(this._collect<<8|u),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|u,this._params);break;case 13:for(var x=C+1;;++x)if(x>=i||(u=r[x])===24||u===26||u===27||u>127&&u<h){this._dcsParser.put(r,C,x),C=x-1;break}break;case 14:if(d=this._dcsParser.unhook(u!==24&&u!==26))return this._preserveStack(6,[],0,m,C),d;u===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var A=C+1;;A++)if(A>=i||(u=r[A])<32||u>127&&u<h){this._oscParser.put(r,C,A),C=A-1;break}break;case 6:if(d=this._oscParser.end(u!==24&&u!==26))return this._preserveStack(5,[],0,m,C),d;u===27&&(m|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&m}},e}(f.Disposable);p.EscapeSequenceParser=a},6242:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.OscHandler=p.OscParser=void 0;var c=w(5770),_=w(482),f=[],l=function(){function v(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return v.prototype.registerHandler=function(s,o){this._handlers[s]===void 0&&(this._handlers[s]=[]);var h=this._handlers[s];return h.push(o),{dispose:function(){var a=h.indexOf(o);a!==-1&&h.splice(a,1)}}},v.prototype.clearHandler=function(s){this._handlers[s]&&delete this._handlers[s]},v.prototype.setHandlerFallback=function(s){this._handlerFb=s},v.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=f},v.prototype.reset=function(){if(this._state===2)for(var s=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;s>=0;--s)this._active[s].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0},v.prototype._start=function(){if(this._active=this._handlers[this._id]||f,this._active.length)for(var s=this._active.length-1;s>=0;s--)this._active[s].start();else this._handlerFb(this._id,"START")},v.prototype._put=function(s,o,h){if(this._active.length)for(var a=this._active.length-1;a>=0;a--)this._active[a].put(s,o,h);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(s,o,h))},v.prototype.start=function(){this.reset(),this._state=1},v.prototype.put=function(s,o,h){if(this._state!==3){if(this._state===1)for(;o<h;){var a=s[o++];if(a===59){this._state=2,this._start();break}if(a<48||57<a)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+a-48}this._state===2&&h-o>0&&this._put(s,o,h)}},v.prototype.end=function(s,o){if(o===void 0&&(o=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var h=!1,a=this._active.length-1,t=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,h=o,t=this._stack.fallThrough,this._stack.paused=!1),!t&&h===!1){for(;a>=0&&(h=this._active[a].end(s))!==!0;a--)if(h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,h;a--}for(;a>=0;a--)if((h=this._active[a].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,h}else this._handlerFb(this._id,"END",s);this._active=f,this._id=-1,this._state=0}},v}();p.OscParser=l;var g=function(){function v(s){this._handler=s,this._data="",this._hitLimit=!1}return v.prototype.start=function(){this._data="",this._hitLimit=!1},v.prototype.put=function(s,o,h){this._hitLimit||(this._data+=(0,_.utf32ToString)(s,o,h),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},v.prototype.end=function(s){var o=this,h=!1;if(this._hitLimit)h=!1;else if(s&&(h=this._handler(this._data))instanceof Promise)return h.then(function(a){return o._data="",o._hitLimit=!1,a});return this._data="",this._hitLimit=!1,h},v}();p.OscHandler=g},8742:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Params=void 0;var w=2147483647,c=function(){function _(f,l){if(f===void 0&&(f=32),l===void 0&&(l=32),this.maxLength=f,this.maxSubParamsLength=l,l>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(l),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return _.fromArray=function(f){var l=new _;if(!f.length)return l;for(var g=Array.isArray(f[0])?1:0;g<f.length;++g){var v=f[g];if(Array.isArray(v))for(var s=0;s<v.length;++s)l.addSubParam(v[s]);else l.addParam(v)}return l},_.prototype.clone=function(){var f=new _(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f},_.prototype.toArray=function(){for(var f=[],l=0;l<this.length;++l){f.push(this.params[l]);var g=this._subParamsIdx[l]>>8,v=255&this._subParamsIdx[l];v-g>0&&f.push(Array.prototype.slice.call(this._subParams,g,v))}return f},_.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},_.prototype.addParam=function(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>w?w:f}},_.prototype.addSubParam=function(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>w?w:f,this._subParamsIdx[this.length-1]++}},_.prototype.hasSubParams=function(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0},_.prototype.getSubParams=function(f){var l=this._subParamsIdx[f]>>8,g=255&this._subParamsIdx[f];return g-l>0?this._subParams.subarray(l,g):null},_.prototype.getSubParamsAll=function(){for(var f={},l=0;l<this.length;++l){var g=this._subParamsIdx[l]>>8,v=255&this._subParamsIdx[l];v-g>0&&(f[l]=this._subParams.slice(g,v))}return f},_.prototype.addDigit=function(f){var l;if(!(this._rejectDigits||!(l=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var g=this._digitIsSub?this._subParams:this.params,v=g[l-1];g[l-1]=~v?Math.min(10*v+f,w):f}},_}();p.Params=c},5741:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.AddonManager=void 0;var w=function(){function c(){this._addons=[]}return c.prototype.dispose=function(){for(var _=this._addons.length-1;_>=0;_--)this._addons[_].instance.dispose()},c.prototype.loadAddon=function(_,f){var l=this,g={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(g),f.dispose=function(){return l._wrappedAddonDispose(g)},f.activate(_)},c.prototype._wrappedAddonDispose=function(_){if(!_.isDisposed){for(var f=-1,l=0;l<this._addons.length;l++)if(this._addons[l]===_){f=l;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");_.isDisposed=!0,_.dispose.apply(_.instance),this._addons.splice(f,1)}},c}();p.AddonManager=w},8771:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferApiView=void 0;var c=w(3785),_=w(511),f=function(){function l(g,v){this._buffer=g,this.type=v}return l.prototype.init=function(g){return this._buffer=g,this},Object.defineProperty(l.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),l.prototype.getLine=function(g){var v=this._buffer.lines.get(g);if(v)return new c.BufferLineApiView(v)},l.prototype.getNullCell=function(){return new _.CellData},l}();p.BufferApiView=f},3785:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferLineApiView=void 0;var c=w(511),_=function(){function f(l){this._line=l}return Object.defineProperty(f.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),f.prototype.getCell=function(l,g){if(!(l<0||l>=this._line.length))return g?(this._line.loadCell(l,g),g):this._line.loadCell(l,new c.CellData)},f.prototype.translateToString=function(l,g,v){return this._line.translateToString(l,g,v)},f}();p.BufferLineApiView=_},8285:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.BufferNamespaceApi=void 0;var c=w(8771),_=w(8460),f=function(){function l(g){var v=this;this._core=g,this._onBufferChange=new _.EventEmitter,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return v._onBufferChange.fire(v.active)})}return Object.defineProperty(l.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),l}();p.BufferNamespaceApi=f},7975:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.ParserApi=void 0;var w=function(){function c(_){this._core=_}return c.prototype.registerCsiHandler=function(_,f){return this._core.registerCsiHandler(_,function(l){return f(l.toArray())})},c.prototype.addCsiHandler=function(_,f){return this.registerCsiHandler(_,f)},c.prototype.registerDcsHandler=function(_,f){return this._core.registerDcsHandler(_,function(l,g){return f(l,g.toArray())})},c.prototype.addDcsHandler=function(_,f){return this.registerDcsHandler(_,f)},c.prototype.registerEscHandler=function(_,f){return this._core.registerEscHandler(_,f)},c.prototype.addEscHandler=function(_,f){return this.registerEscHandler(_,f)},c.prototype.registerOscHandler=function(_,f){return this._core.registerOscHandler(_,f)},c.prototype.addOscHandler=function(_,f){return this.registerOscHandler(_,f)},c}();p.ParserApi=w},7090:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.UnicodeApi=void 0;var w=function(){function c(_){this._core=_}return c.prototype.register=function(_){this._core.unicodeService.register(_)},Object.defineProperty(c.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(_){this._core.unicodeService.activeVersion=_},enumerable:!1,configurable:!0}),c}();p.UnicodeApi=w},744:function(H,p,w){var c,_=this&&this.__extends||(c=function(a,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},c(a,t)},function(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=a}c(a,t),a.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(a,t,e,r){var i,n=arguments.length,d=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(a,t,e,r);else for(var u=a.length-1;u>=0;u--)(i=a[u])&&(d=(n<3?i(d):n>3?i(t,e,d):i(t,e))||d);return n>3&&d&&Object.defineProperty(t,e,d),d},l=this&&this.__param||function(a,t){return function(e,r){t(e,r,a)}};Object.defineProperty(p,"__esModule",{value:!0}),p.BufferService=p.MINIMUM_ROWS=p.MINIMUM_COLS=void 0;var g=w(2585),v=w(5295),s=w(8460),o=w(844);p.MINIMUM_COLS=2,p.MINIMUM_ROWS=1;var h=function(a){function t(e){var r=a.call(this)||this;return r._optionsService=e,r.isUserScrolling=!1,r._onResize=new s.EventEmitter,r._onScroll=new s.EventEmitter,r.cols=Math.max(e.rawOptions.cols||0,p.MINIMUM_COLS),r.rows=Math.max(e.rawOptions.rows||0,p.MINIMUM_ROWS),r.buffers=new v.BufferSet(e,r),r}return _(t,a),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){a.prototype.dispose.call(this),this.buffers.dispose()},t.prototype.resize=function(e,r){this.cols=e,this.rows=r,this.buffers.resize(e,r),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:r})},t.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},t.prototype.scroll=function(e,r){r===void 0&&(r=!1);var i,n=this.buffer;(i=this._cachedBlankLine)&&i.length===this.cols&&i.getFg(0)===e.fg&&i.getBg(0)===e.bg||(i=n.getBlankLine(e,r),this._cachedBlankLine=i),i.isWrapped=r;var d=n.ybase+n.scrollTop,u=n.ybase+n.scrollBottom;if(n.scrollTop===0){var m=n.lines.isFull;u===n.lines.length-1?m?n.lines.recycle().copyFrom(i):n.lines.push(i.clone()):n.lines.splice(u+1,0,i.clone()),m?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{var S=u-d+1;n.lines.shiftElements(d+1,S-1,-1),n.lines.set(u,i.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)},t.prototype.scrollLines=function(e,r,i){var n=this.buffer;if(e<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else e+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);var d=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+e,n.ybase),0),d!==n.ydisp&&(r||this._onScroll.fire(n.ydisp))},t.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},t.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},t.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},t.prototype.scrollToLine=function(e){var r=e-this.buffer.ydisp;r!==0&&this.scrollLines(r)},f([l(0,g.IOptionsService)],t)}(o.Disposable);p.BufferService=h},7994:(H,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.CharsetService=void 0;var w=function(){function c(){this.glevel=0,this._charsets=[]}return c.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},c.prototype.setgLevel=function(_){this.glevel=_,this.charset=this._charsets[_]},c.prototype.setgCharset=function(_,f){this._charsets[_]=f,this.glevel===_&&(this.charset=f)},c}();p.CharsetService=w},1753:function(H,p,w){var c=this&&this.__decorate||function(t,e,r,i){var n,d=arguments.length,u=d<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(t,e,r,i);else for(var m=t.length-1;m>=0;m--)(n=t[m])&&(u=(d<3?n(u):d>3?n(e,r,u):n(e,r))||u);return d>3&&u&&Object.defineProperty(e,r,u),u},_=this&&this.__param||function(t,e){return function(r,i){e(r,i,t)}},f=this&&this.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.CoreMouseService=void 0;var l=w(2585),g=w(8460),v={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(t){return t.button!==4&&t.action===1&&(t.ctrl=!1,t.alt=!1,t.shift=!1,!0)}},VT200:{events:19,restrict:function(t){return t.action!==32}},DRAG:{events:23,restrict:function(t){return t.action!==32||t.button!==3}},ANY:{events:31,restrict:function(t){return!0}}};function s(t,e){var r=(t.ctrl?16:0)|(t.shift?4:0)|(t.alt?8:0);return t.button===4?(r|=64,r|=t.action):(r|=3&t.button,4&t.button&&(r|=64),8&t.button&&(r|=128),t.action===32?r|=32:t.action!==0||e||(r|=3)),r}var o=String.fromCharCode,h={DEFAULT:function(t){var e=[s(t,!1)+32,t.col+32,t.row+32];return e[0]>255||e[1]>255||e[2]>255?"":"\x1B[M"+o(e[0])+o(e[1])+o(e[2])},SGR:function(t){var e=t.action===0&&t.button!==4?"m":"M";return"\x1B[<"+s(t,!0)+";"+t.col+";"+t.row+e}},a=function(){function t(e,r){var i,n,d,u;this._bufferService=e,this._coreService=r,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new g.EventEmitter,this._lastEvent=null;try{for(var m=f(Object.keys(v)),S=m.next();!S.done;S=m.next()){var y=S.value;this.addProtocol(y,v[y])}}catch(L){i={error:L}}finally{try{S&&!S.done&&(n=m.return)&&n.call(m)}finally{if(i)throw i.error}}try{for(var b=f(Object.keys(h)),C=b.next();!C.done;C=b.next()){var M=C.value;this.addEncoding(M,h[M])}}catch(L){d={error:L}}finally{try{C&&!C.done&&(u=b.return)&&u.call(b)}finally{if(d)throw d.error}}this.reset()}return t.prototype.addProtocol=function(e,r){this._protocols[e]=r},t.prototype.addEncoding=function(e,r){this._encodings[e]=r},Object.defineProperty(t.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(e){if(!this._protocols[e])throw new Error('unknown protocol "'+e+'"');this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(e){if(!this._encodings[e])throw new Error('unknown encoding "'+e+'"');this._activeEncoding=e},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(t.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),t.prototype.triggerMouseEvent=function(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,e))||!this._protocols[this._activeProtocol].restrict(e))return!1;var r=this._encodings[this._activeEncoding](e);return r&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(r):this._coreService.triggerDataEvent(r,!0)),this._lastEvent=e,!0},t.prototype.explainEvents=function(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}},t.prototype._compareEvents=function(e,r){return e.col===r.col&&e.row===r.row&&e.button===r.button&&e.action===r.action&&e.ctrl===r.ctrl&&e.alt===r.alt&&e.shift===r.shift},c([_(0,l.IBufferService),_(1,l.ICoreService)],t)}();p.CoreMouseService=a},6975:function(H,p,w){var c,_=this&&this.__extends||(c=function(e,r){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&(i[d]=n[d])},c(e,r)},function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}c(e,r),e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}),f=this&&this.__decorate||function(e,r,i,n){var d,u=arguments.length,m=u<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(e,r,i,n);else for(var S=e.length-1;S>=0;S--)(d=e[S])&&(m=(u<3?d(m):u>3?d(r,i,m):d(r,i))||m);return u>3&&m&&Object.defineProperty(r,i,m),m},l=this&&this.__param||function(e,r){return function(i,n){r(i,n,e)}};Object.defineProperty(p,"__esModule",{value:!0}),p.CoreService=void 0;var g=w(2585),v=w(8460),s=w(1439),o=w(844),h=Object.freeze({insertMode:!1}),a=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),t=function(e){function r(i,n,d,u){var m=e.call(this)||this;return m._bufferService=n,m._logService=d,m._optionsService=u,m.isCursorInitialized=!1,m.isCursorHidden=!1,m._onData=m.register(new v.EventEmitter),m._onUserInput=m.register(new v.EventEmitter),m._onBinary=m.register(new v.EventEmitter),m._scrollToBottom=i,m.register({dispose:function(){return m._scrollToBottom=void 0}}),m.modes=(0,s.clone)(h),m.decPrivateModes=(0,s.clone)(a),m}return _(r,e),Object.defineProperty(r.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),r.prototype.reset=function(){this.modes=(0,s.clone)(h),this.decPrivateModes=(0,s.clone)(a)},r.prototype.triggerDataEvent=function(i,n){if(n===void 0&&(n=!1),!this._optionsService.rawOptions.disableStdin){var d=this._bufferService.buffer;d.ybase!==d.ydisp&&this._scrollToBottom(),n&&this._onUserInput.fire(),this._logService.debug('sending data "'+i+'"',function(){return i.split("").map(function(u){return u.charCodeAt(0)})}),this._onData.fire(i)}},r.prototype.triggerBinaryEvent=function(i){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+i+'"',function(){return i.split("").map(function(n){return n.charCodeAt(0)})}),this._onBinary.fire(i))},f([l(1,g.IBufferService),l(2,g.ILogService),l(3,g.IOptionsService)],r)}(o.Disposable);p.CoreService=t},9074:function(H,p,w){var c,_=this&&this.__extends||(c=function(t,e){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},c(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}c(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}),f=this&&this.__generator||function(t,e){var r,i,n,d,u={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(S){return function(y){return function(b){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(n=2&b[0]?i.return:b[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,b[1])).done)return n;switch(i=0,n&&(b=[2&b[0],n.value]),b[0]){case 0:case 1:n=b;break;case 4:return u.label++,{value:b[1],done:!1};case 5:u.label++,i=b[1],b=[0];continue;case 7:b=u.ops.pop(),u.trys.pop();continue;default:if(!((n=(n=u.trys).length>0&&n[n.length-1])||b[0]!==6&&b[0]!==2)){u=0;continue}if(b[0]===3&&(!n||b[1]>n[0]&&b[1]<n[3])){u.label=b[1];break}if(b[0]===6&&u.label<n[1]){u.label=n[1],n=b;break}if(n&&u.label<n[2]){u.label=n[2],u.ops.push(b);break}n[2]&&u.ops.pop(),u.trys.pop();continue}b=e.call(t,u)}catch(C){b=[6,C],i=0}finally{r=n=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([S,y])}}},l=this&&this.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(p,"__esModule",{value:!0}),p.DecorationService=void 0;var g=w(8055),v=w(8460),s=w(844),o=w(6106),h=function(t){function e(){var r=t.call(this)||this;return r._decorations=new o.SortedList(function(i){return i.marker.line}),r._onDecorationRegistered=r.register(new v.EventEmitter),r._onDecorationRemoved=r.register(new v.EventEmitter),r}return _(e,t),Object.defineProperty(e.prototype,"onDecorationRegistered",{get:function(){return this._onDecorationRegistered.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDecorationRemoved",{get:function(){return this._onDecorationRemoved.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"decorations",{get:function(){return this._decorations.values()},enumerable:!1,configurable:!0}),e.prototype.registerDecoration=function(r){var i=this;if(!r.marker.isDisposed){var n=new a(r);if(n){var d=n.marker.onDispose(function(){return n.dispose()});n.onDispose(function(){n&&(i._decorations.delete(n)&&i._onDecorationRemoved.fire(n),d.dispose())}),this._decorations.insert(n),this._onDecorationRegistered.fire(n)}return n}},e.prototype.reset=function(){var r,i;try{for(var n=l(this._decorations.values()),d=n.next();!d.done;d=n.next())d.value.dispose()}catch(u){r={error:u}}finally{try{d&&!d.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}this._decorations.clear()},e.prototype.getDecorationsAtLine=function(r){return f(this,function(i){return[2,this._decorations.getKeyIterator(r)]})},e.prototype.getDecorationsAtCell=function(r,i,n){var d,u,m,S,y,b,C,M,L,R,E;return f(this,function(x){switch(x.label){case 0:d=0,u=0,x.label=1;case 1:x.trys.push([1,6,7,8]),m=l(this._decorations.getKeyIterator(i)),S=m.next(),x.label=2;case 2:return S.done?[3,5]:(y=S.value,d=(L=y.options.x)!==null&&L!==void 0?L:0,u=d+((R=y.options.width)!==null&&R!==void 0?R:1),!(r>=d&&r<u)||n&&((E=y.options.layer)!==null&&E!==void 0?E:"bottom")!==n?[3,4]:[4,y]);case 3:x.sent(),x.label=4;case 4:return S=m.next(),[3,2];case 5:return[3,8];case 6:return b=x.sent(),C={error:b},[3,8];case 7:try{S&&!S.done&&(M=m.return)&&M.call(m)}finally{if(C)throw C.error}return[7];case 8:return[2]}})},e.prototype.dispose=function(){var r,i;try{for(var n=l(this._decorations.values()),d=n.next();!d.done;d=n.next()){var u=d.value;this._onDecorationRemoved.fire(u)}}catch(m){r={error:m}}finally{try{d&&!d.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}this.reset()},e}(s.Disposable);p.DecorationService=h;var a=function(t){function e(r){var i=t.call(this)||this;return i.options=r,i.isDisposed=!1,i.onRenderEmitter=i.register(new v.EventEmitter),i.onRender=i.onRenderEmitter.event,i._onDispose=i.register(new v.EventEmitter),i.onDispose=i._onDispose.event,i._cachedBg=null,i._cachedFg=null,i.marker=r.marker,i.options.overviewRulerOptions&&!i.options.overviewRulerOptions.position&&(i.options.overviewRulerOptions.position="full"),i}return _(e,t),Object.defineProperty(e.prototype,"backgroundColorRGB",{get:function(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=g.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"foregroundColorRGB",{get:function(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=g.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._onDispose.fire(),t.prototype.dispose.call(this))},e}(s.Disposable)},3730:function(H,p,w){var c=this&&this.__decorate||function(g,v,s,o){var h,a=arguments.length,t=a<3?v:o===null?o=Object.getOwnPropertyDescriptor(v,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(g,v,s,o);else for(var e=g.length-1;e>=0;e--)(h=g[e])&&(t=(a<3?h(t):a>3?h(v,s,t):h(v,s))||t);return a>3&&t&&Object.defineProperty(v,s,t),t},_=this&&this.__param||function(g,v){return function(s,o){v(s,o,g)}};Object.defineProperty(p,"__esModule",{value:!0}),p.DirtyRowService=void 0;var f=w(2585),l=function(){function g(v){this._bufferService=v,this.clearRange()}return Object.defineProperty(g.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),g.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},g.prototype.markDirty=function(v){v<this._start?this._start=v:v>this._end&&(this._end=v)},g.prototype.markRangeDirty=function(v,s){if(v>s){var o=v;v=s,s=o}v<this._start&&(this._start=v),s>this._end&&(this._end=s)},g.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},c([_(0,f.IBufferService)],g)}();p.DirtyRowService=l},4348:function(H,p,w){var c=this&&this.__values||function(o){var h=typeof Symbol=="function"&&Symbol.iterator,a=h&&o[h],t=0;if(a)return a.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&t>=o.length&&(o=void 0),{value:o&&o[t++],done:!o}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},_=this&&this.__read||function(o,h){var a=typeof Symbol=="function"&&o[Symbol.iterator];if(!a)return o;var t,e,r=a.call(o),i=[];try{for(;(h===void 0||h-- >0)&&!(t=r.next()).done;)i.push(t.value)}catch(n){e={error:n}}finally{try{t&&!t.done&&(a=r.return)&&a.call(r)}finally{if(e)throw e.error}}return i},f=this&&this.__spreadArray||function(o,h,a){if(a||arguments.length===2)for(var t,e=0,r=h.length;e<r;e++)!t&&e in h||(t||(t=Array.prototype.slice.call(h,0,e)),t[e]=h[e]);return o.concat(t||Array.prototype.slice.call(h))};Object.defineProperty(p,"__esModule",{value:!0}),p.InstantiationService=p.ServiceCollection=void 0;var l=w(2585),g=w(8343),v=function(){function o(){for(var h,a,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._entries=new Map;try{for(var r=c(t),i=r.next();!i.done;i=r.next()){var n=_(i.value,2),d=n[0],u=n[1];this.set(d,u)}}catch(m){h={error:m}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(h)throw h.error}}}return o.prototype.set=function(h,a){var t=this._entries.get(h);return this._entries.set(h,a),t},o.prototype.forEach=function(h){this._entries.forEach(function(a,t){return h(t,a)})},o.prototype.has=function(h){return this._entries.has(h)},o.prototype.get=function(h){return this._entries.get(h)},o}();p.ServiceCollection=v;var s=function(){function o(){this._services=new v,this._services.set(l.IInstantiationService,this)}return o.prototype.setService=function(h,a){this._services.set(h,a)},o.prototype.getService=function(h){return this._services.get(h)},o.prototype.createInstance=function(h){for(var a,t,e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=(0,g.getServiceDependencies)(h).sort(function(b,C){return b.index-C.index}),n=[];try{for(var d=c(i),u=d.next();!u.done;u=d.next()){var m=u.value,S=this._services.get(m.id);if(!S)throw new Error("[createInstance] "+h.name+" depends on UNKNOWN service "+m.id+".");n.push(S)}}catch(b){a={error:b}}finally{try{u&&!u.done&&(t=d.return)&&t.call(d)}finally{if(a)throw a.error}}var y=i.length>0?i[0].index:e.length;if(e.length!==y)throw new Error("[createInstance] First service dependency of "+h.name+" at position "+(y+1)+" conflicts with "+e.length+" static arguments");return new(h.bind.apply(h,f([void 0],_(f(f([],_(e),!1),_(n),!1)),!1)))},o}();p.InstantiationService=s},7866:function(H,p,w){var c=this&&this.__decorate||function(o,h,a,t){var e,r=arguments.length,i=r<3?h:t===null?t=Object.getOwnPropertyDescriptor(h,a):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(o,h,a,t);else for(var n=o.length-1;n>=0;n--)(e=o[n])&&(i=(r<3?e(i):r>3?e(h,a,i):e(h,a))||i);return r>3&&i&&Object.defineProperty(h,a,i),i},_=this&&this.__param||function(o,h){return function(a,t){h(a,t,o)}},f=this&&this.__read||function(o,h){var a=typeof Symbol=="function"&&o[Symbol.iterator];if(!a)return o;var t,e,r=a.call(o),i=[];try{for(;(h===void 0||h-- >0)&&!(t=r.next()).done;)i.push(t.value)}catch(n){e={error:n}}finally{try{t&&!t.done&&(a=r.return)&&a.call(r)}finally{if(e)throw e.error}}return i},l=this&&this.__spreadArray||function(o,h,a){if(a||arguments.length===2)for(var t,e=0,r=h.length;e<r;e++)!t&&e in h||(t||(t=Array.prototype.slice.call(h,0,e)),t[e]=h[e]);return o.concat(t||Array.prototype.slice.call(h))};Object.defineProperty(p,"__esModule",{value:!0}),p.LogService=void 0;var g=w(2585),v={debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF},s=function(){function o(h){var a=this;this._optionsService=h,this.logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(t){t==="logLevel"&&a._updateLogLevel()})}return o.prototype._updateLogLevel=function(){this.logLevel=v[this._optionsService.rawOptions.logLevel]},o.prototype._evalLazyOptionalParams=function(h){for(var a=0;a<h.length;a++)typeof h[a]=="function"&&(h[a]=h[a]())},o.prototype._log=function(h,a,t){this._evalLazyOptionalParams(t),h.call.apply(h,l([console,"xterm.js: "+a],f(t),!1))},o.prototype.debug=function(h){for(var a=[],t=1;t<arguments.length;t++)a[t-1]=arguments[t];this.logLevel<=g.LogLevelEnum.DEBUG&&this._log(console.log,h,a)},o.prototype.info=function(h){for(var a=[],t=1;t<arguments.length;t++)a[t-1]=arguments[t];this.logLevel<=g.LogLevelEnum.INFO&&this._log(console.info,h,a)},o.prototype.warn=function(h){for(var a=[],t=1;t<arguments.length;t++)a[t-1]=arguments[t];this.logLevel<=g.LogLevelEnum.WARN&&this._log(console.warn,h,a)},o.prototype.error=function(h){for(var a=[],t=1;t<arguments.length;t++)a[t-1]=arguments[t];this.logLevel<=g.LogLevelEnum.ERROR&&this._log(console.error,h,a)},c([_(0,g.IOptionsService)],o)}();p.LogService=s},7302:function(H,p,w){var c=this&&this.__assign||function(){return c=Object.assign||function(v){for(var s,o=1,h=arguments.length;o<h;o++)for(var a in s=arguments[o])Object.prototype.hasOwnProperty.call(s,a)&&(v[a]=s[a]);return v},c.apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0}),p.OptionsService=p.DEFAULT_OPTIONS=p.DEFAULT_BELL_SOUND=void 0;var _=w(8460),f=w(6114);p.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",p.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:p.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:void 0};var l=["normal","bold","100","200","300","400","500","600","700","800","900"],g=function(){function v(s){this._onOptionChange=new _.EventEmitter;var o=c({},p.DEFAULT_OPTIONS);for(var h in s)if(h in o)try{var a=s[h];o[h]=this._sanitizeAndValidateOption(h,a)}catch(t){console.error(t)}this.rawOptions=o,this.options=c({},o),this._setupOptions()}return Object.defineProperty(v.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),v.prototype._setupOptions=function(){var s=this,o=function(e){if(!(e in p.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');return s.rawOptions[e]},h=function(e,r){if(!(e in p.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');r=s._sanitizeAndValidateOption(e,r),s.rawOptions[e]!==r&&(s.rawOptions[e]=r,s._onOptionChange.fire(e))};for(var a in this.rawOptions){var t={get:o.bind(this,a),set:h.bind(this,a)};Object.defineProperty(this.options,a,t)}},v.prototype.setOption=function(s,o){this.options[s]=o},v.prototype._sanitizeAndValidateOption=function(s,o){switch(s){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":o||(o=p.DEFAULT_OPTIONS[s]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=l.includes(o)?o:p.DEFAULT_OPTIONS[s];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(s+" cannot be less than 1, value: "+o);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(s+" cannot be less than 0, value: "+o);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(s+" cannot be less than or equal to 0, value: "+o);case"rows":case"cols":if(!o&&o!==0)throw new Error(s+" must be numeric, value: "+o)}return o},v.prototype.getOption=function(s){return this.options[s]},v}();p.OptionsService=g},8343:(H,p)=>{function w(c,_,f){_.di$target===_?_.di$dependencies.push({id:c,index:f}):(_.di$dependencies=[{id:c,index:f}],_.di$target=_)}Object.defineProperty(p,"__esModule",{value:!0}),p.createDecorator=p.getServiceDependencies=p.serviceRegistry=void 0,p.serviceRegistry=new Map,p.getServiceDependencies=function(c){return c.di$dependencies||[]},p.createDecorator=function(c){if(p.serviceRegistry.has(c))return p.serviceRegistry.get(c);var _=function(f,l,g){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");w(_,f,g)};return _.toString=function(){return c},p.serviceRegistry.set(c,_),_}},2585:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.IDecorationService=p.IUnicodeService=p.IOptionsService=p.ILogService=p.LogLevelEnum=p.IInstantiationService=p.IDirtyRowService=p.ICharsetService=p.ICoreService=p.ICoreMouseService=p.IBufferService=void 0;var c,_=w(8343);p.IBufferService=(0,_.createDecorator)("BufferService"),p.ICoreMouseService=(0,_.createDecorator)("CoreMouseService"),p.ICoreService=(0,_.createDecorator)("CoreService"),p.ICharsetService=(0,_.createDecorator)("CharsetService"),p.IDirtyRowService=(0,_.createDecorator)("DirtyRowService"),p.IInstantiationService=(0,_.createDecorator)("InstantiationService"),(c=p.LogLevelEnum||(p.LogLevelEnum={}))[c.DEBUG=0]="DEBUG",c[c.INFO=1]="INFO",c[c.WARN=2]="WARN",c[c.ERROR=3]="ERROR",c[c.OFF=4]="OFF",p.ILogService=(0,_.createDecorator)("LogService"),p.IOptionsService=(0,_.createDecorator)("OptionsService"),p.IUnicodeService=(0,_.createDecorator)("UnicodeService"),p.IDecorationService=(0,_.createDecorator)("DecorationService")},1480:(H,p,w)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.UnicodeService=void 0;var c=w(8460),_=w(225),f=function(){function l(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter;var g=new _.UnicodeV6;this.register(g),this._active=g.version,this._activeProvider=g}return Object.defineProperty(l.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"activeVersion",{get:function(){return this._active},set:function(g){if(!this._providers[g])throw new Error('unknown Unicode version "'+g+'"');this._active=g,this._activeProvider=this._providers[g],this._onChange.fire(g)},enumerable:!1,configurable:!0}),l.prototype.register=function(g){this._providers[g.version]=g},l.prototype.wcwidth=function(g){return this._activeProvider.wcwidth(g)},l.prototype.getStringCellWidth=function(g){for(var v=0,s=g.length,o=0;o<s;++o){var h=g.charCodeAt(o);if(55296<=h&&h<=56319){if(++o>=s)return v+this.wcwidth(h);var a=g.charCodeAt(o);56320<=a&&a<=57343?h=1024*(h-55296)+a-56320+65536:v+=this.wcwidth(a)}v+=this.wcwidth(h)}return v},l}();p.UnicodeService=f}},re={};return function H(p){var w=re[p];if(w!==void 0)return w.exports;var c=re[p]={exports:{}};return _e[p].call(c.exports,c,c.exports,H),c.exports}(4389)})()})})(wr);const Er=xr(wr.exports);function gr(me,We,_e){_e/=100;const re=We*Math.min(_e,1-_e)/100,H=p=>{const w=(p+me/30)%12,c=_e-re*Math.max(Math.min(w-3,9-w,1),-1);return Math.round(255*c).toString(16).padStart(2,"0")};return`#${H(0)}${H(8)}${H(4)}`}let Wt={h:208,s:8,ph:325,ps:33};const Rr={background:gr(Wt.h,Wt.s,18),cursor:gr(Wt.ph,Wt.ps,52),cursorAccent:gr(Wt.ph,Wt.ps,52),black:gr(Wt.h,Wt.s,14)},cr=new Er.Terminal({fontFamily:'"Cascadia Code", Menlo, monospace',theme:Rr,cursorBlink:!0});cr.open(document.body);const Lr=new Sr.exports.FitAddon;cr.loadAddon(Lr);cr.loadAddon(new mr.exports.WebLinksAddon);cr.loadAddon(new br.exports.WebglAddon);(async()=>{const me=await(await fetch("/api/terminals",{method:"POST"})).text();if(!parseFloat(me))return;console.log(`Terminal created! PID: ${me}`);async function We(re){await fetch(`/api/terminals/${me}/edit/size?cols=${re.cols}&rows=${re.rows}`,{method:"POST"})}cr.onResize(We);const _e=new WebSocket(`ws://${window.location.host}/api/terminals/${me}`);_e.addEventListener("open",()=>{console.log("Connection established");const re=new Cr.exports.AttachAddon(_e,{bidirectional:!0});cr.loadAddon(re)}),cr.onData(re=>{}),setInterval(()=>{Lr.fit()},500)})();
